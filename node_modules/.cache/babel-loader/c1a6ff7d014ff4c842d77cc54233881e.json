{"ast":null,"code":"import _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport { supportTouch, getOS, getBrowser, getSystem } from '@ui5/webcomponents-base/dist/Device';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _createForOfIteratorHelper from '@babel/runtime/helpers/createForOfIteratorHelper';\nimport '@ui5/webcomponents-react-base/third-party/modernizr';\n\nvar EventRegistry = /*#__PURE__*/function () {\n  function EventRegistry() {\n    _classCallCheck(this, EventRegistry);\n  }\n\n  _createClass(EventRegistry, null, [{\n    key: \"attachEvent\",\n    value: function attachEvent(sEventId, fnFunction, oListener) {\n      if (!EventRegistry.mEventRegistry[sEventId]) {\n        EventRegistry.mEventRegistry[sEventId] = [];\n      }\n\n      EventRegistry.mEventRegistry[sEventId].push({\n        oListener: oListener,\n        fFunction: fnFunction\n      });\n    }\n  }, {\n    key: \"detachEvent\",\n    value: function detachEvent(sEventId, fnFunction, oListener) {\n      var aEventListeners = EventRegistry.mEventRegistry[sEventId];\n\n      if (!aEventListeners) {\n        return;\n      }\n\n      for (var i = 0, iL = aEventListeners.length; i < iL; i++) {\n        if (aEventListeners[i].fFunction === fnFunction && aEventListeners[i].oListener === oListener) {\n          aEventListeners.splice(i, 1);\n          break;\n        }\n      }\n\n      if (aEventListeners.length === 0) {\n        delete EventRegistry.mEventRegistry[sEventId];\n      }\n    }\n  }, {\n    key: \"fireEvent\",\n    value: function fireEvent(sEventId, mParameters) {\n      var aEventListeners = EventRegistry.mEventRegistry[sEventId];\n      var oInfo;\n\n      if (aEventListeners) {\n        aEventListeners = aEventListeners.slice();\n\n        for (var i = 0, iL = aEventListeners.length; i < iL; i++) {\n          oInfo = aEventListeners[i];\n          oInfo.fFunction.call(oInfo.oListener || window, mParameters);\n        }\n      }\n    }\n  }]);\n\n  return EventRegistry;\n}();\n\nEventRegistry.mEventRegistry = {};\n/* eslint-disable no-console,no-unused-expressions */\n\nvar pad0 = function pad0(i, w) {\n  return \"000\".concat(String(i)).slice(-w);\n};\n\nvar LOG_LEVEL;\n\n(function (LOG_LEVEL) {\n  LOG_LEVEL[LOG_LEVEL[\"FATAL\"] = 0] = \"FATAL\";\n  LOG_LEVEL[LOG_LEVEL[\"ERROR\"] = 1] = \"ERROR\";\n  LOG_LEVEL[LOG_LEVEL[\"WARNING\"] = 2] = \"WARNING\";\n  LOG_LEVEL[LOG_LEVEL[\"INFO\"] = 3] = \"INFO\";\n  LOG_LEVEL[LOG_LEVEL[\"DEBUG\"] = 4] = \"DEBUG\";\n  LOG_LEVEL[LOG_LEVEL[\"TRACE\"] = 5] = \"TRACE\";\n})(LOG_LEVEL || (LOG_LEVEL = {}));\n\nvar DeviceLogger = /*#__PURE__*/function () {\n  function DeviceLogger() {\n    var defaultComponent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'DEVICE';\n\n    _classCallCheck(this, DeviceLogger);\n\n    this.defaultComponent = void 0;\n    this.sWindowName = window.top === window ? '' : \"[\".concat(window.location.pathname.split('/').slice(-1)[0], \"] \");\n    this.log(LOG_LEVEL.INFO, 'Device API logging initialized');\n    this.defaultComponent = defaultComponent;\n    return this;\n  }\n\n  _createClass(DeviceLogger, [{\n    key: \"for\",\n    value: function _for(defaultComponent) {\n      return new DeviceLogger(defaultComponent);\n    }\n  }, {\n    key: \"log\",\n    value: function log(iLevel, sMessage, sComponent) {\n      sComponent = sComponent || this.defaultComponent || '';\n      var oNow = new Date();\n      var oLogEntry = {\n        time: \"\".concat(pad0(oNow.getHours(), 2), \":\").concat(pad0(oNow.getMinutes(), 2), \":\").concat(pad0(oNow.getSeconds(), 2)),\n        date: \"\".concat(pad0(oNow.getFullYear(), 4), \"-\").concat(pad0(oNow.getMonth() + 1, 2), \"-\").concat(pad0(oNow.getDate(), 2)),\n        timestamp: oNow.getTime(),\n        level: iLevel,\n        message: sMessage || '',\n        component: sComponent || ''\n      };\n\n      if (window.console) {\n        var logText = \"\".concat(oLogEntry.date, \" \").concat(oLogEntry.time, \" \").concat(this.sWindowName).concat(oLogEntry.message, \" - \").concat(oLogEntry.component);\n\n        switch (iLevel) {\n          case LOG_LEVEL.FATAL:\n          case LOG_LEVEL.ERROR:\n            console.error(logText);\n            break;\n\n          case LOG_LEVEL.WARNING:\n            console.warn(logText);\n            break;\n\n          case LOG_LEVEL.INFO:\n            console.info ? console.info(logText) : console.log(logText);\n            break;\n          // info not available in iOS simulator\n\n          case LOG_LEVEL.DEBUG:\n            console.debug ? console.debug(logText) : console.log(logText);\n            break;\n          // debug not available in IE, fallback to log\n\n          case LOG_LEVEL.TRACE:\n            console.trace ? console.trace(logText) : console.log(logText);\n            break;\n          // trace not available in IE, fallback to log\n        }\n      }\n\n      return oLogEntry;\n    } //  Public API\n\n  }, {\n    key: \"fatal\",\n    value: function fatal(msg, component) {\n      return this.log(LOG_LEVEL.FATAL, msg, component);\n    }\n  }, {\n    key: \"error\",\n    value: function error(msg, component) {\n      return this.log(LOG_LEVEL.ERROR, msg, component);\n    }\n  }, {\n    key: \"warning\",\n    value: function warning(msg, component) {\n      return this.log(LOG_LEVEL.WARNING, msg, component);\n    }\n  }, {\n    key: \"info\",\n    value: function info(msg, component) {\n      return this.log(LOG_LEVEL.INFO, msg, component);\n    }\n  }, {\n    key: \"debug\",\n    value: function debug(msg, component) {\n      return this.log(LOG_LEVEL.DEBUG, msg, component);\n    }\n  }, {\n    key: \"trace\",\n    value: function trace(msg, component) {\n      return this.log(LOG_LEVEL.TRACE, msg, component);\n    }\n  }]);\n\n  return DeviceLogger;\n}();\n\nvar Logger = new DeviceLogger();\n\nvar windowSize = function windowSize() {\n  return [window.innerWidth, window.innerHeight];\n};\n\nvar changeRootCSSClass = function changeRootCSSClass(sClassName, bRemove, sPrefix) {\n  var oRoot = document.documentElement;\n\n  if (oRoot.className.length === 0) {\n    if (!bRemove) {\n      oRoot.className = sClassName;\n    }\n  } else {\n    var aCurrentClasses = oRoot.className.split(' ');\n    var sNewClasses = '';\n    aCurrentClasses.forEach(function (currentClass) {\n      // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with\n      if (sPrefix && currentClass.indexOf(sPrefix) !== 0 || !sPrefix && currentClass !== sClassName) {\n        sNewClasses = \"\".concat(sNewClasses + currentClass, \" \");\n      }\n    });\n\n    if (!bRemove) {\n      sNewClasses += sClassName;\n    }\n\n    oRoot.className = sNewClasses;\n  }\n};\n\nvar getQuery = function getQuery(from, to, unit) {\n  unit = unit || 'px';\n  var q = 'all';\n\n  if (from > 0) {\n    q = \"\".concat(q, \" and (min-width:\").concat(from).concat(unit, \")\");\n  }\n\n  if (to > 0) {\n    q = \"\".concat(q, \" and (max-width:\").concat(to).concat(unit, \")\");\n  }\n\n  return q;\n};\n\nvar convertToPx = function convertToPx(val, unit) {\n  if (unit === 'em' || unit === 'rem') {\n    var _window$getComputedSt;\n\n    var s = (_window$getComputedSt = window.getComputedStyle) !== null && _window$getComputedSt !== void 0 ? _window$getComputedSt : function (element) {\n      return element.currentStyle;\n    };\n    var x = s(document.documentElement).fontSize;\n    var f = x && x.indexOf('px') >= 0 ? parseFloat(x) : 16;\n    return val * f;\n  }\n\n  return val;\n};\n\nvar matchLegacyBySize = function matchLegacyBySize(from, to, unit, size) {\n  from = convertToPx(from, unit);\n  to = convertToPx(to, unit);\n  var width = size[0];\n  var a = from < 0 || from <= width;\n  var b = to < 0 || width <= to;\n  return a && b;\n};\n\nvar _Media$predefinedRang;\n\nvar RANGESETS; // tslint:disable prefer-for-of variable-name one-variable-per-declaration\n\n(function (RANGESETS) {\n  RANGESETS[\"SAP_3STEPS\"] = \"3Step\";\n  RANGESETS[\"SAP_4STEPS\"] = \"4Step\";\n  RANGESETS[\"SAP_6STEPS\"] = \"6Step\";\n  RANGESETS[\"SAP_STANDARD\"] = \"Std\";\n  RANGESETS[\"SAP_STANDARD_EXTENDED\"] = \"StdExt\";\n})(RANGESETS || (RANGESETS = {}));\n\nvar support;\nvar defaultRangeSet = RANGESETS.SAP_STANDARD;\nvar querysets = {};\nvar mediaCurrentwidth = null;\n\nvar matchLegacy = function matchLegacy(from, to, unit) {\n  return matchLegacyBySize(from, to, unit, windowSize());\n};\n\nvar match = function match(from, to, unit) {\n  var q = getQuery(from, to, unit);\n  var mm = window.matchMedia(q); // FF returns null when running within an iframe with display:none\n\n  return mm && mm.matches;\n};\n\nvar refreshCSSClasses = function refreshCSSClasses(sSetName, sRangeName, bRemove) {\n  var sClassPrefix = \"sapUiMedia-\".concat(sSetName, \"-\");\n  changeRootCSSClass(sClassPrefix + sRangeName, bRemove, sClassPrefix);\n};\n\nvar Media = /*#__PURE__*/function () {\n  function Media(supportInstance) {\n    _classCallCheck(this, Media);\n\n    this.mediaTimeout = void 0;\n    this.matches = void 0;\n    this.RANGESETS = RANGESETS;\n    support = supportInstance;\n    this.mediaTimeout = support.matchmedialistener ? 0 : 100;\n    this.matches = support.matchmedia ? match : matchLegacy;\n    this.initRangeSet();\n    this.initRangeSet(RANGESETS.SAP_STANDARD_EXTENDED);\n  }\n\n  _createClass(Media, [{\n    key: \"checkQueries\",\n    value: function checkQueries(name, infoOnly, fnMatches) {\n      fnMatches = fnMatches || this.matches;\n\n      if (querysets[name]) {\n        var aQueries = querysets[name].queries;\n        var info = null;\n\n        for (var i = 0, len = aQueries.length; i < len; i++) {\n          var q = aQueries[i];\n\n          if ((q !== querysets[name].currentquery || infoOnly) && fnMatches(q.from, q.to, querysets[name].unit)) {\n            if (!infoOnly) {\n              querysets[name].currentquery = q;\n            }\n\n            if (!querysets[name].noClasses && querysets[name].names && !infoOnly) {\n              refreshCSSClasses(name, querysets[name].names[i]);\n            }\n\n            info = Media.getRangeInfo(name, i);\n          }\n        }\n\n        return info;\n      }\n\n      Logger.warning(\"No queryset with name \".concat(name, \" found\"), 'DEVICE.MEDIA');\n      return null;\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(name) {\n      var _this = this;\n\n      if (!support.matchmedialistener && mediaCurrentwidth === windowSize()[0]) {\n        return; // Skip unnecessary resize events\n      }\n\n      if (querysets[name].timer) {\n        clearTimeout(querysets[name].timer);\n        querysets[name].timer = null;\n      }\n\n      querysets[name].timer = setTimeout(function () {\n        var mParams = _this.checkQueries(name, false);\n\n        if (mParams) {\n          EventRegistry.fireEvent(\"media_\".concat(name), mParams);\n        }\n      }, this.mediaTimeout);\n    }\n  }, {\n    key: \"attachHandler\",\n    value: function attachHandler(fnFunction, oListener, sName) {\n      var name = sName || defaultRangeSet;\n      EventRegistry.attachEvent(\"media_\".concat(name), fnFunction, oListener);\n    }\n  }, {\n    key: \"detachHandler\",\n    value: function detachHandler(fnFunction, oListener, sName) {\n      var name = sName || defaultRangeSet;\n      EventRegistry.detachEvent(\"media_\".concat(name), fnFunction, oListener);\n    }\n  }, {\n    key: \"initRangeSet\",\n    value: function initRangeSet(sName, aRangeBorders, sUnit, aRangeNames, bSuppressClasses) {\n      var _this2 = this;\n\n      var oConfig;\n\n      if (!sName) {\n        oConfig = Media.predefinedRangeSets[defaultRangeSet];\n      } else if (sName && Media.predefinedRangeSets[sName]) {\n        oConfig = Media.predefinedRangeSets[sName];\n      } else {\n        oConfig = {\n          name: sName,\n          unit: (sUnit || 'px').toLowerCase(),\n          points: aRangeBorders || [],\n          names: aRangeNames,\n          noClasses: !!bSuppressClasses\n        };\n      }\n\n      if (this.hasRangeSet(oConfig.name)) {\n        Logger.info(\"Range set \".concat(oConfig.name, \" has already been initialized\"), 'DEVICE.MEDIA');\n        return;\n      }\n\n      sName = oConfig.name;\n      oConfig.queries = [];\n      oConfig.timer = null;\n      oConfig.currentquery = null;\n\n      oConfig.listener = function () {\n        return _this2.handleChange(sName);\n      };\n\n      var from;\n      var to;\n      var query;\n      var aPoints = oConfig.points;\n\n      for (var i = 0, len = aPoints.length; i <= len; i++) {\n        from = i === 0 ? 0 : aPoints[i - 1];\n        to = i === aPoints.length ? -1 : aPoints[i];\n        query = getQuery(from, to, oConfig.unit);\n        oConfig.queries.push({\n          query: query,\n          from: from,\n          to: to\n        });\n      }\n\n      if (oConfig.names && oConfig.names.length !== oConfig.queries.length) {\n        oConfig.names = null;\n      }\n\n      querysets[oConfig.name] = oConfig;\n\n      if (support.matchmedialistener) {\n        // FF, Safari, Chrome, IE10?\n        var queries = oConfig.queries;\n\n        var _iterator = _createForOfIteratorHelper(queries),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var q = _step.value;\n            q.media = window.matchMedia(q.query);\n            q.media.addListener(oConfig.listener);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      } else {\n        // IE, Safari (<6?)\n        window.addEventListener('resize', oConfig.listener, false);\n        window.addEventListener('orientationchange', oConfig.listener, false);\n      }\n\n      oConfig.listener();\n    }\n  }, {\n    key: \"getCurrentRange\",\n    value: function getCurrentRange(sName, iWidth) {\n      if (!this.hasRangeSet(sName)) {\n        return null;\n      }\n\n      return this.checkQueries(sName, true, isNaN(iWidth) ? null : function (from, to, unit) {\n        return matchLegacyBySize(from, to, unit, [iWidth, 0]);\n      });\n    }\n  }, {\n    key: \"hasRangeSet\",\n    value: function hasRangeSet(sName) {\n      return sName && !!querysets[sName];\n    }\n  }, {\n    key: \"removeRangeSet\",\n    value: function removeRangeSet(sName) {\n      if (!this.hasRangeSet(sName)) {\n        Logger.info(\"RangeSet \".concat(sName, \" not found, thus could not be removed.\"), 'DEVICE.MEDIA');\n        return;\n      }\n\n      for (var x in RANGESETS) {\n        if (sName === RANGESETS[x]) {\n          Logger.warning('Cannot remove default rangeset - no action taken.', 'DEVICE.MEDIA');\n          return;\n        }\n      }\n\n      var oConfig = querysets[sName];\n\n      if (support.matchmedialistener) {\n        // FF, Safari, Chrome, IE10?\n        var queries = oConfig.queries;\n\n        var _iterator2 = _createForOfIteratorHelper(queries),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var q = _step2.value;\n            q.media.removeListener(oConfig.listener);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      } else {\n        // IE, Safari (<6?)\n        window.removeEventListener('resize', oConfig.listener, false);\n        window.removeEventListener('orientationchange', oConfig.listener, false);\n      }\n\n      refreshCSSClasses(sName, '', true);\n      delete EventRegistry.mEventRegistry[\"media_\".concat(sName)];\n      delete querysets[sName];\n    }\n  }], [{\n    key: \"getRangeInfo\",\n    value: function getRangeInfo(sSetName, iRangeIdx) {\n      var q = querysets[sSetName].queries[iRangeIdx];\n      var info = {\n        from: q.from,\n        unit: querysets[sSetName].unit\n      };\n\n      if (q.to >= 0) {\n        info.to = q.to;\n      }\n\n      if (querysets[sSetName].names) {\n        info.name = querysets[sSetName].names[iRangeIdx];\n      }\n\n      return info;\n    }\n  }]);\n\n  return Media;\n}();\n\nMedia.predefinedRangeSets = (_Media$predefinedRang = {}, _defineProperty(_Media$predefinedRang, RANGESETS.SAP_3STEPS, {\n  points: [520, 960],\n  unit: 'px',\n  name: RANGESETS.SAP_3STEPS,\n  names: ['S', 'M', 'L']\n}), _defineProperty(_Media$predefinedRang, RANGESETS.SAP_4STEPS, {\n  points: [520, 760, 960],\n  unit: 'px',\n  name: RANGESETS.SAP_4STEPS,\n  names: ['S', 'M', 'L', 'XL']\n}), _defineProperty(_Media$predefinedRang, RANGESETS.SAP_6STEPS, {\n  points: [241, 400, 541, 768, 960],\n  unit: 'px',\n  name: RANGESETS.SAP_6STEPS,\n  names: ['XS', 'S', 'M', 'L', 'XL', 'XXL']\n}), _defineProperty(_Media$predefinedRang, RANGESETS.SAP_STANDARD, {\n  points: [600, 1024],\n  unit: 'px',\n  name: RANGESETS.SAP_STANDARD,\n  names: ['Phone', 'Tablet', 'Desktop']\n}), _defineProperty(_Media$predefinedRang, RANGESETS.SAP_STANDARD_EXTENDED, {\n  points: [600, 1024, 1440],\n  unit: 'px',\n  name: RANGESETS.SAP_STANDARD_EXTENDED,\n  names: ['Phone', 'Tablet', 'Desktop', 'LargeDesktop']\n}), _Media$predefinedRang);\n\nvar Orientation = /*#__PURE__*/function () {\n  function Orientation() {\n    _classCallCheck(this, Orientation);\n\n    this.landscape = void 0;\n    this.portrait = void 0;\n  }\n\n  _createClass(Orientation, [{\n    key: \"attachHandler\",\n    value: function attachHandler(fnFunction, oListener) {\n      EventRegistry.attachEvent('orientation', fnFunction, oListener);\n    }\n  }, {\n    key: \"detachHandler\",\n    value: function detachHandler(fnFunction, oListener) {\n      EventRegistry.detachEvent('orientation', fnFunction, oListener);\n    }\n  }]);\n\n  return Orientation;\n}();\n\nvar Resize = /*#__PURE__*/function () {\n  function Resize() {\n    _classCallCheck(this, Resize);\n\n    this.width = void 0;\n    this.height = void 0;\n    this.setResizeInfo();\n  }\n\n  _createClass(Resize, [{\n    key: \"attachHandler\",\n    value: function attachHandler(fnFunction, oListener) {\n      EventRegistry.attachEvent('resize', fnFunction, oListener);\n    }\n  }, {\n    key: \"detachHandler\",\n    value: function detachHandler(fnFunction, oListener) {\n      EventRegistry.detachEvent('resize', fnFunction, oListener);\n    }\n  }, {\n    key: \"setResizeInfo\",\n    value: function setResizeInfo() {\n      this.width = windowSize()[0];\n      this.height = windowSize()[1];\n    }\n  }]);\n\n  return Resize;\n}();\n\nvar Support = function Support() {\n  _classCallCheck(this, Support);\n\n  this.touch = supportTouch();\n  this.pointer = Modernizr.pointerevents;\n  this.matchmedia = Modernizr.matchmedia;\n  this.matchmedialistener = !!(this.matchmedia && window.matchMedia('all and (max-width:0px)'));\n  this.orientation = Modernizr.deviceorientation;\n  this.retina = window.retina || window.devicePixelRatio >= 2;\n  this.websocket = Modernizr.websockets;\n  this.input = {\n    placeholder: Modernizr.placeholder\n  };\n};\n\nvar iResizeTimeout;\nvar bOrientationChange = false;\nvar bResize = false;\nvar iOrientationTimeout;\nvar iClearFlagTimeout;\nvar iWindowHeightOld = windowSize()[1];\nvar iWindowWidthOld = windowSize()[0];\nvar bKeyboardOpen = false;\nvar iLastResizeTime;\nvar rInputTagRegex = /INPUT|TEXTAREA|SELECT/;\nvar bSkipFirstResize;\n\nvar DeviceBuilder = function DeviceBuilder() {\n  var _this = this;\n\n  _classCallCheck(this, DeviceBuilder);\n\n  this.os = getOS();\n  this.browser = getBrowser();\n  this.support = new Support();\n  this.system = getSystem();\n  this.media = new Media(this.support);\n  this.orientation = new Orientation();\n  this.resize = new Resize();\n\n  this.handleResizeEvent = function () {\n    var wasL = _this.orientation.landscape;\n\n    var isL = _this.isLandscape(false);\n\n    if (wasL !== isL) {\n      _this.handleOrientationChange();\n    } // throttle resize events because most browsers throw one or more resize events per pixel\n    // for every resize event inside the period from 150ms (starting from the first resize event),\n    // we only fire one resize event after this period\n\n\n    if (!iResizeTimeout) {\n      iResizeTimeout = window.setTimeout(_this.handleResizeTimeout, 150);\n    }\n  };\n\n  this.handleResizeTimeout = function () {\n    _this.handleResizeChange();\n\n    iResizeTimeout = null;\n  };\n\n  this.handleResizeChange = function () {\n    _this.resize.setResizeInfo();\n\n    EventRegistry.fireEvent('resize', {\n      height: _this.resize.height,\n      width: _this.resize.width\n    });\n  };\n\n  this.setOrientationInfo = function () {\n    _this.orientation.landscape = _this.isLandscape(true);\n    _this.orientation.portrait = !_this.orientation.landscape;\n  };\n\n  this.handleOrientationChange = function () {\n    _this.setOrientationInfo();\n\n    EventRegistry.fireEvent('orientation', {\n      landscape: _this.orientation.landscape\n    });\n  };\n\n  this.isLandscape = function (bFromOrientationChange) {\n    if (_this.support.touch && _this.support.orientation && _this.os.android) {\n      // if on screen keyboard is open and the call of this method is from orientation change listener,\n      // reverse the last value. this is because when keyboard opens on android device, the height can be less\n      // than the width even in portrait mode.\n      if (bKeyboardOpen && bFromOrientationChange) {\n        return !_this.orientation.landscape;\n      }\n\n      if (bKeyboardOpen) {\n        // when keyboard opens, the last orientation change value will be returned.\n        return _this.orientation.landscape;\n      }\n    } else if (_this.support.matchmedia && _this.support.orientation) {\n      // most desktop browsers and windows phone/tablet which not support orientationchange\n      return !!window.matchMedia('(orientation: landscape)').matches;\n    } // otherwise compare the width and height of window\n\n\n    var size = windowSize();\n    return size[0] > size[1];\n  };\n\n  this.handleMobileOrientationResizeChange = function (evt) {\n    if (evt.type === 'resize') {\n      if (bSkipFirstResize && rInputTagRegex.test(document.activeElement.tagName) && !bOrientationChange) {\n        return;\n      }\n\n      var iWindowHeightNew = windowSize()[1];\n      var iWindowWidthNew = windowSize()[0];\n      var iTime = new Date().getTime(); // skip multiple resize events by only one orientationchange\n\n      if (iWindowHeightNew === iWindowHeightOld && iWindowWidthNew === iWindowWidthOld) {\n        return;\n      }\n\n      bResize = true; // on mobile devices opening the keyboard on some devices leads to a resize event\n      // in this case only the height changes, not the width\n\n      if (iWindowHeightOld !== iWindowHeightNew && iWindowWidthOld === iWindowWidthNew) {\n        // Asus Transformer tablet fires two resize events when orientation changes while keyboard is open.\n        // Between these two events, only the height changes. The check of if keyboard is open has to be skipped because\n        // it may be judged as keyboard closed but the keyboard is still\n        // open which will affect the orientation detection\n        if (!iLastResizeTime || iTime - iLastResizeTime > 300) {\n          bKeyboardOpen = iWindowHeightNew < iWindowHeightOld;\n        }\n\n        _this.handleResizeChange();\n      } else {\n        iWindowWidthOld = iWindowWidthNew;\n      }\n\n      iLastResizeTime = iTime;\n      iWindowHeightOld = iWindowHeightNew;\n\n      if (iClearFlagTimeout) {\n        window.clearTimeout(iClearFlagTimeout);\n        iClearFlagTimeout = null;\n      } // Some Android build-in browser fires a resize event after the viewport is applied.\n      // This resize event has to be dismissed otherwise when the next orientationchange event happens,\n      // a UI5 resize event will be fired with the wrong window size.\n\n\n      iClearFlagTimeout = window.setTimeout(DeviceBuilder.clearFlags, 1200);\n    } else if (evt.type === 'orientationchange') {\n      bOrientationChange = true;\n    }\n\n    if (iOrientationTimeout) {\n      clearTimeout(iOrientationTimeout);\n      iOrientationTimeout = null;\n    }\n\n    iOrientationTimeout = window.setTimeout(_this.handleMobileTimeout, 50);\n  };\n\n  this.handleMobileTimeout = function () {\n    // with ios split view, the browser fires only resize event and no orientationchange\n    // when changing the size of a split view\n    // therefore the following if needs to be adapted with additional check of iPad with version greater or equal 9\n    // (splitview was introduced with iOS 9)\n    if (bResize && (bOrientationChange || _this.system.tablet && _this.os.ios && _this.os.version >= 9)) {\n      _this.handleOrientationChange();\n\n      _this.handleResizeChange();\n\n      bOrientationChange = false;\n      bResize = false;\n\n      if (iClearFlagTimeout) {\n        window.clearTimeout(iClearFlagTimeout);\n        iClearFlagTimeout = null;\n      }\n    }\n\n    iOrientationTimeout = null;\n  }; // On iPhone with iOS version 7.0.x and on iPad with iOS version 7.x\n  // (tested with all versions below 7.1.1), there's an invalid resize event fired\n  // when changing the orientation while keyboard is shown.\n\n\n  bSkipFirstResize = this.os.ios && this.browser.name === 'sf' && (this.system.phone && this.os.version >= 7 && this.os.version < 7.1 || this.system.tablet && this.os.version >= 7); // Add handler for orientationchange and resize after initialization of Device API\n\n  if (this.support.touch && this.support.orientation) {\n    // logic for mobile devices which support orientationchange (like ios, android)\n    window.addEventListener('resize', this.handleMobileOrientationResizeChange, false);\n    window.addEventListener('orientationchange', this.handleMobileOrientationResizeChange, false);\n  } else {\n    // desktop browsers and windows phone/tablet which not support orientationchange\n    window.addEventListener('resize', this.handleResizeEvent, false);\n  }\n\n  this.setOrientationInfo();\n};\n\nDeviceBuilder.clearFlags = function () {\n  bOrientationChange = false;\n  bResize = false;\n  iClearFlagTimeout = null;\n};\n\nvar Device = new DeviceBuilder();\nexport { Device };","map":{"version":3,"sources":["../src/Device/EventRegistry.ts","../src/utils/Logger.ts","../src/Device/utils.ts","../src/Device/Media.ts","../src/Device/Orientation.ts","../src/Device/Resize.ts","../src/Device/Support.ts","../src/Device/index.ts"],"names":["EventRegistry","mEventRegistry","oListener","fFunction","fnFunction","aEventListeners","i","iL","oInfo","pad0","String","LOG_LEVEL","DeviceLogger","defaultComponent","sWindowName","window","iLevel","sMessage","sComponent","oNow","oLogEntry","time","date","timestamp","level","message","component","logText","console","msg","Logger","windowSize","changeRootCSSClass","oRoot","document","aCurrentClasses","sNewClasses","sPrefix","currentClass","getQuery","unit","q","from","to","convertToPx","s","element","x","f","parseFloat","val","matchLegacyBySize","width","size","a","b","RANGESETS","defaultRangeSet","querysets","mediaCurrentwidth","matchLegacy","match","mm","refreshCSSClasses","sClassPrefix","Media","mediaTimeout","matches","support","predefinedRangeSets","SAP_3STEPS","points","name","names","SAP_4STEPS","SAP_6STEPS","SAP_STANDARD","SAP_STANDARD_EXTENDED","info","fnMatches","aQueries","len","clearTimeout","setTimeout","mParams","sName","oConfig","sUnit","aRangeBorders","noClasses","bSuppressClasses","aPoints","query","queries","isNaN","Orientation","Resize","height","Support","supportTouch","Modernizr","placeholder","bOrientationChange","bResize","iWindowHeightOld","iWindowWidthOld","bKeyboardOpen","rInputTagRegex","DeviceBuilder","os","getOS","browser","getBrowser","system","getSystem","media","orientation","resize","bSkipFirstResize","wasL","isL","iResizeTimeout","landscape","evt","iWindowHeightNew","iWindowWidthNew","iTime","iLastResizeTime","iClearFlagTimeout","iOrientationTimeout","clearFlags","Device"],"mappings":"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","sourcesContent":["export class EventRegistry {\n  public static mEventRegistry = {};\n\n  public static attachEvent(sEventId, fnFunction, oListener?) {\n    if (!EventRegistry.mEventRegistry[sEventId]) {\n      EventRegistry.mEventRegistry[sEventId] = [];\n    }\n    EventRegistry.mEventRegistry[sEventId].push({\n      oListener,\n      fFunction: fnFunction\n    });\n  }\n\n  public static detachEvent(sEventId, fnFunction, oListener?) {\n    const aEventListeners = EventRegistry.mEventRegistry[sEventId];\n\n    if (!aEventListeners) {\n      return;\n    }\n\n    for (let i = 0, iL = aEventListeners.length; i < iL; i++) {\n      if (aEventListeners[i].fFunction === fnFunction && aEventListeners[i].oListener === oListener) {\n        aEventListeners.splice(i, 1);\n        break;\n      }\n    }\n    if (aEventListeners.length === 0) {\n      delete EventRegistry.mEventRegistry[sEventId];\n    }\n  }\n\n  public static fireEvent(sEventId, mParameters?) {\n    let aEventListeners = EventRegistry.mEventRegistry[sEventId];\n    let oInfo;\n    if (aEventListeners) {\n      aEventListeners = aEventListeners.slice();\n      for (let i = 0, iL = aEventListeners.length; i < iL; i++) {\n        oInfo = aEventListeners[i];\n        oInfo.fFunction.call(oInfo.oListener || window, mParameters);\n      }\n    }\n  }\n}\n","/* eslint-disable no-console,no-unused-expressions */\n\nconst pad0 = (i: any, w: number) => `000${String(i)}`.slice(-w);\n\nexport enum LOG_LEVEL {\n  FATAL = 0,\n  ERROR = 1,\n  WARNING = 2,\n  INFO = 3,\n  DEBUG = 4,\n  TRACE = 5\n}\n\nclass DeviceLogger {\n  public defaultComponent: string;\n  public sWindowName = window.top === window ? '' : `[${window.location.pathname.split('/').slice(-1)[0]}] `;\n\n  constructor(defaultComponent = 'DEVICE') {\n    this.log(LOG_LEVEL.INFO, 'Device API logging initialized');\n    this.defaultComponent = defaultComponent;\n    return this;\n  }\n\n  public for(defaultComponent: string) {\n    return new DeviceLogger(defaultComponent);\n  }\n\n  public log(iLevel: LOG_LEVEL, sMessage: string, sComponent?: string) {\n    sComponent = sComponent || this.defaultComponent || '';\n    const oNow = new Date();\n    const oLogEntry = {\n      time: `${pad0(oNow.getHours(), 2)}:${pad0(oNow.getMinutes(), 2)}:${pad0(oNow.getSeconds(), 2)}`,\n      date: `${pad0(oNow.getFullYear(), 4)}-${pad0(oNow.getMonth() + 1, 2)}-${pad0(oNow.getDate(), 2)}`,\n      timestamp: oNow.getTime(),\n      level: iLevel,\n      message: sMessage || '',\n      component: sComponent || ''\n    };\n    if (window.console) {\n      const logText = `${oLogEntry.date} ${oLogEntry.time} ${this.sWindowName}${oLogEntry.message} - ${oLogEntry.component}`;\n      switch (iLevel) {\n        case LOG_LEVEL.FATAL:\n        case LOG_LEVEL.ERROR:\n          console.error(logText);\n          break;\n        case LOG_LEVEL.WARNING:\n          console.warn(logText);\n          break;\n        case LOG_LEVEL.INFO:\n          console.info ? console.info(logText) : console.log(logText);\n          break; // info not available in iOS simulator\n        case LOG_LEVEL.DEBUG:\n          console.debug ? console.debug(logText) : console.log(logText);\n          break; // debug not available in IE, fallback to log\n        case LOG_LEVEL.TRACE:\n          console.trace ? console.trace(logText) : console.log(logText);\n          break; // trace not available in IE, fallback to log\n      }\n    }\n    return oLogEntry;\n  }\n\n  //  Public API\n  public fatal(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.FATAL, msg, component);\n  }\n\n  public error(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.ERROR, msg, component);\n  }\n\n  public warning(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.WARNING, msg, component);\n  }\n\n  public info(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.INFO, msg, component);\n  }\n\n  public debug(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.DEBUG, msg, component);\n  }\n\n  public trace(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.TRACE, msg, component);\n  }\n}\n\nexport const Logger = new DeviceLogger();\n","export const windowSize = () => {\n  return [window.innerWidth, window.innerHeight];\n};\n\nexport const changeRootCSSClass = (sClassName, bRemove, sPrefix?) => {\n  const oRoot = document.documentElement;\n  if (oRoot.className.length === 0) {\n    if (!bRemove) {\n      oRoot.className = sClassName;\n    }\n  } else {\n    const aCurrentClasses = oRoot.className.split(' ');\n    let sNewClasses = '';\n    aCurrentClasses.forEach((currentClass) => {\n      // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with\n      if ((sPrefix && currentClass.indexOf(sPrefix) !== 0) || (!sPrefix && currentClass !== sClassName)) {\n        sNewClasses = `${sNewClasses + currentClass} `;\n      }\n    });\n    if (!bRemove) {\n      sNewClasses += sClassName;\n    }\n    oRoot.className = sNewClasses;\n  }\n};\n\nexport const getQuery = (from, to, unit) => {\n  unit = unit || 'px';\n  let q = 'all';\n  if (from > 0) {\n    q = `${q} and (min-width:${from}${unit})`;\n  }\n  if (to > 0) {\n    q = `${q} and (max-width:${to}${unit})`;\n  }\n  return q;\n};\n\nexport const convertToPx = (val, unit?) => {\n  if (unit === 'em' || unit === 'rem') {\n    const s = window.getComputedStyle ?? ((element: any) => element.currentStyle);\n    const x = s(document.documentElement).fontSize;\n    const f = x && x.indexOf('px') >= 0 ? parseFloat(x) : 16;\n    return val * f;\n  }\n  return val;\n};\n\nexport const matchLegacyBySize = (from, to, unit, size) => {\n  from = convertToPx(from, unit);\n  to = convertToPx(to, unit);\n\n  const width = size[0];\n  const a = from < 0 || from <= width;\n  const b = to < 0 || width <= to;\n  return a && b;\n};\n","import { Logger } from '../utils/Logger';\nimport { EventRegistry } from './EventRegistry';\nimport { changeRootCSSClass, getQuery, matchLegacyBySize, windowSize } from './utils';\n\nexport enum RANGESETS {\n  SAP_3STEPS = '3Step',\n  SAP_4STEPS = '4Step',\n  SAP_6STEPS = '6Step',\n  SAP_STANDARD = 'Std',\n  SAP_STANDARD_EXTENDED = 'StdExt'\n}\n\n// tslint:disable prefer-for-of variable-name one-variable-per-declaration\nlet support;\nconst defaultRangeSet = RANGESETS.SAP_STANDARD;\nconst querysets = {};\nconst mediaCurrentwidth = null;\n\nconst matchLegacy = (from, to, unit) => matchLegacyBySize(from, to, unit, windowSize());\nconst match = (from, to, unit) => {\n  const q = getQuery(from, to, unit);\n  const mm = window.matchMedia(q); // FF returns null when running within an iframe with display:none\n  return mm && mm.matches;\n};\nconst refreshCSSClasses = (sSetName, sRangeName, bRemove?) => {\n  const sClassPrefix = `sapUiMedia-${sSetName}-`;\n  changeRootCSSClass(sClassPrefix + sRangeName, bRemove, sClassPrefix);\n};\n\nexport class Media {\n  private readonly mediaTimeout;\n  public matches;\n\n  constructor(supportInstance) {\n    support = supportInstance;\n    this.mediaTimeout = support.matchmedialistener ? 0 : 100;\n    this.matches = support.matchmedia ? match : matchLegacy;\n    this.initRangeSet();\n    this.initRangeSet(RANGESETS.SAP_STANDARD_EXTENDED);\n  }\n\n  public RANGESETS = RANGESETS;\n  private static predefinedRangeSets = {\n    [RANGESETS.SAP_3STEPS]: {\n      points: [520, 960],\n      unit: 'px',\n      name: RANGESETS.SAP_3STEPS,\n      names: ['S', 'M', 'L']\n    },\n    [RANGESETS.SAP_4STEPS]: {\n      points: [520, 760, 960],\n      unit: 'px',\n      name: RANGESETS.SAP_4STEPS,\n      names: ['S', 'M', 'L', 'XL']\n    },\n    [RANGESETS.SAP_6STEPS]: {\n      points: [241, 400, 541, 768, 960],\n      unit: 'px',\n      name: RANGESETS.SAP_6STEPS,\n      names: ['XS', 'S', 'M', 'L', 'XL', 'XXL']\n    },\n    [RANGESETS.SAP_STANDARD]: {\n      points: [600, 1024],\n      unit: 'px',\n      name: RANGESETS.SAP_STANDARD,\n      names: ['Phone', 'Tablet', 'Desktop']\n    },\n    [RANGESETS.SAP_STANDARD_EXTENDED]: {\n      points: [600, 1024, 1440],\n      unit: 'px',\n      name: RANGESETS.SAP_STANDARD_EXTENDED,\n      names: ['Phone', 'Tablet', 'Desktop', 'LargeDesktop']\n    }\n  };\n\n  private static getRangeInfo(sSetName, iRangeIdx) {\n    const q = querysets[sSetName].queries[iRangeIdx];\n    const info = { from: q.from, unit: querysets[sSetName].unit } as any;\n    if (q.to >= 0) {\n      info.to = q.to;\n    }\n    if (querysets[sSetName].names) {\n      info.name = querysets[sSetName].names[iRangeIdx];\n    }\n    return info;\n  }\n\n  private checkQueries(name, infoOnly, fnMatches?) {\n    fnMatches = fnMatches || this.matches;\n    if (querysets[name]) {\n      const aQueries = querysets[name].queries;\n      let info = null;\n      for (let i = 0, len = aQueries.length; i < len; i++) {\n        const q = aQueries[i];\n        if ((q !== querysets[name].currentquery || infoOnly) && fnMatches(q.from, q.to, querysets[name].unit)) {\n          if (!infoOnly) {\n            querysets[name].currentquery = q;\n          }\n          if (!querysets[name].noClasses && querysets[name].names && !infoOnly) {\n            refreshCSSClasses(name, querysets[name].names[i]);\n          }\n          info = Media.getRangeInfo(name, i);\n        }\n      }\n\n      return info;\n    }\n    Logger.warning(`No queryset with name ${name} found`, 'DEVICE.MEDIA');\n    return null;\n  }\n\n  private handleChange(name) {\n    if (!support.matchmedialistener && mediaCurrentwidth === windowSize()[0]) {\n      return; // Skip unnecessary resize events\n    }\n\n    if (querysets[name].timer) {\n      clearTimeout(querysets[name].timer);\n      querysets[name].timer = null;\n    }\n\n    querysets[name].timer = setTimeout(() => {\n      const mParams = this.checkQueries(name, false);\n      if (mParams) {\n        EventRegistry.fireEvent(`media_${name}`, mParams);\n      }\n    }, this.mediaTimeout);\n  }\n\n  public attachHandler(fnFunction, oListener, sName) {\n    const name = sName || defaultRangeSet;\n    EventRegistry.attachEvent(`media_${name}`, fnFunction, oListener);\n  }\n\n  public detachHandler(fnFunction, oListener, sName) {\n    const name = sName || defaultRangeSet;\n    EventRegistry.detachEvent(`media_${name}`, fnFunction, oListener);\n  }\n\n  public initRangeSet(sName?, aRangeBorders?, sUnit?, aRangeNames?, bSuppressClasses?) {\n    let oConfig;\n    if (!sName) {\n      oConfig = Media.predefinedRangeSets[defaultRangeSet];\n    } else if (sName && Media.predefinedRangeSets[sName]) {\n      oConfig = Media.predefinedRangeSets[sName];\n    } else {\n      oConfig = {\n        name: sName,\n        unit: (sUnit || 'px').toLowerCase(),\n        points: aRangeBorders || [],\n        names: aRangeNames,\n        noClasses: !!bSuppressClasses\n      };\n    }\n\n    if (this.hasRangeSet(oConfig.name)) {\n      Logger.info(`Range set ${oConfig.name} has already been initialized`, 'DEVICE.MEDIA');\n      return;\n    }\n\n    sName = oConfig.name;\n    oConfig.queries = [];\n    oConfig.timer = null;\n    oConfig.currentquery = null;\n    oConfig.listener = () => this.handleChange(sName);\n\n    let from;\n    let to;\n    let query;\n    const aPoints = oConfig.points;\n    for (let i = 0, len = aPoints.length; i <= len; i++) {\n      from = i === 0 ? 0 : aPoints[i - 1];\n      to = i === aPoints.length ? -1 : aPoints[i];\n      query = getQuery(from, to, oConfig.unit);\n      oConfig.queries.push({\n        query,\n        from,\n        to\n      });\n    }\n\n    if (oConfig.names && oConfig.names.length !== oConfig.queries.length) {\n      oConfig.names = null;\n    }\n\n    querysets[oConfig.name] = oConfig;\n\n    if (support.matchmedialistener) {\n      // FF, Safari, Chrome, IE10?\n      const queries = oConfig.queries;\n      for (const q of queries) {\n        q.media = window.matchMedia(q.query);\n        q.media.addListener(oConfig.listener);\n      }\n    } else {\n      // IE, Safari (<6?)\n      window.addEventListener('resize', oConfig.listener, false);\n      window.addEventListener('orientationchange', oConfig.listener, false);\n    }\n\n    oConfig.listener();\n  }\n\n  public getCurrentRange(sName, iWidth) {\n    if (!this.hasRangeSet(sName)) {\n      return null;\n    }\n    return this.checkQueries(\n      sName,\n      true,\n      isNaN(iWidth) ? null : (from, to, unit) => matchLegacyBySize(from, to, unit, [iWidth, 0])\n    );\n  }\n\n  public hasRangeSet(sName) {\n    return sName && !!querysets[sName];\n  }\n\n  public removeRangeSet(sName) {\n    if (!this.hasRangeSet(sName)) {\n      Logger.info(`RangeSet ${sName} not found, thus could not be removed.`, 'DEVICE.MEDIA');\n      return;\n    }\n\n    for (const x in RANGESETS) {\n      if (sName === RANGESETS[x]) {\n        Logger.warning('Cannot remove default rangeset - no action taken.', 'DEVICE.MEDIA');\n        return;\n      }\n    }\n\n    const oConfig = querysets[sName];\n    if (support.matchmedialistener) {\n      // FF, Safari, Chrome, IE10?\n      const queries = oConfig.queries;\n      for (const q of queries) {\n        q.media.removeListener(oConfig.listener);\n      }\n    } else {\n      // IE, Safari (<6?)\n      window.removeEventListener('resize', oConfig.listener, false);\n      window.removeEventListener('orientationchange', oConfig.listener, false);\n    }\n\n    refreshCSSClasses(sName, '', true);\n    delete EventRegistry.mEventRegistry[`media_${sName}`];\n    delete querysets[sName];\n  }\n}\n","import { EventRegistry } from './EventRegistry';\n\nexport class Orientation {\n  public landscape: boolean;\n  public portrait: boolean;\n\n  public attachHandler(fnFunction, oListener) {\n    EventRegistry.attachEvent('orientation', fnFunction, oListener);\n  }\n\n  public detachHandler(fnFunction, oListener) {\n    EventRegistry.detachEvent('orientation', fnFunction, oListener);\n  }\n}\n","import { EventRegistry } from './EventRegistry';\nimport { windowSize } from './utils';\n\nexport class Resize {\n  public width: number;\n  public height: number;\n\n  constructor() {\n    this.setResizeInfo();\n  }\n\n  public attachHandler(fnFunction, oListener) {\n    EventRegistry.attachEvent('resize', fnFunction, oListener);\n  }\n\n  public detachHandler(fnFunction, oListener) {\n    EventRegistry.detachEvent('resize', fnFunction, oListener);\n  }\n\n  public setResizeInfo() {\n    this.width = windowSize()[0];\n    this.height = windowSize()[1];\n  }\n}\n","import { supportTouch } from '@ui5/webcomponents-base/dist/Device';\nimport '@ui5/webcomponents-react-base/third-party/modernizr';\n\ndeclare const Modernizr: {\n  pointerevents: boolean;\n  matchmedia: boolean;\n  deviceorientation: boolean;\n  websockets: boolean;\n  placeholder: boolean;\n};\n\nexport class Support {\n  public touch: boolean = supportTouch();\n  public pointer: boolean = Modernizr.pointerevents;\n  public matchmedia: boolean = Modernizr.matchmedia;\n  public matchmedialistener = !!(this.matchmedia && window.matchMedia('all and (max-width:0px)'));\n  public orientation: boolean = Modernizr.deviceorientation;\n  public retina: boolean = (window as any).retina || window.devicePixelRatio >= 2;\n  public websocket: boolean = Modernizr.websockets;\n  public input = {\n    placeholder: Modernizr.placeholder\n  };\n}\n","import { getBrowser, getOS, getSystem } from '@ui5/webcomponents-base/dist/Device';\nimport { EventRegistry } from './EventRegistry';\nimport { Media } from './Media';\nimport { Orientation } from './Orientation';\nimport { Resize } from './Resize';\nimport { Support } from './Support';\nimport { windowSize } from './utils';\n\nlet iResizeTimeout;\nlet bOrientationChange = false;\nlet bResize = false;\nlet iOrientationTimeout;\nlet iClearFlagTimeout;\nlet iWindowHeightOld = windowSize()[1];\nlet iWindowWidthOld = windowSize()[0];\nlet bKeyboardOpen = false;\nlet iLastResizeTime;\nconst rInputTagRegex = /INPUT|TEXTAREA|SELECT/;\nlet bSkipFirstResize;\n\nclass DeviceBuilder {\n  public os = getOS();\n  public browser = getBrowser();\n  public support = new Support();\n  public system = getSystem();\n  public media = new Media(this.support);\n  public orientation = new Orientation();\n  public resize = new Resize();\n\n  constructor() {\n    // On iPhone with iOS version 7.0.x and on iPad with iOS version 7.x\n    // (tested with all versions below 7.1.1), there's an invalid resize event fired\n    // when changing the orientation while keyboard is shown.\n    bSkipFirstResize =\n      this.os.ios &&\n      this.browser.name === 'sf' &&\n      ((this.system.phone && this.os.version >= 7 && this.os.version < 7.1) ||\n        (this.system.tablet && this.os.version >= 7));\n\n    // Add handler for orientationchange and resize after initialization of Device API\n    if (this.support.touch && this.support.orientation) {\n      // logic for mobile devices which support orientationchange (like ios, android)\n      window.addEventListener('resize', this.handleMobileOrientationResizeChange, false);\n      window.addEventListener('orientationchange', this.handleMobileOrientationResizeChange, false);\n    } else {\n      // desktop browsers and windows phone/tablet which not support orientationchange\n      window.addEventListener('resize', this.handleResizeEvent, false);\n    }\n    this.setOrientationInfo();\n  }\n\n  private handleResizeEvent = () => {\n    const wasL = this.orientation.landscape;\n    const isL = this.isLandscape(false);\n    if (wasL !== isL) {\n      this.handleOrientationChange();\n    }\n    // throttle resize events because most browsers throw one or more resize events per pixel\n    // for every resize event inside the period from 150ms (starting from the first resize event),\n    // we only fire one resize event after this period\n    if (!iResizeTimeout) {\n      iResizeTimeout = window.setTimeout(this.handleResizeTimeout, 150);\n    }\n  };\n\n  private handleResizeTimeout = () => {\n    this.handleResizeChange();\n    iResizeTimeout = null;\n  };\n\n  private handleResizeChange = () => {\n    this.resize.setResizeInfo();\n    EventRegistry.fireEvent('resize', {\n      height: this.resize.height,\n      width: this.resize.width\n    });\n  };\n\n  private setOrientationInfo = () => {\n    this.orientation.landscape = this.isLandscape(true);\n    this.orientation.portrait = !this.orientation.landscape;\n  };\n\n  private handleOrientationChange = () => {\n    this.setOrientationInfo();\n    EventRegistry.fireEvent('orientation', { landscape: this.orientation.landscape });\n  };\n\n  private isLandscape = (bFromOrientationChange) => {\n    if (this.support.touch && this.support.orientation && this.os.android) {\n      // if on screen keyboard is open and the call of this method is from orientation change listener,\n      // reverse the last value. this is because when keyboard opens on android device, the height can be less\n      // than the width even in portrait mode.\n      if (bKeyboardOpen && bFromOrientationChange) {\n        return !this.orientation.landscape;\n      }\n      if (bKeyboardOpen) {\n        // when keyboard opens, the last orientation change value will be returned.\n        return this.orientation.landscape;\n      }\n    } else if (this.support.matchmedia && this.support.orientation) {\n      // most desktop browsers and windows phone/tablet which not support orientationchange\n      return !!window.matchMedia('(orientation: landscape)').matches;\n    }\n    // otherwise compare the width and height of window\n    const size = windowSize();\n    return size[0] > size[1];\n  };\n\n  private handleMobileOrientationResizeChange = (evt) => {\n    if (evt.type === 'resize') {\n      if (bSkipFirstResize && rInputTagRegex.test(document.activeElement.tagName) && !bOrientationChange) {\n        return;\n      }\n\n      const iWindowHeightNew = windowSize()[1];\n      const iWindowWidthNew = windowSize()[0];\n      const iTime = new Date().getTime();\n      // skip multiple resize events by only one orientationchange\n      if (iWindowHeightNew === iWindowHeightOld && iWindowWidthNew === iWindowWidthOld) {\n        return;\n      }\n      bResize = true;\n      // on mobile devices opening the keyboard on some devices leads to a resize event\n      // in this case only the height changes, not the width\n      if (iWindowHeightOld !== iWindowHeightNew && iWindowWidthOld === iWindowWidthNew) {\n        // Asus Transformer tablet fires two resize events when orientation changes while keyboard is open.\n        // Between these two events, only the height changes. The check of if keyboard is open has to be skipped because\n        // it may be judged as keyboard closed but the keyboard is still\n        // open which will affect the orientation detection\n        if (!iLastResizeTime || iTime - iLastResizeTime > 300) {\n          bKeyboardOpen = iWindowHeightNew < iWindowHeightOld;\n        }\n        this.handleResizeChange();\n      } else {\n        iWindowWidthOld = iWindowWidthNew;\n      }\n      iLastResizeTime = iTime;\n      iWindowHeightOld = iWindowHeightNew;\n\n      if (iClearFlagTimeout) {\n        window.clearTimeout(iClearFlagTimeout);\n        iClearFlagTimeout = null;\n      }\n      // Some Android build-in browser fires a resize event after the viewport is applied.\n      // This resize event has to be dismissed otherwise when the next orientationchange event happens,\n      // a UI5 resize event will be fired with the wrong window size.\n      iClearFlagTimeout = window.setTimeout(DeviceBuilder.clearFlags, 1200);\n    } else if (evt.type === 'orientationchange') {\n      bOrientationChange = true;\n    }\n\n    if (iOrientationTimeout) {\n      clearTimeout(iOrientationTimeout);\n      iOrientationTimeout = null;\n    }\n    iOrientationTimeout = window.setTimeout(this.handleMobileTimeout, 50);\n  };\n\n  private handleMobileTimeout = () => {\n    // with ios split view, the browser fires only resize event and no orientationchange\n    // when changing the size of a split view\n    // therefore the following if needs to be adapted with additional check of iPad with version greater or equal 9\n    // (splitview was introduced with iOS 9)\n    if (bResize && (bOrientationChange || (this.system.tablet && this.os.ios && this.os.version >= 9))) {\n      this.handleOrientationChange();\n      this.handleResizeChange();\n      bOrientationChange = false;\n      bResize = false;\n      if (iClearFlagTimeout) {\n        window.clearTimeout(iClearFlagTimeout);\n        iClearFlagTimeout = null;\n      }\n    }\n    iOrientationTimeout = null;\n  };\n\n  private static clearFlags = () => {\n    bOrientationChange = false;\n    bResize = false;\n    iClearFlagTimeout = null;\n  };\n}\n\nexport const Device = new DeviceBuilder();\n"]},"metadata":{},"sourceType":"module"}