{"ast":null,"code":"import UI5Element from \"../UI5Element.js\";\nimport isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\n\nconst getFirstFocusableElement = container => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n\n  return findFocusableElement(container, true);\n};\n\nconst getLastFocusableElement = container => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n\n  return findFocusableElement(container, false);\n};\n\nconst findFocusableElement = (container, forward) => {\n  let child;\n\n  if (container.assignedNodes && container.assignedNodes()) {\n    const assignedElements = container.assignedNodes();\n    child = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n  } else {\n    child = forward ? container.firstChild : container.lastChild;\n  }\n\n  let focusableDescendant;\n\n  while (child) {\n    const originalChild = child;\n    child = child instanceof UI5Element ? child.getFocusDomRef() : child;\n\n    if (!child) {\n      return null;\n    }\n\n    if (child.nodeType === 1 && !isNodeHidden(child)) {\n      if (isNodeClickable(child)) {\n        return child && typeof child.focus === \"function\" ? child : null;\n      }\n\n      focusableDescendant = findFocusableElement(child, forward);\n\n      if (focusableDescendant) {\n        return focusableDescendant && typeof focusableDescendant.focus === \"function\" ? focusableDescendant : null;\n      }\n    }\n\n    child = forward ? originalChild.nextSibling : originalChild.previousSibling;\n  }\n\n  return null;\n};\n\nexport { getFirstFocusableElement, getLastFocusableElement };","map":{"version":3,"sources":["/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/@ui5/webcomponents-base/dist/util/FocusableElements.js"],"names":["UI5Element","isNodeHidden","isNodeClickable","getFirstFocusableElement","container","findFocusableElement","getLastFocusableElement","forward","child","assignedNodes","assignedElements","length","firstChild","lastChild","focusableDescendant","originalChild","getFocusDomRef","nodeType","focus","nextSibling","previousSibling"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,kBAAvB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,eAAP,MAA4B,sBAA5B;;AAEA,MAAMC,wBAAwB,GAAGC,SAAS,IAAI;AAC7C,MAAI,CAACA,SAAD,IAAcH,YAAY,CAACG,SAAD,CAA9B,EAA2C;AAC1C,WAAO,IAAP;AACA;;AAED,SAAOC,oBAAoB,CAACD,SAAD,EAAY,IAAZ,CAA3B;AACA,CAND;;AAQA,MAAME,uBAAuB,GAAGF,SAAS,IAAI;AAC5C,MAAI,CAACA,SAAD,IAAcH,YAAY,CAACG,SAAD,CAA9B,EAA2C;AAC1C,WAAO,IAAP;AACA;;AAED,SAAOC,oBAAoB,CAACD,SAAD,EAAY,KAAZ,CAA3B;AACA,CAND;;AAQA,MAAMC,oBAAoB,GAAG,CAACD,SAAD,EAAYG,OAAZ,KAAwB;AACpD,MAAIC,KAAJ;;AACA,MAAIJ,SAAS,CAACK,aAAV,IAA2BL,SAAS,CAACK,aAAV,EAA/B,EAA0D;AACzD,UAAMC,gBAAgB,GAAGN,SAAS,CAACK,aAAV,EAAzB;AACAD,IAAAA,KAAK,GAAGD,OAAO,GAAGG,gBAAgB,CAAC,CAAD,CAAnB,GAAyBA,gBAAgB,CAACA,gBAAgB,CAACC,MAAjB,GAA0B,CAA3B,CAAxD;AACA,GAHD,MAGO;AACNH,IAAAA,KAAK,GAAGD,OAAO,GAAGH,SAAS,CAACQ,UAAb,GAA0BR,SAAS,CAACS,SAAnD;AACA;;AAED,MAAIC,mBAAJ;;AAEA,SAAON,KAAP,EAAc;AACb,UAAMO,aAAa,GAAGP,KAAtB;AAEAA,IAAAA,KAAK,GAAGA,KAAK,YAAYR,UAAjB,GAA8BQ,KAAK,CAACQ,cAAN,EAA9B,GAAuDR,KAA/D;;AACA,QAAI,CAACA,KAAL,EAAY;AACX,aAAO,IAAP;AACA;;AAED,QAAIA,KAAK,CAACS,QAAN,KAAmB,CAAnB,IAAwB,CAAChB,YAAY,CAACO,KAAD,CAAzC,EAAkD;AACjD,UAAIN,eAAe,CAACM,KAAD,CAAnB,EAA4B;AAC3B,eAAQA,KAAK,IAAI,OAAOA,KAAK,CAACU,KAAb,KAAuB,UAAjC,GAA+CV,KAA/C,GAAuD,IAA9D;AACA;;AAEDM,MAAAA,mBAAmB,GAAGT,oBAAoB,CAACG,KAAD,EAAQD,OAAR,CAA1C;;AACA,UAAIO,mBAAJ,EAAyB;AACxB,eAAQA,mBAAmB,IAAI,OAAOA,mBAAmB,CAACI,KAA3B,KAAqC,UAA7D,GAA2EJ,mBAA3E,GAAiG,IAAxG;AACA;AACD;;AAEDN,IAAAA,KAAK,GAAGD,OAAO,GAAGQ,aAAa,CAACI,WAAjB,GAA+BJ,aAAa,CAACK,eAA5D;AACA;;AAED,SAAO,IAAP;AACA,CAlCD;;AAoCA,SACCjB,wBADD,EAECG,uBAFD","sourcesContent":["import UI5Element from \"../UI5Element.js\";\nimport isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\n\nconst getFirstFocusableElement = container => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, true);\n};\n\nconst getLastFocusableElement = container => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, false);\n};\n\nconst findFocusableElement = (container, forward) => {\n\tlet child;\n\tif (container.assignedNodes && container.assignedNodes()) {\n\t\tconst assignedElements = container.assignedNodes();\n\t\tchild = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n\t} else {\n\t\tchild = forward ? container.firstChild : container.lastChild;\n\t}\n\n\tlet focusableDescendant;\n\n\twhile (child) {\n\t\tconst originalChild = child;\n\n\t\tchild = child instanceof UI5Element ? child.getFocusDomRef() : child;\n\t\tif (!child) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (child.nodeType === 1 && !isNodeHidden(child)) {\n\t\t\tif (isNodeClickable(child)) {\n\t\t\t\treturn (child && typeof child.focus === \"function\") ? child : null;\n\t\t\t}\n\n\t\t\tfocusableDescendant = findFocusableElement(child, forward);\n\t\t\tif (focusableDescendant) {\n\t\t\t\treturn (focusableDescendant && typeof focusableDescendant.focus === \"function\") ? focusableDescendant : null;\n\t\t\t}\n\t\t}\n\n\t\tchild = forward ? originalChild.nextSibling : originalChild.previousSibling;\n\t}\n\n\treturn null;\n};\n\nexport {\n\tgetFirstFocusableElement,\n\tgetLastFocusableElement,\n};\n"]},"metadata":{},"sourceType":"module"}