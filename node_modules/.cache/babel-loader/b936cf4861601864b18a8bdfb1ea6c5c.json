{"ast":null,"code":"import { useRef, useMemo, useEffect, useState } from 'react';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { getI18nBundle, fetchI18nBundle } from '@ui5/webcomponents-base/dist/i18nBundle';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport { Device } from '@ui5/webcomponents-react-base/lib/Device';\n\nvar useConsolidatedRef = function useConsolidatedRef(ref) {\n  var localRef = useRef(null);\n  var consolidatedRef = useMemo(function () {\n    if (!ref || typeof ref === 'function') {\n      return localRef;\n    }\n\n    return ref;\n  }, [ref]);\n  useEffect(function () {\n    if (typeof ref === 'function') {\n      // @ts-ignore\n      ref(consolidatedRef.current);\n    }\n  }, [consolidatedRef.current]);\n  return consolidatedRef;\n};\n\nvar deprecationNotice = function deprecationNotice(component, message) {\n  if (process.env.NODE_ENV === 'development') {\n    var value = \"*** ui5-webcomponents-react Deprecation Notice - \".concat(component, \" ***\\n\"); // eslint-disable-next-line no-console\n\n    console.warn(\"\".concat(value).concat(message));\n  }\n};\n\nvar useDeprecateRenderMethods = function useDeprecateRenderMethods(props, renderMethodName, slotName) {\n  useEffect(function () {\n    if (props[renderMethodName]) {\n      deprecationNotice(\"\".concat(renderMethodName), \"The prop '\".concat(renderMethodName, \"' is deprecated and will be removed in the next major release.\\nPlease use '\").concat(slotName, \"' instead.\"));\n    }\n  }, []);\n  return useMemo(function () {\n    var _props$slotName;\n\n    return (_props$slotName = props[slotName]) !== null && _props$slotName !== void 0 ? _props$slotName : typeof props[renderMethodName] === 'function' ? props[renderMethodName]() : null;\n  }, [props[renderMethodName], props[slotName]]);\n};\n\nvar useI18nBundle = function useI18nBundle(bundleName) {\n  var _useState = useState(getI18nBundle(bundleName)),\n      _useState2 = _slicedToArray(_useState, 2),\n      bundle = _useState2[0],\n      setBundle = _useState2[1];\n\n  useEffect(function () {\n    var fetchAndLoadBundle = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetchI18nBundle(bundleName);\n\n              case 2:\n                setBundle(getI18nBundle(bundleName));\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchAndLoadBundle() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchAndLoadBundle();\n  }, []);\n  return bundle;\n};\n\nvar PROP_WHITELIST = /^(aria-|data-|id$|on[A-Z])/;\n\nvar usePassThroughHtmlProps = function usePassThroughHtmlProps(props) {\n  var propBlackList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var componentPropBlacklist = new Set(propBlackList);\n  var passThroughPropNames = Object.keys(props).filter(function (name) {\n    return PROP_WHITELIST.test(name) && !componentPropBlacklist.has(name);\n  });\n  return useMemo(function () {\n    return passThroughPropNames.reduce(function (acc, val) {\n      return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, val, props[val]));\n    }, {});\n  }, passThroughPropNames.map(function (name) {\n    return props[name];\n  }));\n};\n\nvar useViewportRange = function useViewportRange(rangeSet) {\n  var _useState = useState(Device.media.getCurrentRange(rangeSet, window.innerWidth).name),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentRange = _useState2[0],\n      setCurrentRange = _useState2[1];\n\n  var isMounted = useRef(true);\n  useEffect(function () {\n    var handler = function handler(_ref) {\n      var range = _ref.name;\n\n      if (isMounted.current === true) {\n        setCurrentRange(range);\n      }\n    };\n\n    Device.media.attachHandler(handler, null, 'StdExt');\n    return function () {\n      isMounted.current = false;\n      Device.resize.detachHandler(handler, null);\n    };\n  }, [setCurrentRange, isMounted]);\n  return currentRange;\n};\n\nexport { useConsolidatedRef, useDeprecateRenderMethods, useI18nBundle, usePassThroughHtmlProps, useViewportRange };","map":{"version":3,"sources":["../src/hooks/useConsolidatedRef.ts","../src/utils/index.ts","../src/hooks/useDeprecateRenderMethods.ts","../src/hooks/useI18nBundle.ts","../src/hooks/usePassThroughHtmlProps.ts","../src/hooks/useViewportRange.ts"],"names":["useConsolidatedRef","localRef","useRef","consolidatedRef","useMemo","useEffect","ref","deprecationNotice","process","value","console","useDeprecateRenderMethods","props","useI18nBundle","bundle","setBundle","useState","getI18nBundle","fetchAndLoadBundle","fetchI18nBundle","PROP_WHITELIST","usePassThroughHtmlProps","propBlackList","componentPropBlacklist","passThroughPropNames","useViewportRange","currentRange","setCurrentRange","Device","window","isMounted","handler","name","range"],"mappings":"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","sourcesContent":["import { RefObject, useEffect, useMemo, useRef } from 'react';\n\nexport const useConsolidatedRef = <T>(ref): RefObject<T> => {\n  const localRef: RefObject<T> = useRef(null);\n\n  const consolidatedRef = useMemo(() => {\n    if (!ref || typeof ref === 'function') {\n      return localRef;\n    }\n    return ref;\n  }, [ref]);\n\n  useEffect(() => {\n    if (typeof ref === 'function') {\n      // @ts-ignore\n      ref(consolidatedRef.current);\n    }\n  }, [consolidatedRef.current]);\n\n  return consolidatedRef;\n};\n","import { UIEvent } from 'react';\n\nexport const deprecationNotice = (component: string, message: string) => {\n  if (process.env.NODE_ENV === 'development') {\n    const value = `*** ui5-webcomponents-react Deprecation Notice - ${component} ***\\n`;\n    // eslint-disable-next-line no-console\n    console.warn(`${value}${message}`);\n  }\n};\n\nexport const getScrollBarWidth = () => {\n  const inner = document.createElement('p');\n  inner.style.width = '100%';\n  inner.style.height = '200px';\n\n  const outer = document.createElement('div');\n  outer.style.position = 'absolute';\n  outer.style.top = '0px';\n  outer.style.left = '0px';\n  outer.style.visibility = 'hidden';\n  outer.style.width = '200px';\n  outer.style.height = '150px';\n  outer.style.overflow = 'hidden';\n  outer.appendChild(inner);\n\n  document.body.appendChild(outer);\n  const w1 = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  let w2 = inner.offsetWidth;\n\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n\n  document.body.removeChild(outer);\n  return w1 - w2;\n};\n\nexport const polyfillDeprecatedEventAPI = (event: any) => {\n  event.getOriginalEvent = () => {\n    deprecationNotice(\n      'Event',\n      // eslint-disable-next-line max-len\n      \"'event.getOriginalEvent' is deprecated and will be removed in the next major release. Please use the event object itself instead.\"\n    );\n    return event;\n  };\n  event.getParameters = () => {\n    deprecationNotice(\n      'Event',\n      // eslint-disable-next-line max-len\n      \"'event.getParameters' is deprecated and will be removed in the next major release. Please use 'event.detail' instead.\"\n    );\n    return event.parameters;\n  };\n  event.getParameter = (parameter: keyof typeof event.detail) => {\n    deprecationNotice(\n      'Event',\n      // eslint-disable-next-line max-len\n      \"'event.getParameter' is deprecated and will be removed in the next major release. Please use 'event.detail[parameter]' instead.\"\n    );\n    return event.parameters[parameter];\n  };\n  event.getHtmlSourceElement = () => {\n    deprecationNotice(\n      'Event',\n      // eslint-disable-next-line max-len\n      \"'event.getHtmlSourceElement' is deprecated and will be removed in the next major release. Please use 'event.target' instead.\"\n    );\n    return event.target;\n  };\n\n  event.parameters = new Proxy(\n    {},\n    {\n      get: (obj, prop) => {\n        deprecationNotice(\n          'Event',\n          // eslint-disable-next-line max-len\n          \"'event.parameters' is deprecated and will be removed in the next major release. Please use 'event.detail' instead.\"\n        );\n        if (event.detail && event.detail.hasOwnProperty(prop)) {\n          return event.detail[prop];\n        }\n\n        // really dirty fallback to e.target\n        return event.target[prop];\n      }\n    }\n  );\n\n  return event;\n};\n\nexport const enrichEventWithDetails = <T = {}>(event: UIEvent, payload: T = {} as any) => {\n  if (event.hasOwnProperty('persist')) {\n    // if there is a persist method, it's an SyntheticEvent so we need to persist it\n    event.persist();\n  }\n\n  const shouldCreateNewDetails =\n    event.detail === null || event.detail === undefined || typeof event.detail !== 'object';\n  Object.defineProperty(event, 'detail', {\n    value: shouldCreateNewDetails ? {} : event.detail,\n    writable: true,\n    configurable: true\n  });\n  Object.assign(event.detail, payload);\n  // \"polyfill\" old features\n  polyfillDeprecatedEventAPI(event);\n  return (event as unknown) as CustomEvent<T>;\n};\n","import { useEffect, useMemo } from 'react';\nimport { deprecationNotice } from '../utils';\n\nexport const useDeprecateRenderMethods = (props, renderMethodName, slotName) => {\n  useEffect(() => {\n    if (props[renderMethodName]) {\n      deprecationNotice(\n        `${renderMethodName}`,\n        `The prop '${renderMethodName}' is deprecated and will be removed in the next major release.\\nPlease use '${slotName}' instead.`\n      );\n    }\n  }, []);\n\n  return useMemo(() => {\n    return props[slotName] ?? (typeof props[renderMethodName] === 'function' ? props[renderMethodName]() : null);\n  }, [props[renderMethodName], props[slotName]]);\n};\n","import { fetchI18nBundle, getI18nBundle } from '@ui5/webcomponents-base/dist/i18nBundle';\nimport { useEffect, useState } from 'react';\n\ninterface I18nBundle {\n  getText: (textObj: { key: string; defaultText: string }, ...args: any) => string;\n}\n\nexport const useI18nBundle = (bundleName): I18nBundle => {\n  const [bundle, setBundle] = useState(getI18nBundle(bundleName));\n\n  useEffect(() => {\n    const fetchAndLoadBundle = async () => {\n      await fetchI18nBundle(bundleName);\n      setBundle(getI18nBundle(bundleName));\n    };\n    fetchAndLoadBundle();\n  }, []);\n\n  return bundle;\n};\n","import { useMemo } from 'react';\n\nconst PROP_WHITELIST = /^(aria-|data-|id$|on[A-Z])/;\n\nexport const usePassThroughHtmlProps = (props, propBlackList: string[] = []) => {\n  const componentPropBlacklist = new Set(propBlackList);\n  const passThroughPropNames = Object.keys(props).filter(\n    (name) => PROP_WHITELIST.test(name) && !componentPropBlacklist.has(name)\n  );\n\n  return useMemo(\n    () => {\n      return passThroughPropNames.reduce(\n        (acc, val) => ({\n          ...acc,\n          [val]: props[val]\n        }),\n        {}\n      );\n    },\n    passThroughPropNames.map((name) => props[name])\n  );\n};\n","import { Device } from '@ui5/webcomponents-react-base/lib/Device';\nimport { useEffect, useState, useRef } from 'react';\n\nexport const useViewportRange = (rangeSet) => {\n  const [currentRange, setCurrentRange] = useState(Device.media.getCurrentRange(rangeSet, window.innerWidth).name);\n  const isMounted = useRef(true);\n\n  useEffect(() => {\n    const handler = ({ name: range }) => {\n      if (isMounted.current === true) {\n        setCurrentRange(range);\n      }\n    };\n    Device.media.attachHandler(handler, null, 'StdExt');\n    return () => {\n      isMounted.current = false;\n      Device.resize.detachHandler(handler, null);\n    };\n  }, [setCurrentRange, isMounted]);\n\n  return currentRange;\n};\n"]},"metadata":{},"sourceType":"module"}