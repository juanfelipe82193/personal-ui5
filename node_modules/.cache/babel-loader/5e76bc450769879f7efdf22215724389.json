{"ast":null,"code":"import _regeneratorRuntime from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { fetchJsonOnce } from \"../util/FetchHelper.js\";\nimport { getFeature } from \"../FeaturesRegistry.js\";\nimport { DEFAULT_LOCALE, SUPPORTED_LOCALES } from \"../generated/AssetParameters.js\";\nvar resources = new Map();\nvar cldrData = {};\nvar cldrUrls = {}; // externally configurable mapping function for resolving (localeId -> URL)\n// default implementation - ui5 CDN\n\nvar cldrMappingFn = function cldrMappingFn(locale) {\n  return \"https://ui5.sap.com/1.60.2/resources/sap/ui/core/cldr/\".concat(locale, \".json\");\n};\n\nvar M_ISO639_OLD_TO_NEW = {\n  \"iw\": \"he\",\n  \"ji\": \"yi\",\n  \"in\": \"id\",\n  \"sh\": \"sr\"\n};\n\nvar calcLocale = function calcLocale(language, region, script) {\n  // normalize language and handle special cases\n  language = language && M_ISO639_OLD_TO_NEW[language] || language; // Special case 1: in an SAP context, the inclusive language code \"no\" always means Norwegian Bokmal (\"nb\")\n\n  if (language === \"no\") {\n    language = \"nb\";\n  } // Special case 2: for Chinese, derive a default region from the script (this behavior is inherited from Java)\n\n\n  if (language === \"zh\" && !region) {\n    if (script === \"Hans\") {\n      region = \"CN\";\n    } else if (script === \"Hant\") {\n      region = \"TW\";\n    }\n  } // try language + region\n\n\n  var localeId = \"\".concat(language, \"_\").concat(region);\n\n  if (!SUPPORTED_LOCALES.includes(localeId)) {\n    // fallback to language only\n    localeId = language;\n  }\n\n  if (!SUPPORTED_LOCALES.includes(localeId)) {\n    // fallback to english\n    localeId = DEFAULT_LOCALE;\n  }\n\n  return localeId;\n};\n\nvar resolveMissingMappings = function resolveMissingMappings() {\n  if (!cldrMappingFn) {\n    return;\n  }\n\n  var missingLocales = SUPPORTED_LOCALES.filter(function (locale) {\n    return !cldrData[locale] && !cldrUrls[locale];\n  });\n  missingLocales.forEach(function (locale) {\n    cldrUrls[locale] = cldrMappingFn(locale);\n  });\n};\n\nvar registerModuleContent = function registerModuleContent(moduleName, content) {\n  resources.set(moduleName, content);\n};\n\nvar getModuleContent = function getModuleContent(moduleName) {\n  var moduleContent = resources.get(moduleName);\n\n  if (moduleContent) {\n    return moduleContent;\n  }\n\n  var missingModule = moduleName.match(/sap\\/ui\\/core\\/cldr\\/(\\w+)\\.json/);\n\n  if (missingModule) {\n    throw new Error(\"CLDR data for locale \".concat(missingModule[1], \" is not loaded!\"));\n  }\n\n  throw new Error(\"Unknown module \".concat(moduleName));\n};\n\nvar fetchCldr = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(language, region, script) {\n    var localeId, cldrObj, url, OpenUI5Support, cldrContent;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            resolveMissingMappings();\n            localeId = calcLocale(language, region, script);\n            cldrObj = cldrData[localeId];\n            url = cldrUrls[localeId];\n            OpenUI5Support = getFeature(\"OpenUI5Support\");\n\n            if (!cldrObj && OpenUI5Support) {\n              cldrObj = OpenUI5Support.getLocaleDataObject();\n            }\n\n            if (!cldrObj) {\n              _context.next = 10;\n              break;\n            }\n\n            // inlined from build or fetched independently\n            registerModuleContent(\"sap/ui/core/cldr/\".concat(localeId, \".json\"), cldrObj);\n            _context.next = 15;\n            break;\n\n          case 10:\n            if (!url) {\n              _context.next = 15;\n              break;\n            }\n\n            _context.next = 13;\n            return fetchJsonOnce(url);\n\n          case 13:\n            cldrContent = _context.sent;\n            registerModuleContent(\"sap/ui/core/cldr/\".concat(localeId, \".json\"), cldrContent);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function fetchCldr(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar registerCldr = function registerCldr(locale, url) {\n  cldrUrls[locale] = url;\n};\n\nvar setCldrData = function setCldrData(locale, data) {\n  cldrData[locale] = data;\n};\n\nvar getCldrData = function getCldrData(locale) {\n  return cldrData[locale];\n};\n\nvar _registerMappingFunction = function _registerMappingFunction(mappingFn) {\n  cldrMappingFn = mappingFn;\n};\n\nexport { fetchCldr, registerCldr, setCldrData, getCldrData, getModuleContent, _registerMappingFunction };","map":{"version":3,"sources":["/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/@ui5/webcomponents-base/dist/asset-registries/LocaleData.js"],"names":["fetchJsonOnce","getFeature","DEFAULT_LOCALE","SUPPORTED_LOCALES","resources","Map","cldrData","cldrUrls","cldrMappingFn","locale","M_ISO639_OLD_TO_NEW","calcLocale","language","region","script","localeId","includes","resolveMissingMappings","missingLocales","filter","forEach","registerModuleContent","moduleName","content","set","getModuleContent","moduleContent","get","missingModule","match","Error","fetchCldr","cldrObj","url","OpenUI5Support","getLocaleDataObject","cldrContent","registerCldr","setCldrData","data","getCldrData","_registerMappingFunction","mappingFn"],"mappings":"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","sourcesContent":["import { fetchJsonOnce } from \"../util/FetchHelper.js\";\nimport { getFeature } from \"../FeaturesRegistry.js\";\nimport { DEFAULT_LOCALE, SUPPORTED_LOCALES } from \"../generated/AssetParameters.js\";\n\nconst resources = new Map();\nconst cldrData = {};\nconst cldrUrls = {};\n\n// externally configurable mapping function for resolving (localeId -> URL)\n// default implementation - ui5 CDN\nlet cldrMappingFn = locale => `https://ui5.sap.com/1.60.2/resources/sap/ui/core/cldr/${locale}.json`;\n\nconst M_ISO639_OLD_TO_NEW = {\n\t\"iw\": \"he\",\n\t\"ji\": \"yi\",\n\t\"in\": \"id\",\n\t\"sh\": \"sr\",\n};\n\nconst calcLocale = (language, region, script) => {\n\t// normalize language and handle special cases\n\tlanguage = (language && M_ISO639_OLD_TO_NEW[language]) || language;\n\t// Special case 1: in an SAP context, the inclusive language code \"no\" always means Norwegian Bokmal (\"nb\")\n\tif (language === \"no\") {\n\t\tlanguage = \"nb\";\n\t}\n\t// Special case 2: for Chinese, derive a default region from the script (this behavior is inherited from Java)\n\tif (language === \"zh\" && !region) {\n\t\tif (script === \"Hans\") {\n\t\t\tregion = \"CN\";\n\t\t} else if (script === \"Hant\") {\n\t\t\tregion = \"TW\";\n\t\t}\n\t}\n\n\t// try language + region\n\tlet localeId = `${language}_${region}`;\n\tif (!SUPPORTED_LOCALES.includes(localeId)) {\n\t\t// fallback to language only\n\t\tlocaleId = language;\n\t}\n\tif (!SUPPORTED_LOCALES.includes(localeId)) {\n\t\t// fallback to english\n\t\tlocaleId = DEFAULT_LOCALE;\n\t}\n\n\treturn localeId;\n};\n\n\nconst resolveMissingMappings = () => {\n\tif (!cldrMappingFn) {\n\t\treturn;\n\t}\n\n\tconst missingLocales = SUPPORTED_LOCALES.filter(locale => !cldrData[locale] && !cldrUrls[locale]);\n\tmissingLocales.forEach(locale => {\n\t\tcldrUrls[locale] = cldrMappingFn(locale);\n\t});\n};\n\nconst registerModuleContent = (moduleName, content) => {\n\tresources.set(moduleName, content);\n};\n\nconst getModuleContent = moduleName => {\n\tconst moduleContent = resources.get(moduleName);\n\tif (moduleContent) {\n\t\treturn moduleContent;\n\t}\n\n\tconst missingModule = moduleName.match(/sap\\/ui\\/core\\/cldr\\/(\\w+)\\.json/);\n\tif (missingModule) {\n\t\tthrow new Error(`CLDR data for locale ${missingModule[1]} is not loaded!`);\n\t}\n\n\tthrow new Error(`Unknown module ${moduleName}`);\n};\n\nconst fetchCldr = async (language, region, script) => {\n\tresolveMissingMappings();\n\tconst localeId = calcLocale(language, region, script);\n\n\tlet cldrObj = cldrData[localeId];\n\tconst url = cldrUrls[localeId];\n\n\tconst OpenUI5Support = getFeature(\"OpenUI5Support\");\n\tif (!cldrObj && OpenUI5Support) {\n\t\tcldrObj = OpenUI5Support.getLocaleDataObject();\n\t}\n\n\tif (cldrObj) {\n\t\t// inlined from build or fetched independently\n\t\tregisterModuleContent(`sap/ui/core/cldr/${localeId}.json`, cldrObj);\n\t} else if (url) {\n\t\t// fetch it\n\t\tconst cldrContent = await fetchJsonOnce(url);\n\t\tregisterModuleContent(`sap/ui/core/cldr/${localeId}.json`, cldrContent);\n\t}\n};\n\nconst registerCldr = (locale, url) => {\n\tcldrUrls[locale] = url;\n};\n\nconst setCldrData = (locale, data) => {\n\tcldrData[locale] = data;\n};\n\nconst getCldrData = locale => {\n\treturn cldrData[locale];\n};\n\nconst _registerMappingFunction = mappingFn => {\n\tcldrMappingFn = mappingFn;\n};\n\nexport {\n\tfetchCldr,\n\tregisterCldr,\n\tsetCldrData,\n\tgetCldrData,\n\tgetModuleContent,\n\t_registerMappingFunction,\n};\n"]},"metadata":{},"sourceType":"module"}