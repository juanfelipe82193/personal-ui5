{"ast":null,"code":"import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport { isShow, isDown, isBackSpace, isSpace } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/slim-arrow-down.js\";\nimport { getRTL } from \"@ui5/webcomponents-base/dist/config/RTL.js\";\nimport { isIE, isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/multiselect-all.js\";\nimport MultiComboBoxItem from \"./MultiComboBoxItem.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport { VALUE_STATE_SUCCESS, VALUE_STATE_ERROR, VALUE_STATE_WARNING, TOKENIZER_ARIA_CONTAIN_TOKEN, TOKENIZER_ARIA_CONTAIN_ONE_TOKEN, TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, INPUT_SUGGESTIONS_TITLE } from \"./generated/i18n/i18n-defaults.js\"; // Templates\n\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\nimport MultiComboBoxPopoverTemplate from \"./generated/templates/MultiComboBoxPopoverTemplate.lit.js\"; // Styles\n\nimport styles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\n/**\n * @public\n */\n\nconst metadata = {\n  tag: \"ui5-multi-combobox\",\n  managedSlots: true,\n  slots:\n  /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */\n  {\n    /**\n     * Defines the <code>ui5-multi-combobox</code> items.\n     * <br><br>\n     * Example: <br>\n     * &lt;ui5-multi-combobox><br>\n     * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #1&lt;/ui5-li><br>\n     * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #2&lt;/ui5-li><br>\n     * &lt;/ui5-multi-combobox>\n     * <br> <br>\n     *\n     * @type {HTMLElement[]}\n     * @slot\n     * @public\n     */\n    \"default\": {\n      propertyName: \"items\",\n      type: HTMLElement,\n      listenFor: {\n        include: [\"*\"]\n      }\n    }\n  },\n  properties:\n  /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */\n  {\n    /**\n     * Defines the value of the <code>ui5-multi-combobox</code>.\n     * <br><br>\n     * <b>Note:</b> The property is updated upon typing.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    value: {\n      type: String,\n      defaultValue: \"\"\n    },\n\n    /**\n     * Defines a short hint intended to aid the user with data entry when the\n     * <code>ui5-multi-combobox</code> has no value.\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    placeholder: {\n      type: String,\n      defaultValue: \"\"\n    },\n\n    /**\n     * Defines if the user input will be prevented, if no matching item has been found\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    allowCustomValues: {\n      type: Boolean\n    },\n\n    /**\n     * Defines whether <code>ui5-multi-combobox</code> is in disabled state.\n     * <br><br>\n     * <b>Note:</b> A disabled <code>ui5-multi-combobox</code> is completely noninteractive.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    disabled: {\n      type: Boolean\n    },\n\n    /**\n     * Defines the value state of the <code>ui5-multi-combobox</code>.\n     * <br><br>\n     * Available options are:\n     * <ul>\n     * <li><code>None</code></li>\n     * <li><code>Error</code></li>\n     * <li><code>Warning</code></li>\n     * <li><code>Success</code></li>\n     * <li><code>Information</code></li>\n     * </ul>\n     *\n     * @type {ValueState}\n     * @defaultvalue \"None\"\n     * @public\n     */\n    valueState: {\n      type: ValueState,\n      defaultValue: ValueState.None\n    },\n\n    /**\n     * Defines whether the <code>ui5-multi-combobox</code> is read-only.\n     * <br><br>\n     * <b>Note:</b> A read-only <code>ui5-multi-combobox</code> is not editable,\n     * but still provides visual feedback upon user interaction.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    readonly: {\n      type: Boolean\n    },\n\n    /**\n     * Defines whether the <code>ui5-multi-combobox</code> is required.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     * @since 1.0.0-rc.5\n     */\n    required: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @since 1.0.0-rc.5\n     * @public\n     */\n    open: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates whether the input is focssed\n     * @private\n     */\n    focused: {\n      type: Boolean\n    },\n    _filteredItems: {\n      type: Object\n    },\n    _iconPressed: {\n      type: Boolean,\n      noAttribute: true\n    },\n\n    /**\n     * Indicates whether the tokenizer is expanded or collapsed(shows the n more label)\n     * @private\n     */\n    expandedTokenizer: {\n      type: Boolean\n    }\n  },\n  events:\n  /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */\n  {\n    /**\n     * Fired when the input operation has finished by pressing Enter or on focusout.\n     *\n     * @event\n     * @public\n     */\n    change: {},\n\n    /**\n     * Fired when the value of the <code>ui5-multi-combobox</code> changes at each keystroke.\n     *\n     * @event\n     * @public\n     */\n    input: {},\n\n    /**\n     * Fired when the dropdown is opened or closed.\n     *\n     * @event\n     * @since 1.0.0-rc.5\n     * @public\n     */\n    openChange: {},\n\n    /**\n     * Fired when selection is changed by user interaction\n     * in <code>SingleSelect</code> and <code>MultiSelect</code> modes.\n     *\n     * @event\n     * @param {Array} items an array of the selected items.\n     * @public\n     */\n    selectionChange: {\n      detail: {\n        items: {\n          type: Array\n        }\n      }\n    }\n  }\n};\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-multi-combobox</code> component provides a list box with items and a text field allowing the user to either type a value directly into the control, or choose from the list of existing items.\n *\n * It is a drop-down list for selecting and filtering values, commonly used to enable users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow of available options.\n * The select options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * <h3>Structure</h3>\n * The <code>ui5-multi-combobox</code> consists of the following elements:\n * <ul>\n * <li> Tokenizer - a list of tokens with selected options.\n * <li> Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-multi-combobox</code> provides advanced keyboard handling.\n *\n * <h4>Picker</h4>\n * If the <code>ui5-multi-combobox</code> is focused,\n * you can open or close the drop-down by pressing <code>F4</code>, <code>ALT+UP</code> or <code>ALT+DOWN</code> keys.\n * Once the drop-down is opened, you can use the <code>UP</code> and <code>DOWN</code> arrow keys\n * to navigate through the available options and select one by pressing the <code>Space</code> or <code>Enter</code> keys.\n * <br>\n *\n * <h4>Tokens</h4>\n * <ul>\n * <li> Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available). </li>\n * <li> Delete -  deletes the token and focuses the previous token. </li>\n * <li> Backspace -  deletes the token and focus the next token. </li>\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiComboBox\n * @extends UI5Element\n * @tagname ui5-multi-combobox\n * @public\n * @appenddocs MultiComboBoxItem\n * @since 0.11.0\n */\n\nclass MultiComboBox extends UI5Element {\n  static get metadata() {\n    return metadata;\n  }\n\n  static get render() {\n    return litRender;\n  }\n\n  static get template() {\n    return MultiComboBoxTemplate;\n  }\n\n  static get staticAreaTemplate() {\n    return MultiComboBoxPopoverTemplate;\n  }\n\n  static get styles() {\n    return styles;\n  }\n\n  static get staticAreaStyles() {\n    return ResponsivePopoverCommonCss;\n  }\n\n  constructor() {\n    super();\n    this._filteredItems = [];\n    this._inputLastValue = \"\";\n    this._deleting = false;\n    this._validationTimeout = null;\n    this._selectedItemsPopoverOpened = false;\n    this.i18nBundle = getI18nBundle(\"@ui5/webcomponents\");\n  }\n\n  _inputChange() {\n    this.fireEvent(\"change\");\n  }\n\n  _showMorePopover() {\n    if (this.readonly) {\n      return;\n    }\n\n    this._showMorePressed = true;\n    this._selectedItemsPopoverOpened = true;\n\n    this._toggleRespPopover(true);\n  }\n\n  _showAllItemsPopover() {\n    this._selectedItemsPopoverOpened = false;\n\n    this._toggleRespPopover(false);\n\n    this._inputDom.focus();\n  }\n\n  _closeMorePopover() {\n    this.selectedItemsPopover.close();\n  }\n\n  _closeAllItemsPopover() {\n    this.allItemsPopover.close();\n  }\n\n  get _inputDom() {\n    return this.shadowRoot.querySelector(\"#ui5-multi-combobox-input\");\n  }\n\n  _inputLiveChange(event) {\n    const input = event.target;\n    const value = input.value;\n\n    const filteredItems = this._filterItems(value);\n\n    const oldValueState = this.valueState;\n    /* skip calling change event when an input with a placeholder is focused on IE\n    \t- value of the host and the internal input should be differnt in case of actual input\n    \t- input is called when a key is pressed => keyup should not be called yet\n    */\n\n    const skipFiring = this._inputDom.value === this.value && isIE && !this._keyDown && !!this.placeholder;\n\n    if (skipFiring) {\n      event.preventDefault();\n      return;\n    }\n\n    if (this._validationTimeout) {\n      input.value = this._inputLastValue;\n      return;\n    }\n\n    if (!filteredItems.length && value && !this.allowCustomValues) {\n      input.value = this._inputLastValue;\n      this.valueState = \"Error\";\n      this._validationTimeout = setTimeout(() => {\n        this.valueState = oldValueState;\n        this._validationTimeout = null;\n      }, 2000);\n      return;\n    }\n\n    this._inputLastValue = input.value;\n    this.value = input.value;\n    this._filteredItems = filteredItems;\n\n    if (!isPhone()) {\n      if (filteredItems.length === 0) {\n        this.allItemsPopover.close();\n      } else {\n        this.updateStaticAreaItemContentDensity();\n        this.allItemsPopover.open(this);\n      }\n    }\n\n    this.fireEvent(\"input\");\n  }\n\n  _tokenDelete(event) {\n    const token = event.detail.ref;\n    const deletingItem = this.items.find(item => item._id === token.getAttribute(\"data-ui5-id\"));\n    deletingItem.selected = false;\n    this._deleting = true;\n    this.fireSelectionChange();\n  }\n\n  _tokenizerFocusOut() {\n    const tokenizer = this.shadowRoot.querySelector(\"ui5-tokenizer\");\n    const tokensCount = tokenizer.tokens.length - 1;\n    tokenizer.tokens.forEach(token => {\n      token.selected = false;\n    });\n    this._tokenizer.contentDom.scrollLeft = 0;\n\n    if (tokensCount === 0 && this._deleting) {\n      setTimeout(() => {\n        this.shadowRoot.querySelector(\"input\").focus();\n        this._deleting = false;\n      }, 0);\n    }\n  }\n\n  _onkeyup() {\n    this._keyDown = false;\n  }\n\n  async _onkeydown(event) {\n    if (isShow(event) && !this.readonly && !this.disabled) {\n      event.preventDefault();\n\n      this._toggleRespPopover();\n    }\n\n    if (isDown(event) && this.allItemsPopover.opened && this.items.length) {\n      event.preventDefault();\n      await this._getList();\n      this.list._itemNavigation.current = 0;\n      this.list.items[0].focus();\n    }\n\n    if (isBackSpace(event) && event.target.value === \"\") {\n      event.preventDefault();\n      const lastTokenIndex = this._tokenizer.tokens.length - 1;\n\n      if (lastTokenIndex < 0) {\n        return;\n      }\n\n      this._tokenizer.tokens[lastTokenIndex].focus();\n\n      this._tokenizer._itemNav.currentIndex = lastTokenIndex;\n    }\n\n    this._keyDown = true;\n  }\n\n  _filterItems(value) {\n    return this.items.filter(item => {\n      return item.text && item.text.toLowerCase().startsWith(value.toLowerCase());\n    });\n  }\n\n  _toggleIcon() {\n    this._iconPressed = !this._iconPressed;\n    this.open = this._iconPressed;\n    this.fireEvent(\"openChange\");\n\n    if (!this._iconPressed) {\n      this._afterClosePopover();\n    }\n  }\n\n  _setInitialFocusInResponsivePopover() {\n    this._innerInput.focus();\n  }\n\n  _onAllItemsPopoverAfterOpen() {\n    this._setInitialFocusInResponsivePopover();\n\n    this._toggleIcon();\n  }\n\n  _getSelectedItems() {\n    // Angular 2 way data binding\n    this.selectedValues = this.items.filter(item => item.selected);\n    return this.selectedValues;\n  }\n\n  _listSelectionChange(event) {\n    event.target.items.forEach(item => {\n      this.items.forEach(mcbItem => {\n        if (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n          mcbItem.selected = item.selected;\n        }\n      });\n    });\n    this.fireSelectionChange();\n\n    if (!event.detail.selectionComponentPressed && !isSpace(event.detail)) {\n      this.allItemsPopover.close();\n      this.value = \"\";\n      this.fireEvent(\"input\");\n    }\n  }\n\n  fireSelectionChange() {\n    this.fireEvent(\"selectionChange\", {\n      items: this._getSelectedItems()\n    }); // Angular 2 way data binding\n\n    this.fireEvent(\"value-changed\");\n  }\n\n  async _getRespPopover() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    this.selectedItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-selected-items-responsive-popover`);\n    this.allItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-all-items-responsive-popover`);\n  }\n\n  async _getList() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    this.list = staticAreaItem.querySelector(\".ui5-multi-combobox-all-items-list\");\n  }\n\n  _toggleRespPopover(isMorePopover) {\n    this.updateStaticAreaItemContentDensity();\n\n    if (isMorePopover) {\n      this.allItemsPopover.close();\n      return this.selectedItemsPopover.open(this);\n    }\n\n    if (this.allItemsPopover && this.allItemsPopover.opened) {\n      return this.allItemsPopover.close();\n    }\n\n    this.selectedItemsPopover && this.selectedItemsPopover.close();\n    this.allItemsPopover && this.allItemsPopover.open(this);\n  }\n\n  _focusin() {\n    this.focused = true;\n  }\n\n  _focusout() {\n    this.focused = false;\n  }\n\n  _click(event) {\n    if (isPhone() && !this.readonly && !this._showMorePressed) {\n      this.updateStaticAreaItemContentDensity();\n      this.allItemsPopover.open(this);\n    }\n\n    this._showMorePressed = false;\n  }\n\n  _afterClosePopover() {\n    // close device's keyboard and prevent further typing\n    if (isPhone()) {\n      this.blur();\n    }\n  }\n\n  _toggleButtonPress(event) {\n    const showSelectedItems = event.target.hasAttribute(\"show-selected\");\n\n    if (showSelectedItems) {\n      this.allItemsPopover.close();\n      this.selectedItemsPopover.open(this);\n    } else {\n      this.selectedItemsPopover.close();\n      this.allItemsPopover.open(this);\n    } // always keep the toggle-button pressed\n\n\n    event.target.pressed = true;\n  }\n\n  onBeforeRendering() {\n    this._inputLastValue = this.value;\n    const hasSelectedItem = this.items.some(item => item.selected);\n\n    if (this.getDomRef() && !hasSelectedItem) {\n      const morePopover = this.selectedItemsPopover;\n      morePopover && morePopover.close();\n    }\n\n    const input = this.shadowRoot.querySelector(\"input\");\n\n    if (input && !input.value) {\n      this._filteredItems = this.items;\n    }\n\n    const filteredItems = this._filterItems(this.value);\n\n    this._filteredItems = filteredItems;\n  }\n\n  async onAfterRendering() {\n    await this._getRespPopover();\n\n    if (this.open && !this.allItemsPopover.opened) {\n      this.updateStaticAreaItemContentDensity();\n      this.allItemsPopover.open(this); // Set initial focus to the native input\n\n      this._innerInput.focus();\n    }\n  }\n\n  get valueStateTextMappings() {\n    return {\n      \"Success\": this.i18nBundle.getText(VALUE_STATE_SUCCESS),\n      \"Error\": this.i18nBundle.getText(VALUE_STATE_ERROR),\n      \"Warning\": this.i18nBundle.getText(VALUE_STATE_WARNING)\n    };\n  }\n\n  get _tokenizer() {\n    return this.shadowRoot.querySelector(\"ui5-tokenizer\");\n  }\n\n  get nMoreCountText() {\n    const iTokenCount = this._getSelectedItems().length;\n\n    if (iTokenCount === 0) {\n      return this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_TOKEN);\n    }\n\n    if (iTokenCount === 1) {\n      return this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_ONE_TOKEN);\n    }\n\n    return this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n  }\n\n  rootFocusIn() {\n    this.expandedTokenizer = true;\n  }\n\n  rootFocusOut(event) {\n    if (!this.shadowRoot.contains(event.relatedTarget) && !this._deleting) {\n      this.expandedTokenizer = false;\n    }\n  }\n\n  get editable() {\n    return !this.readonly;\n  }\n\n  get dir() {\n    return getRTL() ? \"rtl\" : \"ltr\";\n  }\n\n  get selectedItemsListMode() {\n    return this.readonly ? \"None\" : \"MultiSelect\";\n  }\n\n  get hasValueState() {\n    return this.valueState !== ValueState.None;\n  }\n\n  get valueStateText() {\n    return this.valueStateTextMappings[this.valueState];\n  }\n\n  get _innerInput() {\n    if (isPhone()) {\n      if (this.allItemsPopover.opened) {\n        return this.allItemsPopover.querySelector(\"input\");\n      }\n\n      return this.selectedItemsPopover.querySelector(\"input\");\n    }\n\n    return this.getDomRef().querySelector(\"#ui5-multi-combobox-input\");\n  }\n\n  get _headerTitleText() {\n    return this.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n  }\n\n  static async onDefine() {\n    await Promise.all([MultiComboBoxItem.define(), Tokenizer.define(), Token.define(), Icon.define(), ResponsivePopover.define(), List.define(), StandardListItem.define(), ToggleButton, fetchI18nBundle(\"@ui5/webcomponents\")]);\n  }\n\n}\n\nMultiComboBox.define();\nexport default MultiComboBox;","map":{"version":3,"sources":["/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/@ui5/webcomponents/dist/MultiComboBox.js"],"names":["UI5Element","litRender","ValueState","isShow","isDown","isBackSpace","isSpace","getRTL","isIE","isPhone","fetchI18nBundle","getI18nBundle","MultiComboBoxItem","Tokenizer","Token","Icon","ResponsivePopover","List","StandardListItem","ToggleButton","VALUE_STATE_SUCCESS","VALUE_STATE_ERROR","VALUE_STATE_WARNING","TOKENIZER_ARIA_CONTAIN_TOKEN","TOKENIZER_ARIA_CONTAIN_ONE_TOKEN","TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS","INPUT_SUGGESTIONS_TITLE","MultiComboBoxTemplate","MultiComboBoxPopoverTemplate","styles","ResponsivePopoverCommonCss","metadata","tag","managedSlots","slots","propertyName","type","HTMLElement","listenFor","include","properties","value","String","defaultValue","placeholder","allowCustomValues","Boolean","disabled","valueState","None","readonly","required","open","focused","_filteredItems","Object","_iconPressed","noAttribute","expandedTokenizer","events","change","input","openChange","selectionChange","detail","items","Array","MultiComboBox","render","template","staticAreaTemplate","staticAreaStyles","constructor","_inputLastValue","_deleting","_validationTimeout","_selectedItemsPopoverOpened","i18nBundle","_inputChange","fireEvent","_showMorePopover","_showMorePressed","_toggleRespPopover","_showAllItemsPopover","_inputDom","focus","_closeMorePopover","selectedItemsPopover","close","_closeAllItemsPopover","allItemsPopover","shadowRoot","querySelector","_inputLiveChange","event","target","filteredItems","_filterItems","oldValueState","skipFiring","_keyDown","preventDefault","length","setTimeout","updateStaticAreaItemContentDensity","_tokenDelete","token","ref","deletingItem","find","item","_id","getAttribute","selected","fireSelectionChange","_tokenizerFocusOut","tokenizer","tokensCount","tokens","forEach","_tokenizer","contentDom","scrollLeft","_onkeyup","_onkeydown","opened","_getList","list","_itemNavigation","current","lastTokenIndex","_itemNav","currentIndex","filter","text","toLowerCase","startsWith","_toggleIcon","_afterClosePopover","_setInitialFocusInResponsivePopover","_innerInput","_onAllItemsPopoverAfterOpen","_getSelectedItems","selectedValues","_listSelectionChange","mcbItem","selectionComponentPressed","_getRespPopover","staticAreaItem","getStaticAreaItemDomRef","isMorePopover","_focusin","_focusout","_click","blur","_toggleButtonPress","showSelectedItems","hasAttribute","pressed","onBeforeRendering","hasSelectedItem","some","getDomRef","morePopover","onAfterRendering","valueStateTextMappings","getText","nMoreCountText","iTokenCount","rootFocusIn","rootFocusOut","contains","relatedTarget","editable","dir","selectedItemsListMode","hasValueState","valueStateText","_headerTitleText","onDefine","Promise","all","define"],"mappings":"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","sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport {\n\tisShow, isDown, isBackSpace, isSpace,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/slim-arrow-down.js\";\nimport { getRTL } from \"@ui5/webcomponents-base/dist/config/RTL.js\";\nimport { isIE, isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/multiselect-all.js\";\nimport MultiComboBoxItem from \"./MultiComboBoxItem.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport {\n\tVALUE_STATE_SUCCESS,\n\tVALUE_STATE_ERROR,\n\tVALUE_STATE_WARNING,\n\tTOKENIZER_ARIA_CONTAIN_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_ONE_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS,\n\tINPUT_SUGGESTIONS_TITLE,\n} from \"./generated/i18n/i18n-defaults.js\";\n\n// Templates\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\nimport MultiComboBoxPopoverTemplate from \"./generated/templates/MultiComboBoxPopoverTemplate.lit.js\";\n\n// Styles\nimport styles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-multi-combobox\",\n\tmanagedSlots: true,\n\tslots: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the <code>ui5-multi-combobox</code> items.\n\t\t * <br><br>\n\t\t * Example: <br>\n\t\t * &lt;ui5-multi-combobox><br>\n\t\t * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #1&lt;/ui5-li><br>\n\t\t * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #2&lt;/ui5-li><br>\n\t\t * &lt;/ui5-multi-combobox>\n\t\t * <br> <br>\n\t\t *\n\t\t * @type {HTMLElement[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\tpropertyName: \"items\",\n\t\t\ttype: HTMLElement,\n\t\t\tlistenFor: { include: [\"*\"] },\n\t\t},\n\t},\n\tproperties: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the value of the <code>ui5-multi-combobox</code>.\n\t\t * <br><br>\n\t\t * <b>Note:</b> The property is updated upon typing.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines a short hint intended to aid the user with data entry when the\n\t\t * <code>ui5-multi-combobox</code> has no value.\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines if the user input will be prevented, if no matching item has been found\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tallowCustomValues: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether <code>ui5-multi-combobox</code> is in disabled state.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A disabled <code>ui5-multi-combobox</code> is completely noninteractive.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the value state of the <code>ui5-multi-combobox</code>.\n\t\t * <br><br>\n\t\t * Available options are:\n\t\t * <ul>\n\t\t * <li><code>None</code></li>\n\t\t * <li><code>Error</code></li>\n\t\t * <li><code>Warning</code></li>\n\t\t * <li><code>Success</code></li>\n\t\t * <li><code>Information</code></li>\n\t\t * </ul>\n\t\t *\n\t\t * @type {ValueState}\n\t\t * @defaultvalue \"None\"\n\t\t * @public\n\t\t */\n\t\tvalueState: {\n\t\t\ttype: ValueState,\n\t\t\tdefaultValue: ValueState.None,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the <code>ui5-multi-combobox</code> is read-only.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A read-only <code>ui5-multi-combobox</code> is not editable,\n\t\t * but still provides visual feedback upon user interaction.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the <code>ui5-multi-combobox</code> is required.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t * @since 1.0.0-rc.5\n\t\t */\n\t\trequired: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @since 1.0.0-rc.5\n\t\t * @public\n\t\t */\n\t\topen: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the input is focssed\n\t\t * @private\n\t\t */\n\t\tfocused: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_filteredItems: {\n\t\t\ttype: Object,\n\t\t},\n\n\t\t_iconPressed: {\n\t\t\ttype: Boolean,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the tokenizer is expanded or collapsed(shows the n more label)\n\t\t * @private\n\t\t */\n\t\texpandedTokenizer: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tevents: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Fired when the input operation has finished by pressing Enter or on focusout.\n\t\t *\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tchange: {},\n\n\t\t/**\n\t\t * Fired when the value of the <code>ui5-multi-combobox</code> changes at each keystroke.\n\t\t *\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tinput: {},\n\n\t\t/**\n\t\t * Fired when the dropdown is opened or closed.\n\t\t *\n\t\t * @event\n\t\t * @since 1.0.0-rc.5\n\t\t * @public\n\t\t */\n\t\topenChange: {},\n\n\t\t/**\n\t\t * Fired when selection is changed by user interaction\n\t\t * in <code>SingleSelect</code> and <code>MultiSelect</code> modes.\n\t\t *\n\t\t * @event\n\t\t * @param {Array} items an array of the selected items.\n\t\t * @public\n\t\t */\n\t\tselectionChange: {\n\t\t\tdetail: {\n\t\t\t\titems: { type: Array },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-multi-combobox</code> component provides a list box with items and a text field allowing the user to either type a value directly into the control, or choose from the list of existing items.\n *\n * It is a drop-down list for selecting and filtering values, commonly used to enable users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow of available options.\n * The select options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * <h3>Structure</h3>\n * The <code>ui5-multi-combobox</code> consists of the following elements:\n * <ul>\n * <li> Tokenizer - a list of tokens with selected options.\n * <li> Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-multi-combobox</code> provides advanced keyboard handling.\n *\n * <h4>Picker</h4>\n * If the <code>ui5-multi-combobox</code> is focused,\n * you can open or close the drop-down by pressing <code>F4</code>, <code>ALT+UP</code> or <code>ALT+DOWN</code> keys.\n * Once the drop-down is opened, you can use the <code>UP</code> and <code>DOWN</code> arrow keys\n * to navigate through the available options and select one by pressing the <code>Space</code> or <code>Enter</code> keys.\n * <br>\n *\n * <h4>Tokens</h4>\n * <ul>\n * <li> Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available). </li>\n * <li> Delete -  deletes the token and focuses the previous token. </li>\n * <li> Backspace -  deletes the token and focus the next token. </li>\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiComboBox\n * @extends UI5Element\n * @tagname ui5-multi-combobox\n * @public\n * @appenddocs MultiComboBoxItem\n * @since 0.11.0\n */\nclass MultiComboBox extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn MultiComboBoxTemplate;\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn MultiComboBoxPopoverTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn ResponsivePopoverCommonCss;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._filteredItems = [];\n\t\tthis._inputLastValue = \"\";\n\t\tthis._deleting = false;\n\t\tthis._validationTimeout = null;\n\t\tthis._selectedItemsPopoverOpened = false;\n\t\tthis.i18nBundle = getI18nBundle(\"@ui5/webcomponents\");\n\t}\n\n\t_inputChange() {\n\t\tthis.fireEvent(\"change\");\n\t}\n\n\t_showMorePopover() {\n\t\tif (this.readonly) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._showMorePressed = true;\n\t\tthis._selectedItemsPopoverOpened = true;\n\t\tthis._toggleRespPopover(true);\n\t}\n\n\t_showAllItemsPopover() {\n\t\tthis._selectedItemsPopoverOpened = false;\n\t\tthis._toggleRespPopover(false);\n\n\t\tthis._inputDom.focus();\n\t}\n\n\t_closeMorePopover() {\n\t\tthis.selectedItemsPopover.close();\n\t}\n\n\t_closeAllItemsPopover() {\n\t\tthis.allItemsPopover.close();\n\t}\n\n\tget _inputDom() {\n\t\treturn this.shadowRoot.querySelector(\"#ui5-multi-combobox-input\");\n\t}\n\n\t_inputLiveChange(event) {\n\t\tconst input = event.target;\n\t\tconst value = input.value;\n\t\tconst filteredItems = this._filterItems(value);\n\t\tconst oldValueState = this.valueState;\n\n\t\t/* skip calling change event when an input with a placeholder is focused on IE\n\t\t\t- value of the host and the internal input should be differnt in case of actual input\n\t\t\t- input is called when a key is pressed => keyup should not be called yet\n\t\t*/\n\t\tconst skipFiring = (this._inputDom.value === this.value) && isIE && !this._keyDown && !!this.placeholder;\n\n\t\tif (skipFiring) {\n\t\t\tevent.preventDefault();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._validationTimeout) {\n\t\t\tinput.value = this._inputLastValue;\n\t\t\treturn;\n\t\t}\n\n\t\tif (!filteredItems.length && value && !this.allowCustomValues) {\n\t\t\tinput.value = this._inputLastValue;\n\t\t\tthis.valueState = \"Error\";\n\n\t\t\tthis._validationTimeout = setTimeout(() => {\n\t\t\t\tthis.valueState = oldValueState;\n\t\t\t\tthis._validationTimeout = null;\n\t\t\t}, 2000);\n\n\t\t\treturn;\n\t\t}\n\n\n\t\tthis._inputLastValue = input.value;\n\t\tthis.value = input.value;\n\t\tthis._filteredItems = filteredItems;\n\n\t\tif (!isPhone()) {\n\t\t\tif (filteredItems.length === 0) {\n\t\t\t\tthis.allItemsPopover.close();\n\t\t\t} else {\n\t\t\t\tthis.updateStaticAreaItemContentDensity();\n\t\t\t\tthis.allItemsPopover.open(this);\n\t\t\t}\n\t\t}\n\n\t\tthis.fireEvent(\"input\");\n\t}\n\n\t_tokenDelete(event) {\n\t\tconst token = event.detail.ref;\n\t\tconst deletingItem = this.items.find(item => item._id === token.getAttribute(\"data-ui5-id\"));\n\n\t\tdeletingItem.selected = false;\n\t\tthis._deleting = true;\n\n\t\tthis.fireSelectionChange();\n\t}\n\n\t_tokenizerFocusOut() {\n\t\tconst tokenizer = this.shadowRoot.querySelector(\"ui5-tokenizer\");\n\t\tconst tokensCount = tokenizer.tokens.length - 1;\n\n\t\ttokenizer.tokens.forEach(token => { token.selected = false; });\n\n\t\tthis._tokenizer.contentDom.scrollLeft = 0;\n\n\t\tif (tokensCount === 0 && this._deleting) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.shadowRoot.querySelector(\"input\").focus();\n\t\t\t\tthis._deleting = false;\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_onkeyup() {\n\t\tthis._keyDown = false;\n\t}\n\n\tasync _onkeydown(event) {\n\t\tif (isShow(event) && !this.readonly && !this.disabled) {\n\t\t\tevent.preventDefault();\n\t\t\tthis._toggleRespPopover();\n\t\t}\n\n\t\tif (isDown(event) && this.allItemsPopover.opened && this.items.length) {\n\t\t\tevent.preventDefault();\n\t\t\tawait this._getList();\n\t\t\tthis.list._itemNavigation.current = 0;\n\t\t\tthis.list.items[0].focus();\n\t\t}\n\n\t\tif (isBackSpace(event) && event.target.value === \"\") {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst lastTokenIndex = this._tokenizer.tokens.length - 1;\n\n\t\t\tif (lastTokenIndex < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._tokenizer.tokens[lastTokenIndex].focus();\n\t\t\tthis._tokenizer._itemNav.currentIndex = lastTokenIndex;\n\t\t}\n\n\t\tthis._keyDown = true;\n\t}\n\n\t_filterItems(value) {\n\t\treturn this.items.filter(item => {\n\t\t\treturn item.text && item.text.toLowerCase().startsWith(value.toLowerCase());\n\t\t});\n\t}\n\n\t_toggleIcon() {\n\t\tthis._iconPressed = !this._iconPressed;\n\t\tthis.open = this._iconPressed;\n\n\t\tthis.fireEvent(\"openChange\");\n\n\t\tif (!this._iconPressed) {\n\t\t\tthis._afterClosePopover();\n\t\t}\n\t}\n\n\t_setInitialFocusInResponsivePopover() {\n\t\tthis._innerInput.focus();\n\t}\n\n\t_onAllItemsPopoverAfterOpen() {\n\t\tthis._setInitialFocusInResponsivePopover();\n\t\tthis._toggleIcon();\n\t}\n\n\t_getSelectedItems() {\n\t\t// Angular 2 way data binding\n\t\tthis.selectedValues = this.items.filter(item => item.selected);\n\t\treturn this.selectedValues;\n\t}\n\n\t_listSelectionChange(event) {\n\t\tevent.target.items.forEach(item => {\n\t\t\tthis.items.forEach(mcbItem => {\n\t\t\t\tif (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n\t\t\t\t\tmcbItem.selected = item.selected;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.fireSelectionChange();\n\n\t\tif (!event.detail.selectionComponentPressed && !isSpace(event.detail)) {\n\t\t\tthis.allItemsPopover.close();\n\t\t\tthis.value = \"\";\n\t\t\tthis.fireEvent(\"input\");\n\t\t}\n\t}\n\n\tfireSelectionChange() {\n\t\tthis.fireEvent(\"selectionChange\", { items: this._getSelectedItems() });\n\t\t// Angular 2 way data binding\n\t\tthis.fireEvent(\"value-changed\");\n\t}\n\n\tasync _getRespPopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\tthis.selectedItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-selected-items-responsive-popover`);\n\t\tthis.allItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-all-items-responsive-popover`);\n\t}\n\n\tasync _getList() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\tthis.list = staticAreaItem.querySelector(\".ui5-multi-combobox-all-items-list\");\n\t}\n\n\t_toggleRespPopover(isMorePopover) {\n\t\tthis.updateStaticAreaItemContentDensity();\n\n\t\tif (isMorePopover) {\n\t\t\tthis.allItemsPopover.close();\n\t\t\treturn this.selectedItemsPopover.open(this);\n\t\t}\n\n\t\tif (this.allItemsPopover && this.allItemsPopover.opened) {\n\t\t\treturn this.allItemsPopover.close();\n\t\t}\n\n\t\tthis.selectedItemsPopover && this.selectedItemsPopover.close();\n\n\t\tthis.allItemsPopover && this.allItemsPopover.open(this);\n\t}\n\n\t_focusin() {\n\t\tthis.focused = true;\n\t}\n\n\t_focusout() {\n\t\tthis.focused = false;\n\t}\n\n\t_click(event) {\n\t\tif (isPhone() && !this.readonly && !this._showMorePressed) {\n\t\t\tthis.updateStaticAreaItemContentDensity();\n\t\t\tthis.allItemsPopover.open(this);\n\t\t}\n\n\t\tthis._showMorePressed = false;\n\t}\n\n\t_afterClosePopover() {\n\t\t// close device's keyboard and prevent further typing\n\t\tif (isPhone()) {\n\t\t\tthis.blur();\n\t\t}\n\t}\n\n\t_toggleButtonPress(event) {\n\t\tconst showSelectedItems = event.target.hasAttribute(\"show-selected\");\n\n\t\tif (showSelectedItems) {\n\t\t\tthis.allItemsPopover.close();\n\t\t\tthis.selectedItemsPopover.open(this);\n\t\t} else {\n\t\t\tthis.selectedItemsPopover.close();\n\t\t\tthis.allItemsPopover.open(this);\n\t\t}\n\n\t\t// always keep the toggle-button pressed\n\t\tevent.target.pressed = true;\n\t}\n\n\tonBeforeRendering() {\n\t\tthis._inputLastValue = this.value;\n\n\t\tconst hasSelectedItem = this.items.some(item => item.selected);\n\n\t\tif (this.getDomRef() && !hasSelectedItem) {\n\t\t\tconst morePopover = this.selectedItemsPopover;\n\n\t\t\tmorePopover && morePopover.close();\n\t\t}\n\n\t\tconst input = this.shadowRoot.querySelector(\"input\");\n\n\t\tif (input && !input.value) {\n\t\t\tthis._filteredItems = this.items;\n\t\t}\n\n\t\tconst filteredItems = this._filterItems(this.value);\n\t\tthis._filteredItems = filteredItems;\n\t}\n\n\tasync onAfterRendering() {\n\t\tawait this._getRespPopover();\n\t\tif (this.open && !this.allItemsPopover.opened) {\n\t\t\tthis.updateStaticAreaItemContentDensity();\n\t\t\tthis.allItemsPopover.open(this);\n\t\t\t// Set initial focus to the native input\n\t\t\tthis._innerInput.focus();\n\t\t}\n\t}\n\n\tget valueStateTextMappings() {\n\t\treturn {\n\t\t\t\"Success\": this.i18nBundle.getText(VALUE_STATE_SUCCESS),\n\t\t\t\"Error\": this.i18nBundle.getText(VALUE_STATE_ERROR),\n\t\t\t\"Warning\": this.i18nBundle.getText(VALUE_STATE_WARNING),\n\t\t};\n\t}\n\n\tget _tokenizer() {\n\t\treturn this.shadowRoot.querySelector(\"ui5-tokenizer\");\n\t}\n\n\tget nMoreCountText() {\n\t\tconst iTokenCount = this._getSelectedItems().length;\n\n\t\tif (iTokenCount === 0) {\n\t\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_TOKEN);\n\t\t}\n\n\t\tif (iTokenCount === 1) {\n\t\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_ONE_TOKEN);\n\t\t}\n\n\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n\t}\n\n\trootFocusIn() {\n\t\tthis.expandedTokenizer = true;\n\t}\n\n\trootFocusOut(event) {\n\t\tif (!this.shadowRoot.contains(event.relatedTarget) && !this._deleting) {\n\t\t\tthis.expandedTokenizer = false;\n\t\t}\n\t}\n\n\tget editable() {\n\t\treturn !this.readonly;\n\t}\n\n\tget dir() {\n\t\treturn getRTL() ? \"rtl\" : \"ltr\";\n\t}\n\n\tget selectedItemsListMode() {\n\t\treturn this.readonly ? \"None\" : \"MultiSelect\";\n\t}\n\n\tget hasValueState() {\n\t\treturn this.valueState !== ValueState.None;\n\t}\n\n\tget valueStateText() {\n\t\treturn this.valueStateTextMappings[this.valueState];\n\t}\n\n\tget _innerInput() {\n\t\tif (isPhone()) {\n\t\t\tif (this.allItemsPopover.opened) {\n\t\t\t\treturn this.allItemsPopover.querySelector(\"input\");\n\t\t\t}\n\n\t\t\treturn this.selectedItemsPopover.querySelector(\"input\");\n\t\t}\n\n\t\treturn this.getDomRef().querySelector(\"#ui5-multi-combobox-input\");\n\t}\n\n\tget _headerTitleText() {\n\t\treturn this.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n\t}\n\n\tstatic async onDefine() {\n\t\tawait Promise.all([\n\t\t\tMultiComboBoxItem.define(),\n\t\t\tTokenizer.define(),\n\t\t\tToken.define(),\n\t\t\tIcon.define(),\n\t\t\tResponsivePopover.define(),\n\t\t\tList.define(),\n\t\t\tStandardListItem.define(),\n\t\t\tToggleButton,\n\t\t\tfetchI18nBundle(\"@ui5/webcomponents\"),\n\t\t]);\n\t}\n}\n\nMultiComboBox.define();\n\nexport default MultiComboBox;\n"]},"metadata":{},"sourceType":"module"}