{"ast":null,"code":"import _regeneratorRuntime from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport ScrollEnablement from \"@ui5/webcomponents-base/dist/delegate/ScrollEnablement.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport TokenizerTemplate from \"./generated/templates/TokenizerTemplate.lit.js\";\nimport { MULTIINPUT_SHOW_MORE_TOKENS, TOKENIZER_ARIA_LABEL } from \"./generated/i18n/i18n-defaults.js\"; // Styles\n\nimport styles from \"./generated/themes/Tokenizer.css.js\";\n/**\n * @public\n */\n\nvar metadata = {\n  tag: \"ui5-tokenizer\",\n  managedSlots: true,\n  slots:\n  /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */\n  {\n    \"default\": {\n      propertyName: \"tokens\",\n      type: HTMLElement,\n      individualSlots: true\n    }\n  },\n  properties:\n  /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */\n  {\n    showMore: {\n      type: Boolean\n    },\n    disabled: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates if the tokenizer should show all tokens or n more label instead\n     *\n     * @private\n     */\n    expanded: {\n      type: Boolean\n    },\n    _nMoreText: {\n      type: String\n    }\n  },\n  events:\n  /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */\n  {\n    tokenDelete: {\n      detail: {\n        ref: {\n          type: HTMLElement\n        }\n      }\n    },\n    showMoreItemsPress: {\n      detail: {\n        ref: {\n          type: HTMLElement\n        }\n      }\n    }\n  }\n};\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * A container for tokens.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Tokenizer\n * @extends UI5Element\n * @tagname ui5-tokenizer\n * @usestextcontent\n * @private\n */\n\nvar Tokenizer = /*#__PURE__*/function (_UI5Element) {\n  _inherits(Tokenizer, _UI5Element);\n\n  var _super = _createSuper(Tokenizer);\n\n  _createClass(Tokenizer, [{\n    key: \"_handleResize\",\n    value: function _handleResize() {\n      /*\n       * Overflow happens with a pure CSS, but we\n       * have to update the \"n more\" label when tokenizer is resized\n       */\n      this._invalidate();\n    }\n  }], [{\n    key: \"metadata\",\n    get: function get() {\n      return metadata;\n    }\n  }, {\n    key: \"render\",\n    get: function get() {\n      return litRender;\n    }\n  }, {\n    key: \"template\",\n    get: function get() {\n      return TokenizerTemplate;\n    }\n  }, {\n    key: \"styles\",\n    get: function get() {\n      return styles;\n    }\n  }]);\n\n  function Tokenizer() {\n    var _this;\n\n    _classCallCheck(this, Tokenizer);\n\n    _this = _super.call(this);\n    _this._tokensCount = 0;\n    _this._resizeHandler = _this._handleResize.bind(_assertThisInitialized(_this));\n    _this._itemNav = new ItemNavigation(_assertThisInitialized(_this));\n    _this._scrollEnablement = new ScrollEnablement(_assertThisInitialized(_this));\n\n    _this._itemNav.getItemsCallback = function () {\n      if (_this.disabled) {\n        return [];\n      }\n\n      return _this._getTokens().filter(function (token, index) {\n        return index < _this._getTokens().length - _this.overflownTokens.length;\n      });\n    };\n\n    _this.i18nBundle = getI18nBundle(\"@ui5/webcomponents\");\n    return _this;\n  }\n\n  _createClass(Tokenizer, [{\n    key: \"onBeforeRendering\",\n    value: function onBeforeRendering() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        // wait for the layouting and update the text\n        _this2._nMoreText = _this2.i18nBundle.getText(MULTIINPUT_SHOW_MORE_TOKENS, [_this2.overflownTokens.length]);\n      }, 0);\n    }\n  }, {\n    key: \"onEnterDOM\",\n    value: function onEnterDOM() {\n      ResizeHandler.register(this.shadowRoot.querySelector(\".ui5-tokenizer--content\"), this._resizeHandler);\n    }\n  }, {\n    key: \"onExitDOM\",\n    value: function onExitDOM() {\n      ResizeHandler.deregister(this.shadowRoot.querySelector(\".ui5-tokenizer--content\"), this._resizeHandler);\n    }\n  }, {\n    key: \"_openOverflowPopover\",\n    value: function _openOverflowPopover() {\n      this.fireEvent(\"showMoreItemsPress\");\n    }\n  }, {\n    key: \"_getTokens\",\n    value: function _getTokens() {\n      return this.tokens;\n    }\n  }, {\n    key: \"onAfterRendering\",\n    value: function onAfterRendering() {\n      /*\n      \tWe schedule an invalidation as we have the tokens count\n      \tchanged and we need them rendered for the nmore count\n      */\n      if (this._tokensCount !== this.tokens.length) {\n        this._invalidate();\n\n        this._tokensCount = this.tokens.length;\n      }\n\n      this._scrollEnablement.scrollContainer = this.expanded ? this.contentDom : this;\n    }\n  }, {\n    key: \"_tokenDelete\",\n    value: function _tokenDelete(event) {\n      if (event.detail && event.detail.backSpace) {\n        this._deleteByBackspace();\n      }\n\n      this._updateAndFocus();\n\n      this.fireEvent(\"tokenDelete\", {\n        ref: event.target\n      });\n    }\n    /* Keyboard handling */\n\n  }, {\n    key: \"_updateAndFocus\",\n    value: function _updateAndFocus() {\n      var _this3 = this;\n\n      if (this._getTokens().length) {\n        this._itemNav.update();\n\n        setTimeout(function () {\n          _this3._itemNav.focusCurrent();\n        }, 0);\n      }\n    }\n  }, {\n    key: \"_deleteByBackspace\",\n    value: function _deleteByBackspace() {\n      var newIndex = this._itemNav.currentIndex - 1;\n\n      if (newIndex < 0) {\n        this._itemNav.currentIndex = 0;\n      } else {\n        this._itemNav.currentIndex = newIndex;\n      }\n    }\n  }, {\n    key: \"showNMore\",\n    get: function get() {\n      return !this.expanded && this.showMore && this.overflownTokens.length;\n    }\n  }, {\n    key: \"contentDom\",\n    get: function get() {\n      return this.shadowRoot.querySelector(\".ui5-tokenizer--content\");\n    }\n  }, {\n    key: \"tokenizerLabel\",\n    get: function get() {\n      return this.i18nBundle.getText(TOKENIZER_ARIA_LABEL);\n    }\n  }, {\n    key: \"overflownTokens\",\n    get: function get() {\n      var _this4 = this;\n\n      if (!this.contentDom) {\n        return [];\n      }\n\n      return this.tokens.filter(function (token) {\n        var parentRect = _this4.contentDom.getBoundingClientRect();\n\n        var tokenRect = token.getBoundingClientRect();\n        var tokenLeft = tokenRect.left + tokenRect.width;\n        var parentLeft = parentRect.left + parentRect.width;\n        token.overflows = tokenLeft > parentLeft && !_this4.expanded;\n        return token.overflows;\n      });\n    }\n  }, {\n    key: \"classes\",\n    get: function get() {\n      return {\n        wrapper: {\n          \"ui5-tokenizer-root\": true,\n          \"ui5-tokenizer-nmore--wrapper\": this.showMore,\n          \"ui5-tokenizer-no-padding\": !this.tokens.length\n        },\n        content: {\n          \"ui5-tokenizer--content\": true,\n          \"ui5-tokenizer-nmore--content\": this.showMore\n        }\n      };\n    }\n  }], [{\n    key: \"onDefine\",\n    value: function () {\n      var _onDefine = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetchI18nBundle(\"@ui5/webcomponents\");\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function onDefine() {\n        return _onDefine.apply(this, arguments);\n      }\n\n      return onDefine;\n    }()\n  }]);\n\n  return Tokenizer;\n}(UI5Element);\n\nTokenizer.define();\nexport default Tokenizer;","map":{"version":3,"sources":["/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/@ui5/webcomponents/dist/Tokenizer.js"],"names":["UI5Element","litRender","ResizeHandler","ItemNavigation","ScrollEnablement","fetchI18nBundle","getI18nBundle","TokenizerTemplate","MULTIINPUT_SHOW_MORE_TOKENS","TOKENIZER_ARIA_LABEL","styles","metadata","tag","managedSlots","slots","propertyName","type","HTMLElement","individualSlots","properties","showMore","Boolean","disabled","expanded","_nMoreText","String","events","tokenDelete","detail","ref","showMoreItemsPress","Tokenizer","_invalidate","_tokensCount","_resizeHandler","_handleResize","bind","_itemNav","_scrollEnablement","getItemsCallback","_getTokens","filter","token","index","length","overflownTokens","i18nBundle","setTimeout","getText","register","shadowRoot","querySelector","deregister","fireEvent","tokens","scrollContainer","contentDom","event","backSpace","_deleteByBackspace","_updateAndFocus","target","update","focusCurrent","newIndex","currentIndex","parentRect","getBoundingClientRect","tokenRect","tokenLeft","left","width","parentLeft","overflows","wrapper","content","define"],"mappings":";;;;;;;AAAA,OAAOA,UAAP,MAAuB,4CAAvB;AACA,OAAOC,SAAP,MAAsB,sDAAtB;AACA,OAAOC,aAAP,MAA0B,wDAA1B;AACA,OAAOC,cAAP,MAA2B,yDAA3B;AACA,OAAOC,gBAAP,MAA6B,2DAA7B;AACA,SAASC,eAAT,EAA0BC,aAA1B,QAA+C,4CAA/C;AACA,OAAOC,iBAAP,MAA8B,gDAA9B;AACA,SAASC,2BAAT,EAAsCC,oBAAtC,QAAkE,mCAAlE,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,qCAAnB;AAEA;;;;AAGA,IAAMC,QAAQ,GAAG;AAChBC,EAAAA,GAAG,EAAE,eADW;AAEhBC,EAAAA,YAAY,EAAE,IAFE;AAGhBC,EAAAA,KAAK;AAAE;AAA4D;AAClE,eAAW;AACVC,MAAAA,YAAY,EAAE,QADJ;AAEVC,MAAAA,IAAI,EAAEC,WAFI;AAGVC,MAAAA,eAAe,EAAE;AAHP;AADuD,GAHnD;AAUhBC,EAAAA,UAAU;AAAE;AAA4D;AACvEC,IAAAA,QAAQ,EAAE;AAAEJ,MAAAA,IAAI,EAAEK;AAAR,KAD6D;AAEvEC,IAAAA,QAAQ,EAAE;AAAEN,MAAAA,IAAI,EAAEK;AAAR,KAF6D;;AAIvE;;;;;AAKAE,IAAAA,QAAQ,EAAE;AAAEP,MAAAA,IAAI,EAAEK;AAAR,KAT6D;AAUvEG,IAAAA,UAAU,EAAE;AAAER,MAAAA,IAAI,EAAES;AAAR;AAV2D,GAVxD;AAsBhBC,EAAAA,MAAM;AAAE;AAA4D;AACnEC,IAAAA,WAAW,EAAE;AACZC,MAAAA,MAAM,EAAE;AACPC,QAAAA,GAAG,EAAE;AAAEb,UAAAA,IAAI,EAAEC;AAAR;AADE;AADI,KADsD;AAOnEa,IAAAA,kBAAkB,EAAE;AACnBF,MAAAA,MAAM,EAAE;AACPC,QAAAA,GAAG,EAAE;AAAEb,UAAAA,IAAI,EAAEC;AAAR;AADE;AADW;AAP+C;AAtBpD,CAAjB;AAqCA;;;;;;;;;;;;;;;;IAeMc,S;;;;;;;oCAiBW;AACf;;;;AAIA,WAAKC,WAAL;AACA;;;wBAtBqB;AACrB,aAAOrB,QAAP;AACA;;;wBAEmB;AACnB,aAAOV,SAAP;AACA;;;wBAEqB;AACrB,aAAOM,iBAAP;AACA;;;wBAEmB;AACnB,aAAOG,MAAP;AACA;;;AAUD,uBAAc;AAAA;;AAAA;;AACb;AAEA,UAAKuB,YAAL,GAAoB,CAApB;AACA,UAAKC,cAAL,GAAsB,MAAKC,aAAL,CAAmBC,IAAnB,+BAAtB;AACA,UAAKC,QAAL,GAAgB,IAAIlC,cAAJ,+BAAhB;AACA,UAAKmC,iBAAL,GAAyB,IAAIlC,gBAAJ,+BAAzB;;AAEA,UAAKiC,QAAL,CAAcE,gBAAd,GAAiC,YAAM;AACtC,UAAI,MAAKjB,QAAT,EAAmB;AAClB,eAAO,EAAP;AACA;;AAED,aAAO,MAAKkB,UAAL,GAAkBC,MAAlB,CAAyB,UAACC,KAAD,EAAQC,KAAR,EAAkB;AACjD,eAAOA,KAAK,GAAI,MAAKH,UAAL,GAAkBI,MAAlB,GAA2B,MAAKC,eAAL,CAAqBD,MAAhE;AACA,OAFM,CAAP;AAGA,KARD;;AAUA,UAAKE,UAAL,GAAkBxC,aAAa,CAAC,oBAAD,CAA/B;AAlBa;AAmBb;;;;wCAEmB;AAAA;;AACnByC,MAAAA,UAAU,CAAC,YAAM;AAChB;AACA,QAAA,MAAI,CAACvB,UAAL,GAAkB,MAAI,CAACsB,UAAL,CAAgBE,OAAhB,CAAwBxC,2BAAxB,EAAqD,CAAC,MAAI,CAACqC,eAAL,CAAqBD,MAAtB,CAArD,CAAlB;AACA,OAHS,EAGP,CAHO,CAAV;AAIA;;;iCAGY;AACZ1C,MAAAA,aAAa,CAAC+C,QAAd,CAAuB,KAAKC,UAAL,CAAgBC,aAAhB,CAA8B,yBAA9B,CAAvB,EAAiF,KAAKjB,cAAtF;AACA;;;gCAEW;AACXhC,MAAAA,aAAa,CAACkD,UAAd,CAAyB,KAAKF,UAAL,CAAgBC,aAAhB,CAA8B,yBAA9B,CAAzB,EAAmF,KAAKjB,cAAxF;AACA;;;2CAEsB;AACtB,WAAKmB,SAAL,CAAe,oBAAf;AACA;;;iCAEY;AACZ,aAAO,KAAKC,MAAZ;AACA;;;uCAEkB;AAClB;;;;AAIA,UAAI,KAAKrB,YAAL,KAAsB,KAAKqB,MAAL,CAAYV,MAAtC,EAA8C;AAC7C,aAAKZ,WAAL;;AACA,aAAKC,YAAL,GAAoB,KAAKqB,MAAL,CAAYV,MAAhC;AACA;;AAED,WAAKN,iBAAL,CAAuBiB,eAAvB,GAAyC,KAAKhC,QAAL,GAAgB,KAAKiC,UAArB,GAAkC,IAA3E;AACA;;;iCAEYC,K,EAAO;AACnB,UAAIA,KAAK,CAAC7B,MAAN,IAAgB6B,KAAK,CAAC7B,MAAN,CAAa8B,SAAjC,EAA4C;AAC3C,aAAKC,kBAAL;AACA;;AAED,WAAKC,eAAL;;AACA,WAAKP,SAAL,CAAe,aAAf,EAA8B;AAAExB,QAAAA,GAAG,EAAE4B,KAAK,CAACI;AAAb,OAA9B;AACA;AAED;;;;sCAEkB;AAAA;;AACjB,UAAI,KAAKrB,UAAL,GAAkBI,MAAtB,EAA8B;AAC7B,aAAKP,QAAL,CAAcyB,MAAd;;AAEAf,QAAAA,UAAU,CAAC,YAAM;AAChB,UAAA,MAAI,CAACV,QAAL,CAAc0B,YAAd;AACA,SAFS,EAEP,CAFO,CAAV;AAGA;AACD;;;yCAEoB;AACpB,UAAMC,QAAQ,GAAG,KAAK3B,QAAL,CAAc4B,YAAd,GAA6B,CAA9C;;AAEA,UAAID,QAAQ,GAAG,CAAf,EAAkB;AACjB,aAAK3B,QAAL,CAAc4B,YAAd,GAA6B,CAA7B;AACA,OAFD,MAEO;AACN,aAAK5B,QAAL,CAAc4B,YAAd,GAA6BD,QAA7B;AACA;AACD;;;wBAEe;AACf,aAAO,CAAC,KAAKzC,QAAN,IAAkB,KAAKH,QAAvB,IAAmC,KAAKyB,eAAL,CAAqBD,MAA/D;AACA;;;wBAEgB;AAChB,aAAO,KAAKM,UAAL,CAAgBC,aAAhB,CAA8B,yBAA9B,CAAP;AACA;;;wBAEoB;AACpB,aAAO,KAAKL,UAAL,CAAgBE,OAAhB,CAAwBvC,oBAAxB,CAAP;AACA;;;wBAEqB;AAAA;;AACrB,UAAI,CAAC,KAAK+C,UAAV,EAAsB;AACrB,eAAO,EAAP;AACA;;AAED,aAAO,KAAKF,MAAL,CAAYb,MAAZ,CAAmB,UAAAC,KAAK,EAAI;AAClC,YAAMwB,UAAU,GAAG,MAAI,CAACV,UAAL,CAAgBW,qBAAhB,EAAnB;;AACA,YAAMC,SAAS,GAAG1B,KAAK,CAACyB,qBAAN,EAAlB;AACA,YAAME,SAAS,GAAGD,SAAS,CAACE,IAAV,GAAiBF,SAAS,CAACG,KAA7C;AACA,YAAMC,UAAU,GAAGN,UAAU,CAACI,IAAX,GAAkBJ,UAAU,CAACK,KAAhD;AAEA7B,QAAAA,KAAK,CAAC+B,SAAN,GAAmBJ,SAAS,GAAGG,UAAb,IAA4B,CAAC,MAAI,CAACjD,QAApD;AAEA,eAAOmB,KAAK,CAAC+B,SAAb;AACA,OATM,CAAP;AAUA;;;wBAEa;AACb,aAAO;AACNC,QAAAA,OAAO,EAAE;AACR,gCAAsB,IADd;AAER,0CAAgC,KAAKtD,QAF7B;AAGR,sCAA4B,CAAC,KAAKkC,MAAL,CAAYV;AAHjC,SADH;AAMN+B,QAAAA,OAAO,EAAE;AACR,oCAA0B,IADlB;AAER,0CAAgC,KAAKvD;AAF7B;AANH,OAAP;AAWA;;;;;;;;;;uBAGMf,eAAe,CAAC,oBAAD,C;;;;;;;;;;;;;;;;;;;EA9JCL,U;;AAkKxB+B,SAAS,CAAC6C,MAAV;AAEA,eAAe7C,SAAf","sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport ScrollEnablement from \"@ui5/webcomponents-base/dist/delegate/ScrollEnablement.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport TokenizerTemplate from \"./generated/templates/TokenizerTemplate.lit.js\";\nimport { MULTIINPUT_SHOW_MORE_TOKENS, TOKENIZER_ARIA_LABEL } from \"./generated/i18n/i18n-defaults.js\";\n\n// Styles\nimport styles from \"./generated/themes/Tokenizer.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-tokenizer\",\n\tmanagedSlots: true,\n\tslots: /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */ {\n\t\t\"default\": {\n\t\t\tpropertyName: \"tokens\",\n\t\t\ttype: HTMLElement,\n\t\t\tindividualSlots: true,\n\t\t},\n\t},\n\tproperties: /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */ {\n\t\tshowMore: { type: Boolean },\n\t\tdisabled: { type: Boolean },\n\n\t\t/**\n\t\t * Indicates if the tokenizer should show all tokens or n more label instead\n\t\t *\n\t\t * @private\n\t\t */\n\t\texpanded: { type: Boolean },\n\t\t_nMoreText: { type: String },\n\t},\n\tevents: /** @lends sap.ui.webcomponents.main.Tokenizer.prototype */ {\n\t\ttokenDelete: {\n\t\t\tdetail: {\n\t\t\t\tref: { type: HTMLElement },\n\t\t\t},\n\t\t},\n\n\t\tshowMoreItemsPress: {\n\t\t\tdetail: {\n\t\t\t\tref: { type: HTMLElement },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * A container for tokens.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Tokenizer\n * @extends UI5Element\n * @tagname ui5-tokenizer\n * @usestextcontent\n * @private\n */\nclass Tokenizer extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn TokenizerTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\t_handleResize() {\n\t\t/*\n\t\t * Overflow happens with a pure CSS, but we\n\t\t * have to update the \"n more\" label when tokenizer is resized\n\t\t */\n\t\tthis._invalidate();\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._tokensCount = 0;\n\t\tthis._resizeHandler = this._handleResize.bind(this);\n\t\tthis._itemNav = new ItemNavigation(this);\n\t\tthis._scrollEnablement = new ScrollEnablement(this);\n\n\t\tthis._itemNav.getItemsCallback = () => {\n\t\t\tif (this.disabled) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this._getTokens().filter((token, index) => {\n\t\t\t\treturn index < (this._getTokens().length - this.overflownTokens.length);\n\t\t\t});\n\t\t};\n\n\t\tthis.i18nBundle = getI18nBundle(\"@ui5/webcomponents\");\n\t}\n\n\tonBeforeRendering() {\n\t\tsetTimeout(() => {\n\t\t\t// wait for the layouting and update the text\n\t\t\tthis._nMoreText = this.i18nBundle.getText(MULTIINPUT_SHOW_MORE_TOKENS, [this.overflownTokens.length]);\n\t\t}, 0);\n\t}\n\n\n\tonEnterDOM() {\n\t\tResizeHandler.register(this.shadowRoot.querySelector(\".ui5-tokenizer--content\"), this._resizeHandler);\n\t}\n\n\tonExitDOM() {\n\t\tResizeHandler.deregister(this.shadowRoot.querySelector(\".ui5-tokenizer--content\"), this._resizeHandler);\n\t}\n\n\t_openOverflowPopover() {\n\t\tthis.fireEvent(\"showMoreItemsPress\");\n\t}\n\n\t_getTokens() {\n\t\treturn this.tokens;\n\t}\n\n\tonAfterRendering() {\n\t\t/*\n\t\t\tWe schedule an invalidation as we have the tokens count\n\t\t\tchanged and we need them rendered for the nmore count\n\t\t*/\n\t\tif (this._tokensCount !== this.tokens.length) {\n\t\t\tthis._invalidate();\n\t\t\tthis._tokensCount = this.tokens.length;\n\t\t}\n\n\t\tthis._scrollEnablement.scrollContainer = this.expanded ? this.contentDom : this;\n\t}\n\n\t_tokenDelete(event) {\n\t\tif (event.detail && event.detail.backSpace) {\n\t\t\tthis._deleteByBackspace();\n\t\t}\n\n\t\tthis._updateAndFocus();\n\t\tthis.fireEvent(\"tokenDelete\", { ref: event.target });\n\t}\n\n\t/* Keyboard handling */\n\n\t_updateAndFocus() {\n\t\tif (this._getTokens().length) {\n\t\t\tthis._itemNav.update();\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._itemNav.focusCurrent();\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_deleteByBackspace() {\n\t\tconst newIndex = this._itemNav.currentIndex - 1;\n\n\t\tif (newIndex < 0) {\n\t\t\tthis._itemNav.currentIndex = 0;\n\t\t} else {\n\t\t\tthis._itemNav.currentIndex = newIndex;\n\t\t}\n\t}\n\n\tget showNMore() {\n\t\treturn !this.expanded && this.showMore && this.overflownTokens.length;\n\t}\n\n\tget contentDom() {\n\t\treturn this.shadowRoot.querySelector(\".ui5-tokenizer--content\");\n\t}\n\n\tget tokenizerLabel() {\n\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_LABEL);\n\t}\n\n\tget overflownTokens() {\n\t\tif (!this.contentDom) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn this.tokens.filter(token => {\n\t\t\tconst parentRect = this.contentDom.getBoundingClientRect();\n\t\t\tconst tokenRect = token.getBoundingClientRect();\n\t\t\tconst tokenLeft = tokenRect.left + tokenRect.width;\n\t\t\tconst parentLeft = parentRect.left + parentRect.width;\n\n\t\t\ttoken.overflows = (tokenLeft > parentLeft) && !this.expanded;\n\n\t\t\treturn token.overflows;\n\t\t});\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\twrapper: {\n\t\t\t\t\"ui5-tokenizer-root\": true,\n\t\t\t\t\"ui5-tokenizer-nmore--wrapper\": this.showMore,\n\t\t\t\t\"ui5-tokenizer-no-padding\": !this.tokens.length,\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\t\"ui5-tokenizer--content\": true,\n\t\t\t\t\"ui5-tokenizer-nmore--content\": this.showMore,\n\t\t\t},\n\t\t};\n\t}\n\n\tstatic async onDefine() {\n\t\tawait fetchI18nBundle(\"@ui5/webcomponents\");\n\t}\n}\n\nTokenizer.define();\n\nexport default Tokenizer;\n"]},"metadata":{},"sourceType":"module"}