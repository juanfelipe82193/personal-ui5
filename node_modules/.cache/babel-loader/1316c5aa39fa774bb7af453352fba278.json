{"ast":null,"code":"import _regeneratorRuntime from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport { isShow, isDown, isBackSpace, isSpace } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/slim-arrow-down.js\";\nimport { getRTL } from \"@ui5/webcomponents-base/dist/config/RTL.js\";\nimport { isIE, isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/multiselect-all.js\";\nimport MultiComboBoxItem from \"./MultiComboBoxItem.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport { VALUE_STATE_SUCCESS, VALUE_STATE_ERROR, VALUE_STATE_WARNING, TOKENIZER_ARIA_CONTAIN_TOKEN, TOKENIZER_ARIA_CONTAIN_ONE_TOKEN, TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, INPUT_SUGGESTIONS_TITLE } from \"./generated/i18n/i18n-defaults.js\"; // Templates\n\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\nimport MultiComboBoxPopoverTemplate from \"./generated/templates/MultiComboBoxPopoverTemplate.lit.js\"; // Styles\n\nimport styles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\n/**\n * @public\n */\n\nvar metadata = {\n  tag: \"ui5-multi-combobox\",\n  managedSlots: true,\n  slots:\n  /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */\n  {\n    /**\n     * Defines the <code>ui5-multi-combobox</code> items.\n     * <br><br>\n     * Example: <br>\n     * &lt;ui5-multi-combobox><br>\n     * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #1&lt;/ui5-li><br>\n     * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #2&lt;/ui5-li><br>\n     * &lt;/ui5-multi-combobox>\n     * <br> <br>\n     *\n     * @type {HTMLElement[]}\n     * @slot\n     * @public\n     */\n    \"default\": {\n      propertyName: \"items\",\n      type: HTMLElement,\n      listenFor: {\n        include: [\"*\"]\n      }\n    }\n  },\n  properties:\n  /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */\n  {\n    /**\n     * Defines the value of the <code>ui5-multi-combobox</code>.\n     * <br><br>\n     * <b>Note:</b> The property is updated upon typing.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    value: {\n      type: String,\n      defaultValue: \"\"\n    },\n\n    /**\n     * Defines a short hint intended to aid the user with data entry when the\n     * <code>ui5-multi-combobox</code> has no value.\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    placeholder: {\n      type: String,\n      defaultValue: \"\"\n    },\n\n    /**\n     * Defines if the user input will be prevented, if no matching item has been found\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    allowCustomValues: {\n      type: Boolean\n    },\n\n    /**\n     * Defines whether <code>ui5-multi-combobox</code> is in disabled state.\n     * <br><br>\n     * <b>Note:</b> A disabled <code>ui5-multi-combobox</code> is completely noninteractive.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    disabled: {\n      type: Boolean\n    },\n\n    /**\n     * Defines the value state of the <code>ui5-multi-combobox</code>.\n     * <br><br>\n     * Available options are:\n     * <ul>\n     * <li><code>None</code></li>\n     * <li><code>Error</code></li>\n     * <li><code>Warning</code></li>\n     * <li><code>Success</code></li>\n     * <li><code>Information</code></li>\n     * </ul>\n     *\n     * @type {ValueState}\n     * @defaultvalue \"None\"\n     * @public\n     */\n    valueState: {\n      type: ValueState,\n      defaultValue: ValueState.None\n    },\n\n    /**\n     * Defines whether the <code>ui5-multi-combobox</code> is read-only.\n     * <br><br>\n     * <b>Note:</b> A read-only <code>ui5-multi-combobox</code> is not editable,\n     * but still provides visual feedback upon user interaction.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    readonly: {\n      type: Boolean\n    },\n\n    /**\n     * Defines whether the <code>ui5-multi-combobox</code> is required.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     * @since 1.0.0-rc.5\n     */\n    required: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @since 1.0.0-rc.5\n     * @public\n     */\n    open: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates whether the input is focssed\n     * @private\n     */\n    focused: {\n      type: Boolean\n    },\n    _filteredItems: {\n      type: Object\n    },\n    _iconPressed: {\n      type: Boolean,\n      noAttribute: true\n    },\n\n    /**\n     * Indicates whether the tokenizer is expanded or collapsed(shows the n more label)\n     * @private\n     */\n    expandedTokenizer: {\n      type: Boolean\n    }\n  },\n  events:\n  /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */\n  {\n    /**\n     * Fired when the input operation has finished by pressing Enter or on focusout.\n     *\n     * @event\n     * @public\n     */\n    change: {},\n\n    /**\n     * Fired when the value of the <code>ui5-multi-combobox</code> changes at each keystroke.\n     *\n     * @event\n     * @public\n     */\n    input: {},\n\n    /**\n     * Fired when the dropdown is opened or closed.\n     *\n     * @event\n     * @since 1.0.0-rc.5\n     * @public\n     */\n    openChange: {},\n\n    /**\n     * Fired when selection is changed by user interaction\n     * in <code>SingleSelect</code> and <code>MultiSelect</code> modes.\n     *\n     * @event\n     * @param {Array} items an array of the selected items.\n     * @public\n     */\n    selectionChange: {\n      detail: {\n        items: {\n          type: Array\n        }\n      }\n    }\n  }\n};\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-multi-combobox</code> component provides a list box with items and a text field allowing the user to either type a value directly into the control, or choose from the list of existing items.\n *\n * It is a drop-down list for selecting and filtering values, commonly used to enable users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow of available options.\n * The select options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * <h3>Structure</h3>\n * The <code>ui5-multi-combobox</code> consists of the following elements:\n * <ul>\n * <li> Tokenizer - a list of tokens with selected options.\n * <li> Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-multi-combobox</code> provides advanced keyboard handling.\n *\n * <h4>Picker</h4>\n * If the <code>ui5-multi-combobox</code> is focused,\n * you can open or close the drop-down by pressing <code>F4</code>, <code>ALT+UP</code> or <code>ALT+DOWN</code> keys.\n * Once the drop-down is opened, you can use the <code>UP</code> and <code>DOWN</code> arrow keys\n * to navigate through the available options and select one by pressing the <code>Space</code> or <code>Enter</code> keys.\n * <br>\n *\n * <h4>Tokens</h4>\n * <ul>\n * <li> Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available). </li>\n * <li> Delete -  deletes the token and focuses the previous token. </li>\n * <li> Backspace -  deletes the token and focus the next token. </li>\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiComboBox\n * @extends UI5Element\n * @tagname ui5-multi-combobox\n * @public\n * @appenddocs MultiComboBoxItem\n * @since 0.11.0\n */\n\nvar MultiComboBox = /*#__PURE__*/function (_UI5Element) {\n  _inherits(MultiComboBox, _UI5Element);\n\n  var _super = _createSuper(MultiComboBox);\n\n  _createClass(MultiComboBox, null, [{\n    key: \"metadata\",\n    get: function get() {\n      return metadata;\n    }\n  }, {\n    key: \"render\",\n    get: function get() {\n      return litRender;\n    }\n  }, {\n    key: \"template\",\n    get: function get() {\n      return MultiComboBoxTemplate;\n    }\n  }, {\n    key: \"staticAreaTemplate\",\n    get: function get() {\n      return MultiComboBoxPopoverTemplate;\n    }\n  }, {\n    key: \"styles\",\n    get: function get() {\n      return styles;\n    }\n  }, {\n    key: \"staticAreaStyles\",\n    get: function get() {\n      return ResponsivePopoverCommonCss;\n    }\n  }]);\n\n  function MultiComboBox() {\n    var _this;\n\n    _classCallCheck(this, MultiComboBox);\n\n    _this = _super.call(this);\n    _this._filteredItems = [];\n    _this._inputLastValue = \"\";\n    _this._deleting = false;\n    _this._validationTimeout = null;\n    _this._selectedItemsPopoverOpened = false;\n    _this.i18nBundle = getI18nBundle(\"@ui5/webcomponents\");\n    return _this;\n  }\n\n  _createClass(MultiComboBox, [{\n    key: \"_inputChange\",\n    value: function _inputChange() {\n      this.fireEvent(\"change\");\n    }\n  }, {\n    key: \"_showMorePopover\",\n    value: function _showMorePopover() {\n      if (this.readonly) {\n        return;\n      }\n\n      this._showMorePressed = true;\n      this._selectedItemsPopoverOpened = true;\n\n      this._toggleRespPopover(true);\n    }\n  }, {\n    key: \"_showAllItemsPopover\",\n    value: function _showAllItemsPopover() {\n      this._selectedItemsPopoverOpened = false;\n\n      this._toggleRespPopover(false);\n\n      this._inputDom.focus();\n    }\n  }, {\n    key: \"_closeMorePopover\",\n    value: function _closeMorePopover() {\n      this.selectedItemsPopover.close();\n    }\n  }, {\n    key: \"_closeAllItemsPopover\",\n    value: function _closeAllItemsPopover() {\n      this.allItemsPopover.close();\n    }\n  }, {\n    key: \"_inputLiveChange\",\n    value: function _inputLiveChange(event) {\n      var _this2 = this;\n\n      var input = event.target;\n      var value = input.value;\n\n      var filteredItems = this._filterItems(value);\n\n      var oldValueState = this.valueState;\n      /* skip calling change event when an input with a placeholder is focused on IE\n      \t- value of the host and the internal input should be differnt in case of actual input\n      \t- input is called when a key is pressed => keyup should not be called yet\n      */\n\n      var skipFiring = this._inputDom.value === this.value && isIE && !this._keyDown && !!this.placeholder;\n\n      if (skipFiring) {\n        event.preventDefault();\n        return;\n      }\n\n      if (this._validationTimeout) {\n        input.value = this._inputLastValue;\n        return;\n      }\n\n      if (!filteredItems.length && value && !this.allowCustomValues) {\n        input.value = this._inputLastValue;\n        this.valueState = \"Error\";\n        this._validationTimeout = setTimeout(function () {\n          _this2.valueState = oldValueState;\n          _this2._validationTimeout = null;\n        }, 2000);\n        return;\n      }\n\n      this._inputLastValue = input.value;\n      this.value = input.value;\n      this._filteredItems = filteredItems;\n\n      if (!isPhone()) {\n        if (filteredItems.length === 0) {\n          this.allItemsPopover.close();\n        } else {\n          this.updateStaticAreaItemContentDensity();\n          this.allItemsPopover.open(this);\n        }\n      }\n\n      this.fireEvent(\"input\");\n    }\n  }, {\n    key: \"_tokenDelete\",\n    value: function _tokenDelete(event) {\n      var token = event.detail.ref;\n      var deletingItem = this.items.find(function (item) {\n        return item._id === token.getAttribute(\"data-ui5-id\");\n      });\n      deletingItem.selected = false;\n      this._deleting = true;\n      this.fireSelectionChange();\n    }\n  }, {\n    key: \"_tokenizerFocusOut\",\n    value: function _tokenizerFocusOut() {\n      var _this3 = this;\n\n      var tokenizer = this.shadowRoot.querySelector(\"ui5-tokenizer\");\n      var tokensCount = tokenizer.tokens.length - 1;\n      tokenizer.tokens.forEach(function (token) {\n        token.selected = false;\n      });\n      this._tokenizer.contentDom.scrollLeft = 0;\n\n      if (tokensCount === 0 && this._deleting) {\n        setTimeout(function () {\n          _this3.shadowRoot.querySelector(\"input\").focus();\n\n          _this3._deleting = false;\n        }, 0);\n      }\n    }\n  }, {\n    key: \"_onkeyup\",\n    value: function _onkeyup() {\n      this._keyDown = false;\n    }\n  }, {\n    key: \"_onkeydown\",\n    value: function () {\n      var _onkeydown2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var lastTokenIndex;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (isShow(event) && !this.readonly && !this.disabled) {\n                  event.preventDefault();\n\n                  this._toggleRespPopover();\n                }\n\n                if (!(isDown(event) && this.allItemsPopover.opened && this.items.length)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                event.preventDefault();\n                _context.next = 5;\n                return this._getList();\n\n              case 5:\n                this.list._itemNavigation.current = 0;\n                this.list.items[0].focus();\n\n              case 7:\n                if (!(isBackSpace(event) && event.target.value === \"\")) {\n                  _context.next = 14;\n                  break;\n                }\n\n                event.preventDefault();\n                lastTokenIndex = this._tokenizer.tokens.length - 1;\n\n                if (!(lastTokenIndex < 0)) {\n                  _context.next = 12;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 12:\n                this._tokenizer.tokens[lastTokenIndex].focus();\n\n                this._tokenizer._itemNav.currentIndex = lastTokenIndex;\n\n              case 14:\n                this._keyDown = true;\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _onkeydown(_x) {\n        return _onkeydown2.apply(this, arguments);\n      }\n\n      return _onkeydown;\n    }()\n  }, {\n    key: \"_filterItems\",\n    value: function _filterItems(value) {\n      return this.items.filter(function (item) {\n        return item.text && item.text.toLowerCase().startsWith(value.toLowerCase());\n      });\n    }\n  }, {\n    key: \"_toggleIcon\",\n    value: function _toggleIcon() {\n      this._iconPressed = !this._iconPressed;\n      this.open = this._iconPressed;\n      this.fireEvent(\"openChange\");\n\n      if (!this._iconPressed) {\n        this._afterClosePopover();\n      }\n    }\n  }, {\n    key: \"_setInitialFocusInResponsivePopover\",\n    value: function _setInitialFocusInResponsivePopover() {\n      this._innerInput.focus();\n    }\n  }, {\n    key: \"_onAllItemsPopoverAfterOpen\",\n    value: function _onAllItemsPopoverAfterOpen() {\n      this._setInitialFocusInResponsivePopover();\n\n      this._toggleIcon();\n    }\n  }, {\n    key: \"_getSelectedItems\",\n    value: function _getSelectedItems() {\n      // Angular 2 way data binding\n      this.selectedValues = this.items.filter(function (item) {\n        return item.selected;\n      });\n      return this.selectedValues;\n    }\n  }, {\n    key: \"_listSelectionChange\",\n    value: function _listSelectionChange(event) {\n      var _this4 = this;\n\n      event.target.items.forEach(function (item) {\n        _this4.items.forEach(function (mcbItem) {\n          if (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n            mcbItem.selected = item.selected;\n          }\n        });\n      });\n      this.fireSelectionChange();\n\n      if (!event.detail.selectionComponentPressed && !isSpace(event.detail)) {\n        this.allItemsPopover.close();\n        this.value = \"\";\n        this.fireEvent(\"input\");\n      }\n    }\n  }, {\n    key: \"fireSelectionChange\",\n    value: function fireSelectionChange() {\n      this.fireEvent(\"selectionChange\", {\n        items: this._getSelectedItems()\n      }); // Angular 2 way data binding\n\n      this.fireEvent(\"value-changed\");\n    }\n  }, {\n    key: \"_getRespPopover\",\n    value: function () {\n      var _getRespPopover2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var staticAreaItem;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.getStaticAreaItemDomRef();\n\n              case 2:\n                staticAreaItem = _context2.sent;\n                this.selectedItemsPopover = staticAreaItem.querySelector(\".ui5-multi-combobox-selected-items-responsive-popover\");\n                this.allItemsPopover = staticAreaItem.querySelector(\".ui5-multi-combobox-all-items-responsive-popover\");\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _getRespPopover() {\n        return _getRespPopover2.apply(this, arguments);\n      }\n\n      return _getRespPopover;\n    }()\n  }, {\n    key: \"_getList\",\n    value: function () {\n      var _getList2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var staticAreaItem;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.getStaticAreaItemDomRef();\n\n              case 2:\n                staticAreaItem = _context3.sent;\n                this.list = staticAreaItem.querySelector(\".ui5-multi-combobox-all-items-list\");\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _getList() {\n        return _getList2.apply(this, arguments);\n      }\n\n      return _getList;\n    }()\n  }, {\n    key: \"_toggleRespPopover\",\n    value: function _toggleRespPopover(isMorePopover) {\n      this.updateStaticAreaItemContentDensity();\n\n      if (isMorePopover) {\n        this.allItemsPopover.close();\n        return this.selectedItemsPopover.open(this);\n      }\n\n      if (this.allItemsPopover && this.allItemsPopover.opened) {\n        return this.allItemsPopover.close();\n      }\n\n      this.selectedItemsPopover && this.selectedItemsPopover.close();\n      this.allItemsPopover && this.allItemsPopover.open(this);\n    }\n  }, {\n    key: \"_focusin\",\n    value: function _focusin() {\n      this.focused = true;\n    }\n  }, {\n    key: \"_focusout\",\n    value: function _focusout() {\n      this.focused = false;\n    }\n  }, {\n    key: \"_click\",\n    value: function _click(event) {\n      if (isPhone() && !this.readonly && !this._showMorePressed) {\n        this.updateStaticAreaItemContentDensity();\n        this.allItemsPopover.open(this);\n      }\n\n      this._showMorePressed = false;\n    }\n  }, {\n    key: \"_afterClosePopover\",\n    value: function _afterClosePopover() {\n      // close device's keyboard and prevent further typing\n      if (isPhone()) {\n        this.blur();\n      }\n    }\n  }, {\n    key: \"_toggleButtonPress\",\n    value: function _toggleButtonPress(event) {\n      var showSelectedItems = event.target.hasAttribute(\"show-selected\");\n\n      if (showSelectedItems) {\n        this.allItemsPopover.close();\n        this.selectedItemsPopover.open(this);\n      } else {\n        this.selectedItemsPopover.close();\n        this.allItemsPopover.open(this);\n      } // always keep the toggle-button pressed\n\n\n      event.target.pressed = true;\n    }\n  }, {\n    key: \"onBeforeRendering\",\n    value: function onBeforeRendering() {\n      this._inputLastValue = this.value;\n      var hasSelectedItem = this.items.some(function (item) {\n        return item.selected;\n      });\n\n      if (this.getDomRef() && !hasSelectedItem) {\n        var morePopover = this.selectedItemsPopover;\n        morePopover && morePopover.close();\n      }\n\n      var input = this.shadowRoot.querySelector(\"input\");\n\n      if (input && !input.value) {\n        this._filteredItems = this.items;\n      }\n\n      var filteredItems = this._filterItems(this.value);\n\n      this._filteredItems = filteredItems;\n    }\n  }, {\n    key: \"onAfterRendering\",\n    value: function () {\n      var _onAfterRendering = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this._getRespPopover();\n\n              case 2:\n                if (this.open && !this.allItemsPopover.opened) {\n                  this.updateStaticAreaItemContentDensity();\n                  this.allItemsPopover.open(this); // Set initial focus to the native input\n\n                  this._innerInput.focus();\n                }\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function onAfterRendering() {\n        return _onAfterRendering.apply(this, arguments);\n      }\n\n      return onAfterRendering;\n    }()\n  }, {\n    key: \"rootFocusIn\",\n    value: function rootFocusIn() {\n      this.expandedTokenizer = true;\n    }\n  }, {\n    key: \"rootFocusOut\",\n    value: function rootFocusOut(event) {\n      if (!this.shadowRoot.contains(event.relatedTarget) && !this._deleting) {\n        this.expandedTokenizer = false;\n      }\n    }\n  }, {\n    key: \"_inputDom\",\n    get: function get() {\n      return this.shadowRoot.querySelector(\"#ui5-multi-combobox-input\");\n    }\n  }, {\n    key: \"valueStateTextMappings\",\n    get: function get() {\n      return {\n        \"Success\": this.i18nBundle.getText(VALUE_STATE_SUCCESS),\n        \"Error\": this.i18nBundle.getText(VALUE_STATE_ERROR),\n        \"Warning\": this.i18nBundle.getText(VALUE_STATE_WARNING)\n      };\n    }\n  }, {\n    key: \"_tokenizer\",\n    get: function get() {\n      return this.shadowRoot.querySelector(\"ui5-tokenizer\");\n    }\n  }, {\n    key: \"nMoreCountText\",\n    get: function get() {\n      var iTokenCount = this._getSelectedItems().length;\n\n      if (iTokenCount === 0) {\n        return this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_TOKEN);\n      }\n\n      if (iTokenCount === 1) {\n        return this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_ONE_TOKEN);\n      }\n\n      return this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n    }\n  }, {\n    key: \"editable\",\n    get: function get() {\n      return !this.readonly;\n    }\n  }, {\n    key: \"dir\",\n    get: function get() {\n      return getRTL() ? \"rtl\" : \"ltr\";\n    }\n  }, {\n    key: \"selectedItemsListMode\",\n    get: function get() {\n      return this.readonly ? \"None\" : \"MultiSelect\";\n    }\n  }, {\n    key: \"hasValueState\",\n    get: function get() {\n      return this.valueState !== ValueState.None;\n    }\n  }, {\n    key: \"valueStateText\",\n    get: function get() {\n      return this.valueStateTextMappings[this.valueState];\n    }\n  }, {\n    key: \"_innerInput\",\n    get: function get() {\n      if (isPhone()) {\n        if (this.allItemsPopover.opened) {\n          return this.allItemsPopover.querySelector(\"input\");\n        }\n\n        return this.selectedItemsPopover.querySelector(\"input\");\n      }\n\n      return this.getDomRef().querySelector(\"#ui5-multi-combobox-input\");\n    }\n  }, {\n    key: \"_headerTitleText\",\n    get: function get() {\n      return this.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n    }\n  }], [{\n    key: \"onDefine\",\n    value: function () {\n      var _onDefine = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return Promise.all([MultiComboBoxItem.define(), Tokenizer.define(), Token.define(), Icon.define(), ResponsivePopover.define(), List.define(), StandardListItem.define(), ToggleButton, fetchI18nBundle(\"@ui5/webcomponents\")]);\n\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function onDefine() {\n        return _onDefine.apply(this, arguments);\n      }\n\n      return onDefine;\n    }()\n  }]);\n\n  return MultiComboBox;\n}(UI5Element);\n\nMultiComboBox.define();\nexport default MultiComboBox;","map":{"version":3,"sources":["/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/@ui5/webcomponents/dist/MultiComboBox.js"],"names":["UI5Element","litRender","ValueState","isShow","isDown","isBackSpace","isSpace","getRTL","isIE","isPhone","fetchI18nBundle","getI18nBundle","MultiComboBoxItem","Tokenizer","Token","Icon","ResponsivePopover","List","StandardListItem","ToggleButton","VALUE_STATE_SUCCESS","VALUE_STATE_ERROR","VALUE_STATE_WARNING","TOKENIZER_ARIA_CONTAIN_TOKEN","TOKENIZER_ARIA_CONTAIN_ONE_TOKEN","TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS","INPUT_SUGGESTIONS_TITLE","MultiComboBoxTemplate","MultiComboBoxPopoverTemplate","styles","ResponsivePopoverCommonCss","metadata","tag","managedSlots","slots","propertyName","type","HTMLElement","listenFor","include","properties","value","String","defaultValue","placeholder","allowCustomValues","Boolean","disabled","valueState","None","readonly","required","open","focused","_filteredItems","Object","_iconPressed","noAttribute","expandedTokenizer","events","change","input","openChange","selectionChange","detail","items","Array","MultiComboBox","_inputLastValue","_deleting","_validationTimeout","_selectedItemsPopoverOpened","i18nBundle","fireEvent","_showMorePressed","_toggleRespPopover","_inputDom","focus","selectedItemsPopover","close","allItemsPopover","event","target","filteredItems","_filterItems","oldValueState","skipFiring","_keyDown","preventDefault","length","setTimeout","updateStaticAreaItemContentDensity","token","ref","deletingItem","find","item","_id","getAttribute","selected","fireSelectionChange","tokenizer","shadowRoot","querySelector","tokensCount","tokens","forEach","_tokenizer","contentDom","scrollLeft","opened","_getList","list","_itemNavigation","current","lastTokenIndex","_itemNav","currentIndex","filter","text","toLowerCase","startsWith","_afterClosePopover","_innerInput","_setInitialFocusInResponsivePopover","_toggleIcon","selectedValues","mcbItem","selectionComponentPressed","_getSelectedItems","getStaticAreaItemDomRef","staticAreaItem","isMorePopover","blur","showSelectedItems","hasAttribute","pressed","hasSelectedItem","some","getDomRef","morePopover","_getRespPopover","contains","relatedTarget","getText","iTokenCount","valueStateTextMappings","Promise","all","define"],"mappings":"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","sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport {\n\tisShow, isDown, isBackSpace, isSpace,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/slim-arrow-down.js\";\nimport { getRTL } from \"@ui5/webcomponents-base/dist/config/RTL.js\";\nimport { isIE, isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/icons/multiselect-all.js\";\nimport MultiComboBoxItem from \"./MultiComboBoxItem.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport {\n\tVALUE_STATE_SUCCESS,\n\tVALUE_STATE_ERROR,\n\tVALUE_STATE_WARNING,\n\tTOKENIZER_ARIA_CONTAIN_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_ONE_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS,\n\tINPUT_SUGGESTIONS_TITLE,\n} from \"./generated/i18n/i18n-defaults.js\";\n\n// Templates\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\nimport MultiComboBoxPopoverTemplate from \"./generated/templates/MultiComboBoxPopoverTemplate.lit.js\";\n\n// Styles\nimport styles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-multi-combobox\",\n\tmanagedSlots: true,\n\tslots: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the <code>ui5-multi-combobox</code> items.\n\t\t * <br><br>\n\t\t * Example: <br>\n\t\t * &lt;ui5-multi-combobox><br>\n\t\t * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #1&lt;/ui5-li><br>\n\t\t * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #2&lt;/ui5-li><br>\n\t\t * &lt;/ui5-multi-combobox>\n\t\t * <br> <br>\n\t\t *\n\t\t * @type {HTMLElement[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\tpropertyName: \"items\",\n\t\t\ttype: HTMLElement,\n\t\t\tlistenFor: { include: [\"*\"] },\n\t\t},\n\t},\n\tproperties: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the value of the <code>ui5-multi-combobox</code>.\n\t\t * <br><br>\n\t\t * <b>Note:</b> The property is updated upon typing.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines a short hint intended to aid the user with data entry when the\n\t\t * <code>ui5-multi-combobox</code> has no value.\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines if the user input will be prevented, if no matching item has been found\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tallowCustomValues: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether <code>ui5-multi-combobox</code> is in disabled state.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A disabled <code>ui5-multi-combobox</code> is completely noninteractive.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the value state of the <code>ui5-multi-combobox</code>.\n\t\t * <br><br>\n\t\t * Available options are:\n\t\t * <ul>\n\t\t * <li><code>None</code></li>\n\t\t * <li><code>Error</code></li>\n\t\t * <li><code>Warning</code></li>\n\t\t * <li><code>Success</code></li>\n\t\t * <li><code>Information</code></li>\n\t\t * </ul>\n\t\t *\n\t\t * @type {ValueState}\n\t\t * @defaultvalue \"None\"\n\t\t * @public\n\t\t */\n\t\tvalueState: {\n\t\t\ttype: ValueState,\n\t\t\tdefaultValue: ValueState.None,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the <code>ui5-multi-combobox</code> is read-only.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A read-only <code>ui5-multi-combobox</code> is not editable,\n\t\t * but still provides visual feedback upon user interaction.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the <code>ui5-multi-combobox</code> is required.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t * @since 1.0.0-rc.5\n\t\t */\n\t\trequired: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @since 1.0.0-rc.5\n\t\t * @public\n\t\t */\n\t\topen: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the input is focssed\n\t\t * @private\n\t\t */\n\t\tfocused: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_filteredItems: {\n\t\t\ttype: Object,\n\t\t},\n\n\t\t_iconPressed: {\n\t\t\ttype: Boolean,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the tokenizer is expanded or collapsed(shows the n more label)\n\t\t * @private\n\t\t */\n\t\texpandedTokenizer: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tevents: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Fired when the input operation has finished by pressing Enter or on focusout.\n\t\t *\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tchange: {},\n\n\t\t/**\n\t\t * Fired when the value of the <code>ui5-multi-combobox</code> changes at each keystroke.\n\t\t *\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tinput: {},\n\n\t\t/**\n\t\t * Fired when the dropdown is opened or closed.\n\t\t *\n\t\t * @event\n\t\t * @since 1.0.0-rc.5\n\t\t * @public\n\t\t */\n\t\topenChange: {},\n\n\t\t/**\n\t\t * Fired when selection is changed by user interaction\n\t\t * in <code>SingleSelect</code> and <code>MultiSelect</code> modes.\n\t\t *\n\t\t * @event\n\t\t * @param {Array} items an array of the selected items.\n\t\t * @public\n\t\t */\n\t\tselectionChange: {\n\t\t\tdetail: {\n\t\t\t\titems: { type: Array },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-multi-combobox</code> component provides a list box with items and a text field allowing the user to either type a value directly into the control, or choose from the list of existing items.\n *\n * It is a drop-down list for selecting and filtering values, commonly used to enable users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow of available options.\n * The select options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * <h3>Structure</h3>\n * The <code>ui5-multi-combobox</code> consists of the following elements:\n * <ul>\n * <li> Tokenizer - a list of tokens with selected options.\n * <li> Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-multi-combobox</code> provides advanced keyboard handling.\n *\n * <h4>Picker</h4>\n * If the <code>ui5-multi-combobox</code> is focused,\n * you can open or close the drop-down by pressing <code>F4</code>, <code>ALT+UP</code> or <code>ALT+DOWN</code> keys.\n * Once the drop-down is opened, you can use the <code>UP</code> and <code>DOWN</code> arrow keys\n * to navigate through the available options and select one by pressing the <code>Space</code> or <code>Enter</code> keys.\n * <br>\n *\n * <h4>Tokens</h4>\n * <ul>\n * <li> Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available). </li>\n * <li> Delete -  deletes the token and focuses the previous token. </li>\n * <li> Backspace -  deletes the token and focus the next token. </li>\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiComboBox\n * @extends UI5Element\n * @tagname ui5-multi-combobox\n * @public\n * @appenddocs MultiComboBoxItem\n * @since 0.11.0\n */\nclass MultiComboBox extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn MultiComboBoxTemplate;\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn MultiComboBoxPopoverTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn ResponsivePopoverCommonCss;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._filteredItems = [];\n\t\tthis._inputLastValue = \"\";\n\t\tthis._deleting = false;\n\t\tthis._validationTimeout = null;\n\t\tthis._selectedItemsPopoverOpened = false;\n\t\tthis.i18nBundle = getI18nBundle(\"@ui5/webcomponents\");\n\t}\n\n\t_inputChange() {\n\t\tthis.fireEvent(\"change\");\n\t}\n\n\t_showMorePopover() {\n\t\tif (this.readonly) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._showMorePressed = true;\n\t\tthis._selectedItemsPopoverOpened = true;\n\t\tthis._toggleRespPopover(true);\n\t}\n\n\t_showAllItemsPopover() {\n\t\tthis._selectedItemsPopoverOpened = false;\n\t\tthis._toggleRespPopover(false);\n\n\t\tthis._inputDom.focus();\n\t}\n\n\t_closeMorePopover() {\n\t\tthis.selectedItemsPopover.close();\n\t}\n\n\t_closeAllItemsPopover() {\n\t\tthis.allItemsPopover.close();\n\t}\n\n\tget _inputDom() {\n\t\treturn this.shadowRoot.querySelector(\"#ui5-multi-combobox-input\");\n\t}\n\n\t_inputLiveChange(event) {\n\t\tconst input = event.target;\n\t\tconst value = input.value;\n\t\tconst filteredItems = this._filterItems(value);\n\t\tconst oldValueState = this.valueState;\n\n\t\t/* skip calling change event when an input with a placeholder is focused on IE\n\t\t\t- value of the host and the internal input should be differnt in case of actual input\n\t\t\t- input is called when a key is pressed => keyup should not be called yet\n\t\t*/\n\t\tconst skipFiring = (this._inputDom.value === this.value) && isIE && !this._keyDown && !!this.placeholder;\n\n\t\tif (skipFiring) {\n\t\t\tevent.preventDefault();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._validationTimeout) {\n\t\t\tinput.value = this._inputLastValue;\n\t\t\treturn;\n\t\t}\n\n\t\tif (!filteredItems.length && value && !this.allowCustomValues) {\n\t\t\tinput.value = this._inputLastValue;\n\t\t\tthis.valueState = \"Error\";\n\n\t\t\tthis._validationTimeout = setTimeout(() => {\n\t\t\t\tthis.valueState = oldValueState;\n\t\t\t\tthis._validationTimeout = null;\n\t\t\t}, 2000);\n\n\t\t\treturn;\n\t\t}\n\n\n\t\tthis._inputLastValue = input.value;\n\t\tthis.value = input.value;\n\t\tthis._filteredItems = filteredItems;\n\n\t\tif (!isPhone()) {\n\t\t\tif (filteredItems.length === 0) {\n\t\t\t\tthis.allItemsPopover.close();\n\t\t\t} else {\n\t\t\t\tthis.updateStaticAreaItemContentDensity();\n\t\t\t\tthis.allItemsPopover.open(this);\n\t\t\t}\n\t\t}\n\n\t\tthis.fireEvent(\"input\");\n\t}\n\n\t_tokenDelete(event) {\n\t\tconst token = event.detail.ref;\n\t\tconst deletingItem = this.items.find(item => item._id === token.getAttribute(\"data-ui5-id\"));\n\n\t\tdeletingItem.selected = false;\n\t\tthis._deleting = true;\n\n\t\tthis.fireSelectionChange();\n\t}\n\n\t_tokenizerFocusOut() {\n\t\tconst tokenizer = this.shadowRoot.querySelector(\"ui5-tokenizer\");\n\t\tconst tokensCount = tokenizer.tokens.length - 1;\n\n\t\ttokenizer.tokens.forEach(token => { token.selected = false; });\n\n\t\tthis._tokenizer.contentDom.scrollLeft = 0;\n\n\t\tif (tokensCount === 0 && this._deleting) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.shadowRoot.querySelector(\"input\").focus();\n\t\t\t\tthis._deleting = false;\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_onkeyup() {\n\t\tthis._keyDown = false;\n\t}\n\n\tasync _onkeydown(event) {\n\t\tif (isShow(event) && !this.readonly && !this.disabled) {\n\t\t\tevent.preventDefault();\n\t\t\tthis._toggleRespPopover();\n\t\t}\n\n\t\tif (isDown(event) && this.allItemsPopover.opened && this.items.length) {\n\t\t\tevent.preventDefault();\n\t\t\tawait this._getList();\n\t\t\tthis.list._itemNavigation.current = 0;\n\t\t\tthis.list.items[0].focus();\n\t\t}\n\n\t\tif (isBackSpace(event) && event.target.value === \"\") {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst lastTokenIndex = this._tokenizer.tokens.length - 1;\n\n\t\t\tif (lastTokenIndex < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._tokenizer.tokens[lastTokenIndex].focus();\n\t\t\tthis._tokenizer._itemNav.currentIndex = lastTokenIndex;\n\t\t}\n\n\t\tthis._keyDown = true;\n\t}\n\n\t_filterItems(value) {\n\t\treturn this.items.filter(item => {\n\t\t\treturn item.text && item.text.toLowerCase().startsWith(value.toLowerCase());\n\t\t});\n\t}\n\n\t_toggleIcon() {\n\t\tthis._iconPressed = !this._iconPressed;\n\t\tthis.open = this._iconPressed;\n\n\t\tthis.fireEvent(\"openChange\");\n\n\t\tif (!this._iconPressed) {\n\t\t\tthis._afterClosePopover();\n\t\t}\n\t}\n\n\t_setInitialFocusInResponsivePopover() {\n\t\tthis._innerInput.focus();\n\t}\n\n\t_onAllItemsPopoverAfterOpen() {\n\t\tthis._setInitialFocusInResponsivePopover();\n\t\tthis._toggleIcon();\n\t}\n\n\t_getSelectedItems() {\n\t\t// Angular 2 way data binding\n\t\tthis.selectedValues = this.items.filter(item => item.selected);\n\t\treturn this.selectedValues;\n\t}\n\n\t_listSelectionChange(event) {\n\t\tevent.target.items.forEach(item => {\n\t\t\tthis.items.forEach(mcbItem => {\n\t\t\t\tif (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n\t\t\t\t\tmcbItem.selected = item.selected;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.fireSelectionChange();\n\n\t\tif (!event.detail.selectionComponentPressed && !isSpace(event.detail)) {\n\t\t\tthis.allItemsPopover.close();\n\t\t\tthis.value = \"\";\n\t\t\tthis.fireEvent(\"input\");\n\t\t}\n\t}\n\n\tfireSelectionChange() {\n\t\tthis.fireEvent(\"selectionChange\", { items: this._getSelectedItems() });\n\t\t// Angular 2 way data binding\n\t\tthis.fireEvent(\"value-changed\");\n\t}\n\n\tasync _getRespPopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\tthis.selectedItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-selected-items-responsive-popover`);\n\t\tthis.allItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-all-items-responsive-popover`);\n\t}\n\n\tasync _getList() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\tthis.list = staticAreaItem.querySelector(\".ui5-multi-combobox-all-items-list\");\n\t}\n\n\t_toggleRespPopover(isMorePopover) {\n\t\tthis.updateStaticAreaItemContentDensity();\n\n\t\tif (isMorePopover) {\n\t\t\tthis.allItemsPopover.close();\n\t\t\treturn this.selectedItemsPopover.open(this);\n\t\t}\n\n\t\tif (this.allItemsPopover && this.allItemsPopover.opened) {\n\t\t\treturn this.allItemsPopover.close();\n\t\t}\n\n\t\tthis.selectedItemsPopover && this.selectedItemsPopover.close();\n\n\t\tthis.allItemsPopover && this.allItemsPopover.open(this);\n\t}\n\n\t_focusin() {\n\t\tthis.focused = true;\n\t}\n\n\t_focusout() {\n\t\tthis.focused = false;\n\t}\n\n\t_click(event) {\n\t\tif (isPhone() && !this.readonly && !this._showMorePressed) {\n\t\t\tthis.updateStaticAreaItemContentDensity();\n\t\t\tthis.allItemsPopover.open(this);\n\t\t}\n\n\t\tthis._showMorePressed = false;\n\t}\n\n\t_afterClosePopover() {\n\t\t// close device's keyboard and prevent further typing\n\t\tif (isPhone()) {\n\t\t\tthis.blur();\n\t\t}\n\t}\n\n\t_toggleButtonPress(event) {\n\t\tconst showSelectedItems = event.target.hasAttribute(\"show-selected\");\n\n\t\tif (showSelectedItems) {\n\t\t\tthis.allItemsPopover.close();\n\t\t\tthis.selectedItemsPopover.open(this);\n\t\t} else {\n\t\t\tthis.selectedItemsPopover.close();\n\t\t\tthis.allItemsPopover.open(this);\n\t\t}\n\n\t\t// always keep the toggle-button pressed\n\t\tevent.target.pressed = true;\n\t}\n\n\tonBeforeRendering() {\n\t\tthis._inputLastValue = this.value;\n\n\t\tconst hasSelectedItem = this.items.some(item => item.selected);\n\n\t\tif (this.getDomRef() && !hasSelectedItem) {\n\t\t\tconst morePopover = this.selectedItemsPopover;\n\n\t\t\tmorePopover && morePopover.close();\n\t\t}\n\n\t\tconst input = this.shadowRoot.querySelector(\"input\");\n\n\t\tif (input && !input.value) {\n\t\t\tthis._filteredItems = this.items;\n\t\t}\n\n\t\tconst filteredItems = this._filterItems(this.value);\n\t\tthis._filteredItems = filteredItems;\n\t}\n\n\tasync onAfterRendering() {\n\t\tawait this._getRespPopover();\n\t\tif (this.open && !this.allItemsPopover.opened) {\n\t\t\tthis.updateStaticAreaItemContentDensity();\n\t\t\tthis.allItemsPopover.open(this);\n\t\t\t// Set initial focus to the native input\n\t\t\tthis._innerInput.focus();\n\t\t}\n\t}\n\n\tget valueStateTextMappings() {\n\t\treturn {\n\t\t\t\"Success\": this.i18nBundle.getText(VALUE_STATE_SUCCESS),\n\t\t\t\"Error\": this.i18nBundle.getText(VALUE_STATE_ERROR),\n\t\t\t\"Warning\": this.i18nBundle.getText(VALUE_STATE_WARNING),\n\t\t};\n\t}\n\n\tget _tokenizer() {\n\t\treturn this.shadowRoot.querySelector(\"ui5-tokenizer\");\n\t}\n\n\tget nMoreCountText() {\n\t\tconst iTokenCount = this._getSelectedItems().length;\n\n\t\tif (iTokenCount === 0) {\n\t\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_TOKEN);\n\t\t}\n\n\t\tif (iTokenCount === 1) {\n\t\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_ONE_TOKEN);\n\t\t}\n\n\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n\t}\n\n\trootFocusIn() {\n\t\tthis.expandedTokenizer = true;\n\t}\n\n\trootFocusOut(event) {\n\t\tif (!this.shadowRoot.contains(event.relatedTarget) && !this._deleting) {\n\t\t\tthis.expandedTokenizer = false;\n\t\t}\n\t}\n\n\tget editable() {\n\t\treturn !this.readonly;\n\t}\n\n\tget dir() {\n\t\treturn getRTL() ? \"rtl\" : \"ltr\";\n\t}\n\n\tget selectedItemsListMode() {\n\t\treturn this.readonly ? \"None\" : \"MultiSelect\";\n\t}\n\n\tget hasValueState() {\n\t\treturn this.valueState !== ValueState.None;\n\t}\n\n\tget valueStateText() {\n\t\treturn this.valueStateTextMappings[this.valueState];\n\t}\n\n\tget _innerInput() {\n\t\tif (isPhone()) {\n\t\t\tif (this.allItemsPopover.opened) {\n\t\t\t\treturn this.allItemsPopover.querySelector(\"input\");\n\t\t\t}\n\n\t\t\treturn this.selectedItemsPopover.querySelector(\"input\");\n\t\t}\n\n\t\treturn this.getDomRef().querySelector(\"#ui5-multi-combobox-input\");\n\t}\n\n\tget _headerTitleText() {\n\t\treturn this.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n\t}\n\n\tstatic async onDefine() {\n\t\tawait Promise.all([\n\t\t\tMultiComboBoxItem.define(),\n\t\t\tTokenizer.define(),\n\t\t\tToken.define(),\n\t\t\tIcon.define(),\n\t\t\tResponsivePopover.define(),\n\t\t\tList.define(),\n\t\t\tStandardListItem.define(),\n\t\t\tToggleButton,\n\t\t\tfetchI18nBundle(\"@ui5/webcomponents\"),\n\t\t]);\n\t}\n}\n\nMultiComboBox.define();\n\nexport default MultiComboBox;\n"]},"metadata":{},"sourceType":"module"}