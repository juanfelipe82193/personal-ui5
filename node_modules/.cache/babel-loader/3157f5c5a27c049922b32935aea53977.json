{"ast":null,"code":"import _classCallCheck from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport { getFirstFocusableElement, getLastFocusableElement } from \"@ui5/webcomponents-base/dist/util/FocusableElements.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport { isEscape } from \"@ui5/webcomponents-base/dist/Keys.js\"; // Styles\n\nimport styles from \"./generated/themes/Popup.css.js\";\nimport { addOpenedPopup, removeOpenedPopup } from \"./popup-utils/OpenedPopupsRegistry.js\";\nimport { getNextZIndex } from \"./popup-utils/PopupUtils.js\";\n/**\n * @public\n */\n\nvar metadata = {\n  managedSlots: true,\n  slots:\n  /** @lends  sap.ui.webcomponents.main.Popup.prototype */\n  {\n    /**\n     * Defines the content of the Web Component.\n     * @type {Node[]}\n     * @slot\n     * @public\n     */\n    \"default\": {\n      type: HTMLElement\n    },\n\n    /**\n     * Defines the header HTML Element.\n     *\n     * @type {HTMLElement[]}\n     * @slot\n     * @public\n     */\n    header: {\n      type: HTMLElement\n    },\n\n    /**\n     * Defines the footer HTML Element.\n     *\n     * @type {HTMLElement[]}\n     * @slot\n     * @public\n     */\n    footer: {\n      type: HTMLElement\n    }\n  },\n  properties:\n  /** @lends  sap.ui.webcomponents.main.Popup.prototype */\n  {\n    /**\n     * Defines the ID of the HTML Element, which will get the initial focus.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    initialFocus: {\n      type: String\n    },\n\n    /**\n     * Defines the header text.\n     * <br><br>\n     * <b>Note:</b> If <code>header</code> slot is provided, the <code>headerText</code> is ignored.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    headerText: {\n      type: String\n    },\n\n    /**\n     * Indicates if the elements is on focus\n     * @private\n     */\n    opened: {\n      type: Boolean\n    },\n    _zIndex: {\n      type: Integer,\n      noAttribute: true\n    },\n    _hideBlockLayer: {\n      type: Boolean,\n      noAttribute: true\n    },\n\n    /**\n     * @private\n     */\n    _disableInitialFocus: {\n      type: Boolean\n    }\n  },\n  events:\n  /** @lends  sap.ui.webcomponents.main.Popup.prototype */\n  {\n    /**\n     * Fired before the component is opened.\n     *\n     * @public\n     * @event\n     */\n    beforeOpen: {},\n\n    /**\n     * Fired after the component is opened.\n     *\n     * @public\n     * @event\n     */\n    afterOpen: {},\n\n    /**\n     * Fired before the component is closed.\n     *\n     * @public\n     * @event\n     * @param {Boolean} escPressed Indicates that <code>ESC</code> key has triggered the event.\n     */\n    beforeClose: {\n      escPressed: {\n        type: Boolean\n      }\n    },\n\n    /**\n     * Fired after the component is closed.\n     *\n     * @public\n     * @event\n     */\n    afterClose: {}\n  }\n};\nvar openedPopups = [];\nvar isBodyScrollingDisabled = false;\nvar customBLyBackStyleInserted = false;\n\nfunction getParentHost(node) {\n  while (node && !node.host) {\n    node = node.parentNode;\n  }\n\n  return node && node.host;\n}\n\nfunction createBLyBackStyle() {\n  if (customBLyBackStyleInserted) {\n    return;\n  }\n\n  customBLyBackStyleInserted = true;\n  var bodyStyleSheet = document.createElement(\"style\");\n  bodyStyleSheet.type = \"text/css\";\n  bodyStyleSheet.innerHTML = \"\\n\\t\\t.ui5-popup-BLy--back {\\n\\t\\t\\twidth: 100%;\\n\\t\\t\\theight: 100%;\\n\\t\\t\\tposition: fixed;\\n\\t\\t\\toverflow: hidden;\\n\\t\\t}\\n\\t\";\n  document.head.appendChild(bodyStyleSheet);\n}\n\nfunction updateBlockLayers() {\n  var popup,\n      i,\n      hasModal = false;\n\n  for (i = openedPopups.length - 1; i >= 0; i--) {\n    popup = openedPopups[i];\n\n    if (hasModal) {\n      popup._hideBlockLayer = true;\n    } else {\n      if (popup.isModal()) {\n        // eslint-disable-line\n        popup._hideBlockLayer = false;\n        hasModal = true;\n      }\n    }\n  }\n\n  updateBodyScrolling(hasModal);\n}\n\nfunction updateBodyScrolling(hasModal) {\n  if (isBodyScrollingDisabled === hasModal) {\n    return;\n  }\n\n  createBLyBackStyle();\n\n  if (hasModal) {\n    addBodyStyles();\n  } else {\n    removeBodyStyles();\n  }\n\n  isBodyScrollingDisabled = hasModal;\n}\n\nfunction addBodyStyles() {\n  document.body.style.top = \"-\".concat(window.pageYOffset, \"px\");\n  document.body.classList.add(\"ui5-popup-BLy--back\");\n}\n\nfunction removeBodyStyles() {\n  document.body.classList.remove(\"ui5-popup-BLy--back\");\n  window.scrollTo(0, -parseFloat(document.body.style.top));\n  document.body.style.top = \"\";\n}\n/**\n * @class\n * <h3 class=\"comment-api-title\">Overview</h3>\n * Represents a base class for all popup Web Components.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Popup\n * @extends sap.ui.webcomponents.base.UI5Element\n * @public\n */\n\n\nvar Popup = /*#__PURE__*/function (_UI5Element) {\n  _inherits(Popup, _UI5Element);\n\n  var _super = _createSuper(Popup);\n\n  _createClass(Popup, null, [{\n    key: \"hitTest\",\n    value: function hitTest(popup, event) {\n      var indexOf = openedPopups.indexOf(popup);\n      var openedPopup;\n\n      for (var i = indexOf; i < openedPopups.length; i++) {\n        openedPopup = openedPopups[i];\n\n        if (openedPopup.hitTest(event)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"hasModalPopup\",\n    value: function hasModalPopup() {\n      for (var i = 0; i < openedPopups.length; i++) {\n        if (openedPopups[i].isModal()) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"metadata\",\n    get: function get() {\n      return metadata;\n    }\n  }, {\n    key: \"styles\",\n    get: function get() {\n      return styles;\n    }\n  }]);\n\n  function Popup() {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.call(this);\n    _this._documentKeyDownHandler = _this.documentKeyDown.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"isTopPopup\",\n    value: function isTopPopup() {\n      return openedPopups.indexOf(this) === openedPopups.length - 1;\n    }\n  }, {\n    key: \"isModal\",\n    value: function isModal() {\n      return true;\n    }\n  }, {\n    key: \"documentKeyDown\",\n    value: function documentKeyDown(event) {\n      if (isEscape(event) && this.isTopPopup()) {\n        this.escPressed = true;\n        this.close();\n      }\n    }\n  }, {\n    key: \"getPopupDomRef\",\n    value: function getPopupDomRef() {\n      var domRef = this.getDomRef();\n      return domRef && domRef.querySelector(\".ui5-popup-root\");\n    }\n  }, {\n    key: \"hitTest\",\n    value: function hitTest(_event) {\n      return true;\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      this.fireEvent(\"beforeOpen\", {});\n      this._isFirstTimeRendered = false;\n      this._zIndex = getNextZIndex();\n      openedPopups.push(this);\n      addOpenedPopup(this);\n      updateBlockLayers();\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.fireEvent(\"beforeClose\", {\n        escPressed: this.escPressed\n      }, true);\n      this.escPressed = false;\n      var index = openedPopups.indexOf(this);\n      openedPopups.splice(index, 1);\n\n      if (this.opened) {\n        removeOpenedPopup(this);\n      }\n\n      updateBlockLayers();\n    }\n  }, {\n    key: \"initInitialFocus\",\n    value: function initInitialFocus() {\n      var initialFocus = this.initialFocus;\n      var initialFocusDomRef = this.initialFocus;\n\n      if (initialFocus && typeof initialFocus === \"string\") {\n        initialFocusDomRef = document.getElementById(initialFocus);\n\n        if (!initialFocusDomRef) {\n          var parentHost = getParentHost(this);\n\n          if (parentHost) {\n            initialFocusDomRef = parentHost.shadowRoot.querySelector(\"#\".concat(initialFocus));\n          }\n        }\n      }\n\n      this._initialFocusDomRef = initialFocusDomRef;\n    }\n  }, {\n    key: \"onFirstTimeAfterRendering\",\n    value: function onFirstTimeAfterRendering() {\n      if (this.isTopPopup()) {\n        this.initInitialFocus();\n        this.setInitialFocus(this.getPopupDomRef());\n      }\n\n      this.fireEvent(\"afterOpen\", {});\n    }\n  }, {\n    key: \"onAfterRendering\",\n    value: function onAfterRendering() {\n      if (!this.opened) {\n        return;\n      }\n\n      if (!this._isFirstTimeRendered) {\n        this.onFirstTimeAfterRendering();\n        this._isFirstTimeRendered = true;\n      }\n    }\n  }, {\n    key: \"setInitialFocus\",\n    value: function setInitialFocus(container) {\n      if (this._disableInitialFocus) {\n        return;\n      }\n\n      if (this._initialFocusDomRef) {\n        if (this._initialFocusDomRef !== document.activeElement) {\n          this._initialFocusDomRef.focus();\n        }\n\n        return;\n      }\n\n      if (!container) {\n        return;\n      }\n\n      var focusableElement = getFirstFocusableElement(container);\n\n      if (focusableElement) {\n        focusableElement.focus();\n      } else {\n        container.focus();\n      }\n    }\n  }, {\n    key: \"_onfocusin\",\n    value: function _onfocusin(event) {\n      this.preserveFocus(event, this.getPopupDomRef());\n    }\n  }, {\n    key: \"preserveFocus\",\n    value: function preserveFocus(event, container) {\n      if (!this.isTopPopup()) {\n        return;\n      }\n\n      var target = event.target;\n\n      while (target.shadowRoot && target.shadowRoot.activeElement) {\n        target = target.shadowRoot.activeElement;\n      }\n\n      var focusableElement;\n      var isSpecialCase = false;\n\n      switch (target.id) {\n        case \"\".concat(this._id, \"-firstfe\"):\n          focusableElement = getLastFocusableElement(container);\n          isSpecialCase = true;\n          break;\n\n        case \"\".concat(this._id, \"-lastfe\"):\n          focusableElement = getFirstFocusableElement(container);\n          isSpecialCase = true;\n          break;\n\n        case \"\".concat(this._id, \"-blocklayer\"):\n          focusableElement = this._currentFocusedElement || getFirstFocusableElement(container);\n          isSpecialCase = true;\n          break;\n      }\n\n      if (focusableElement) {\n        focusableElement.focus();\n      } else if (isSpecialCase) {\n        container.focus();\n      }\n\n      this._currentFocusedElement = focusableElement || document.activeElement;\n    }\n  }, {\n    key: \"storeCurrentFocus\",\n    value: function storeCurrentFocus() {\n      var element = document.activeElement;\n\n      while (element.shadowRoot && element.shadowRoot.activeElement) {\n        element = element.shadowRoot.activeElement;\n      }\n\n      this._lastFocusableElement = element && typeof element.focus === \"function\" ? element : null;\n    }\n  }, {\n    key: \"resetFocus\",\n    value: function resetFocus() {\n      if (!this._lastFocusableElement) {\n        return;\n      }\n\n      var lastFocusableElement = this._lastFocusableElement;\n\n      if (lastFocusableElement) {\n        lastFocusableElement.focus();\n      }\n\n      this._lastFocusableElement = null;\n    }\n  }, {\n    key: \"onExitDOM\",\n    value: function onExitDOM() {\n      removeBodyStyles();\n    }\n  }, {\n    key: \"hasHeader\",\n    get: function get() {\n      var hasHeaderText = this.headerText && this.headerText.length;\n      return !!(hasHeaderText || this.header.length);\n    }\n  }, {\n    key: \"hasFooter\",\n    get: function get() {\n      return !!this.footer.length;\n    }\n  }, {\n    key: \"role\",\n    get: function get() {\n      return \"heading\";\n    }\n  }]);\n\n  return Popup;\n}(UI5Element);\n\nexport default Popup;","map":{"version":3,"sources":["/Users/juanzorrilla/Documents/SAPUI5/personal-ui5/node_modules/@ui5/webcomponents/dist/Popup.js"],"names":["UI5Element","getFirstFocusableElement","getLastFocusableElement","Integer","isEscape","styles","addOpenedPopup","removeOpenedPopup","getNextZIndex","metadata","managedSlots","slots","type","HTMLElement","header","footer","properties","initialFocus","String","headerText","opened","Boolean","_zIndex","noAttribute","_hideBlockLayer","_disableInitialFocus","events","beforeOpen","afterOpen","beforeClose","escPressed","afterClose","openedPopups","isBodyScrollingDisabled","customBLyBackStyleInserted","getParentHost","node","host","parentNode","createBLyBackStyle","bodyStyleSheet","document","createElement","innerHTML","head","appendChild","updateBlockLayers","popup","i","hasModal","length","isModal","updateBodyScrolling","addBodyStyles","removeBodyStyles","body","style","top","window","pageYOffset","classList","add","remove","scrollTo","parseFloat","Popup","event","indexOf","openedPopup","hitTest","_documentKeyDownHandler","documentKeyDown","bind","isTopPopup","close","domRef","getDomRef","querySelector","_event","fireEvent","_isFirstTimeRendered","push","index","splice","initialFocusDomRef","getElementById","parentHost","shadowRoot","_initialFocusDomRef","initInitialFocus","setInitialFocus","getPopupDomRef","onFirstTimeAfterRendering","container","activeElement","focus","focusableElement","preserveFocus","target","isSpecialCase","id","_id","_currentFocusedElement","element","_lastFocusableElement","lastFocusableElement","hasHeaderText"],"mappings":"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","sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport { getFirstFocusableElement, getLastFocusableElement } from \"@ui5/webcomponents-base/dist/util/FocusableElements.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport { isEscape } from \"@ui5/webcomponents-base/dist/Keys.js\";\n\n// Styles\nimport styles from \"./generated/themes/Popup.css.js\";\n\nimport { addOpenedPopup, removeOpenedPopup } from \"./popup-utils/OpenedPopupsRegistry.js\";\nimport { getNextZIndex } from \"./popup-utils/PopupUtils.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\tmanagedSlots: true,\n\tslots: /** @lends  sap.ui.webcomponents.main.Popup.prototype */ {\n\n\t\t/**\n\t\t * Defines the content of the Web Component.\n\t\t * @type {Node[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\ttype: HTMLElement,\n\t\t},\n\n\t\t/**\n\t\t * Defines the header HTML Element.\n\t\t *\n\t\t * @type {HTMLElement[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\theader: {\n\t\t\ttype: HTMLElement,\n\t\t},\n\n\t\t/**\n\t\t * Defines the footer HTML Element.\n\t\t *\n\t\t * @type {HTMLElement[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\tfooter: {\n\t\t\ttype: HTMLElement,\n\t\t},\n\t},\n\tproperties: /** @lends  sap.ui.webcomponents.main.Popup.prototype */ {\n\t\t/**\n\t\t * Defines the ID of the HTML Element, which will get the initial focus.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tinitialFocus: {\n\t\t\ttype: String,\n\t\t},\n\n\t\t/**\n\t\t * Defines the header text.\n\t\t * <br><br>\n\t\t * <b>Note:</b> If <code>header</code> slot is provided, the <code>headerText</code> is ignored.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\theaderText: {\n\t\t\ttype: String,\n\t\t},\n\n\t\t/**\n\t\t * Indicates if the elements is on focus\n\t\t * @private\n\t\t */\n\t\topened: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_zIndex: {\n\t\t\ttype: Integer,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t_hideBlockLayer: {\n\t\t\ttype: Boolean,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\t_disableInitialFocus: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tevents: /** @lends  sap.ui.webcomponents.main.Popup.prototype */ {\n\n\t\t/**\n\t\t * Fired before the component is opened.\n\t\t *\n\t\t * @public\n\t\t * @event\n\t\t */\n\n\t\tbeforeOpen: {},\n\t\t/**\n\t\t * Fired after the component is opened.\n\t\t *\n\t\t * @public\n\t\t * @event\n\t\t */\n\n\t\tafterOpen: {},\n\t\t/**\n\t\t * Fired before the component is closed.\n\t\t *\n\t\t * @public\n\t\t * @event\n\t\t * @param {Boolean} escPressed Indicates that <code>ESC</code> key has triggered the event.\n\t\t */\n\n\t\tbeforeClose: {\n\t\t\tescPressed: { type: Boolean },\n\t\t},\n\n\t\t/**\n\t\t * Fired after the component is closed.\n\t\t *\n\t\t * @public\n\t\t * @event\n\t\t */\n\t\tafterClose: {},\n\t},\n};\n\nconst openedPopups = [];\nlet isBodyScrollingDisabled = false;\nlet customBLyBackStyleInserted = false;\n\nfunction getParentHost(node) {\n\twhile (node && !node.host) {\n\t\tnode = node.parentNode;\n\t}\n\n\treturn node && node.host;\n}\n\nfunction createBLyBackStyle() {\n\tif (customBLyBackStyleInserted) {\n\t\treturn;\n\t}\n\n\tcustomBLyBackStyleInserted = true;\n\n\tconst bodyStyleSheet = document.createElement(\"style\");\n\tbodyStyleSheet.type = \"text/css\";\n\tbodyStyleSheet.innerHTML = `\n\t\t.ui5-popup-BLy--back {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tposition: fixed;\n\t\t\toverflow: hidden;\n\t\t}\n\t`;\n\tdocument.head.appendChild(bodyStyleSheet);\n}\n\nfunction updateBlockLayers() {\n\tlet popup,\n\t\ti,\n\t\thasModal = false;\n\n\tfor (i = openedPopups.length - 1; i >= 0; i--) {\n\t\tpopup = openedPopups[i];\n\t\tif (hasModal) {\n\t\t\tpopup._hideBlockLayer = true;\n\t\t} else {\n\t\t\tif (popup.isModal()) { // eslint-disable-line\n\t\t\t\tpopup._hideBlockLayer = false;\n\t\t\t\thasModal = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateBodyScrolling(hasModal);\n}\n\nfunction updateBodyScrolling(hasModal) {\n\tif (isBodyScrollingDisabled === hasModal) {\n\t\treturn;\n\t}\n\n\tcreateBLyBackStyle();\n\n\tif (hasModal) {\n\t\taddBodyStyles();\n\t} else {\n\t\tremoveBodyStyles();\n\t}\n\tisBodyScrollingDisabled = hasModal;\n}\n\nfunction addBodyStyles() {\n\tdocument.body.style.top = `-${window.pageYOffset}px`;\n\tdocument.body.classList.add(\"ui5-popup-BLy--back\");\n}\n\nfunction removeBodyStyles() {\n\tdocument.body.classList.remove(\"ui5-popup-BLy--back\");\n\twindow.scrollTo(0, -parseFloat(document.body.style.top));\n\tdocument.body.style.top = \"\";\n}\n\n/**\n * @class\n * <h3 class=\"comment-api-title\">Overview</h3>\n * Represents a base class for all popup Web Components.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Popup\n * @extends sap.ui.webcomponents.base.UI5Element\n * @public\n */\nclass Popup extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic hitTest(popup, event) {\n\t\tconst indexOf = openedPopups.indexOf(popup);\n\t\tlet openedPopup;\n\n\t\tfor (let i = indexOf; i < openedPopups.length; i++) {\n\t\t\topenedPopup = openedPopups[i];\n\t\t\tif (openedPopup.hitTest(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic hasModalPopup() {\n\t\tfor (let i = 0; i < openedPopups.length; i++) {\n\t\t\tif (openedPopups[i].isModal()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._documentKeyDownHandler = this.documentKeyDown.bind(this);\n\t}\n\n\tisTopPopup() {\n\t\treturn openedPopups.indexOf(this) === openedPopups.length - 1;\n\t}\n\n\tisModal() {\n\t\treturn true;\n\t}\n\n\tdocumentKeyDown(event) {\n\t\tif (isEscape(event) && this.isTopPopup()) {\n\t\t\tthis.escPressed = true;\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tgetPopupDomRef() {\n\t\tconst domRef = this.getDomRef();\n\t\treturn domRef && domRef.querySelector(\".ui5-popup-root\");\n\t}\n\n\thitTest(_event) {\n\t\treturn true;\n\t}\n\n\topen() {\n\t\tthis.fireEvent(\"beforeOpen\", { });\n\n\t\tthis._isFirstTimeRendered = false;\n\n\t\tthis._zIndex = getNextZIndex();\n\t\topenedPopups.push(this);\n\t\taddOpenedPopup(this);\n\n\n\t\tupdateBlockLayers();\n\t}\n\n\tclose() {\n\t\tthis.fireEvent(\"beforeClose\", {\n\t\t\tescPressed: this.escPressed,\n\t\t}, true);\n\n\t\tthis.escPressed = false;\n\n\t\tconst index = openedPopups.indexOf(this);\n\t\topenedPopups.splice(index, 1);\n\n\t\tif (this.opened) {\n\t\t\tremoveOpenedPopup(this);\n\t\t}\n\n\t\tupdateBlockLayers();\n\t}\n\n\tinitInitialFocus() {\n\t\tconst initialFocus = this.initialFocus;\n\t\tlet initialFocusDomRef = this.initialFocus;\n\n\t\tif (initialFocus && typeof initialFocus === \"string\") {\n\t\t\tinitialFocusDomRef = document.getElementById(initialFocus);\n\n\t\t\tif (!initialFocusDomRef) {\n\t\t\t\tconst parentHost = getParentHost(this);\n\t\t\t\tif (parentHost) {\n\t\t\t\t\tinitialFocusDomRef = parentHost.shadowRoot.querySelector(`#${initialFocus}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._initialFocusDomRef = initialFocusDomRef;\n\t}\n\n\tonFirstTimeAfterRendering() {\n\t\tif (this.isTopPopup()) {\n\t\t\tthis.initInitialFocus();\n\t\t\tthis.setInitialFocus(this.getPopupDomRef());\n\t\t}\n\n\t\tthis.fireEvent(\"afterOpen\", {});\n\t}\n\n\tonAfterRendering() {\n\t\tif (!this.opened) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._isFirstTimeRendered) {\n\t\t\tthis.onFirstTimeAfterRendering();\n\t\t\tthis._isFirstTimeRendered = true;\n\t\t}\n\t}\n\n\tsetInitialFocus(container) {\n\t\tif (this._disableInitialFocus) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._initialFocusDomRef) {\n\t\t\tif (this._initialFocusDomRef !== document.activeElement) {\n\t\t\t\tthis._initialFocusDomRef.focus();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (!container) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focusableElement = getFirstFocusableElement(container);\n\n\t\tif (focusableElement) {\n\t\t\tfocusableElement.focus();\n\t\t} else {\n\t\t\tcontainer.focus();\n\t\t}\n\t}\n\n\t_onfocusin(event) {\n\t\tthis.preserveFocus(event, this.getPopupDomRef());\n\t}\n\n\tpreserveFocus(event, container) {\n\t\tif (!this.isTopPopup()) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet target = event.target;\n\n\t\twhile (target.shadowRoot && target.shadowRoot.activeElement) {\n\t\t\ttarget = target.shadowRoot.activeElement;\n\t\t}\n\n\t\tlet focusableElement;\n\t\tlet isSpecialCase = false;\n\n\t\tswitch (target.id) {\n\t\tcase `${this._id}-firstfe`:\n\t\t\tfocusableElement = getLastFocusableElement(container);\n\t\t\tisSpecialCase = true;\n\t\t\tbreak;\n\t\tcase `${this._id}-lastfe`:\n\t\t\tfocusableElement = getFirstFocusableElement(container);\n\t\t\tisSpecialCase = true;\n\t\t\tbreak;\n\t\tcase `${this._id}-blocklayer`:\n\t\t\tfocusableElement = this._currentFocusedElement\n\t\t\t\t|| getFirstFocusableElement(container);\n\t\t\tisSpecialCase = true;\n\t\t\tbreak;\n\t\t}\n\n\t\tif (focusableElement) {\n\t\t\tfocusableElement.focus();\n\t\t} else if (isSpecialCase) {\n\t\t\tcontainer.focus();\n\t\t}\n\n\t\tthis._currentFocusedElement = focusableElement || document.activeElement;\n\t}\n\n\tstoreCurrentFocus() {\n\t\tlet element = document.activeElement;\n\n\t\twhile (element.shadowRoot && element.shadowRoot.activeElement) {\n\t\t\telement = element.shadowRoot.activeElement;\n\t\t}\n\n\t\tthis._lastFocusableElement = (element && typeof element.focus === \"function\") ? element : null;\n\t}\n\n\tresetFocus() {\n\t\tif (!this._lastFocusableElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lastFocusableElement = this._lastFocusableElement;\n\t\tif (lastFocusableElement) {\n\t\t\tlastFocusableElement.focus();\n\t\t}\n\n\t\tthis._lastFocusableElement = null;\n\t}\n\n\tonExitDOM() {\n\t\tremoveBodyStyles();\n\t}\n\n\tget hasHeader() {\n\t\tconst hasHeaderText = this.headerText && this.headerText.length;\n\t\treturn !!(hasHeaderText || this.header.length);\n\t}\n\n\tget hasFooter() {\n\t\treturn !!this.footer.length;\n\t}\n\n\tget role() {\n\t\treturn \"heading\";\n\t}\n}\n\nexport default Popup;\n"]},"metadata":{},"sourceType":"module"}