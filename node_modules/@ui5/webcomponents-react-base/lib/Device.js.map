{"version":3,"file":"Device.js","sources":["../src/Device/EventRegistry.ts","../src/utils/Logger.ts","../src/Device/utils.ts","../src/Device/Media.ts","../src/Device/Orientation.ts","../src/Device/Resize.ts","../src/Device/Support.ts","../src/Device/index.ts"],"sourcesContent":["export class EventRegistry {\n  public static mEventRegistry = {};\n\n  public static attachEvent(sEventId, fnFunction, oListener?) {\n    if (!EventRegistry.mEventRegistry[sEventId]) {\n      EventRegistry.mEventRegistry[sEventId] = [];\n    }\n    EventRegistry.mEventRegistry[sEventId].push({\n      oListener,\n      fFunction: fnFunction\n    });\n  }\n\n  public static detachEvent(sEventId, fnFunction, oListener?) {\n    const aEventListeners = EventRegistry.mEventRegistry[sEventId];\n\n    if (!aEventListeners) {\n      return;\n    }\n\n    for (let i = 0, iL = aEventListeners.length; i < iL; i++) {\n      if (aEventListeners[i].fFunction === fnFunction && aEventListeners[i].oListener === oListener) {\n        aEventListeners.splice(i, 1);\n        break;\n      }\n    }\n    if (aEventListeners.length === 0) {\n      delete EventRegistry.mEventRegistry[sEventId];\n    }\n  }\n\n  public static fireEvent(sEventId, mParameters?) {\n    let aEventListeners = EventRegistry.mEventRegistry[sEventId];\n    let oInfo;\n    if (aEventListeners) {\n      aEventListeners = aEventListeners.slice();\n      for (let i = 0, iL = aEventListeners.length; i < iL; i++) {\n        oInfo = aEventListeners[i];\n        oInfo.fFunction.call(oInfo.oListener || window, mParameters);\n      }\n    }\n  }\n}\n","/* eslint-disable no-console,no-unused-expressions */\n\nconst pad0 = (i: any, w: number) => `000${String(i)}`.slice(-w);\n\nexport enum LOG_LEVEL {\n  FATAL = 0,\n  ERROR = 1,\n  WARNING = 2,\n  INFO = 3,\n  DEBUG = 4,\n  TRACE = 5\n}\n\nclass DeviceLogger {\n  public defaultComponent: string;\n  public sWindowName = window.top === window ? '' : `[${window.location.pathname.split('/').slice(-1)[0]}] `;\n\n  constructor(defaultComponent = 'DEVICE') {\n    this.log(LOG_LEVEL.INFO, 'Device API logging initialized');\n    this.defaultComponent = defaultComponent;\n    return this;\n  }\n\n  public for(defaultComponent: string) {\n    return new DeviceLogger(defaultComponent);\n  }\n\n  public log(iLevel: LOG_LEVEL, sMessage: string, sComponent?: string) {\n    sComponent = sComponent || this.defaultComponent || '';\n    const oNow = new Date();\n    const oLogEntry = {\n      time: `${pad0(oNow.getHours(), 2)}:${pad0(oNow.getMinutes(), 2)}:${pad0(oNow.getSeconds(), 2)}`,\n      date: `${pad0(oNow.getFullYear(), 4)}-${pad0(oNow.getMonth() + 1, 2)}-${pad0(oNow.getDate(), 2)}`,\n      timestamp: oNow.getTime(),\n      level: iLevel,\n      message: sMessage || '',\n      component: sComponent || ''\n    };\n    if (window.console) {\n      const logText = `${oLogEntry.date} ${oLogEntry.time} ${this.sWindowName}${oLogEntry.message} - ${oLogEntry.component}`;\n      switch (iLevel) {\n        case LOG_LEVEL.FATAL:\n        case LOG_LEVEL.ERROR:\n          console.error(logText);\n          break;\n        case LOG_LEVEL.WARNING:\n          console.warn(logText);\n          break;\n        case LOG_LEVEL.INFO:\n          console.info ? console.info(logText) : console.log(logText);\n          break; // info not available in iOS simulator\n        case LOG_LEVEL.DEBUG:\n          console.debug ? console.debug(logText) : console.log(logText);\n          break; // debug not available in IE, fallback to log\n        case LOG_LEVEL.TRACE:\n          console.trace ? console.trace(logText) : console.log(logText);\n          break; // trace not available in IE, fallback to log\n      }\n    }\n    return oLogEntry;\n  }\n\n  //  Public API\n  public fatal(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.FATAL, msg, component);\n  }\n\n  public error(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.ERROR, msg, component);\n  }\n\n  public warning(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.WARNING, msg, component);\n  }\n\n  public info(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.INFO, msg, component);\n  }\n\n  public debug(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.DEBUG, msg, component);\n  }\n\n  public trace(msg: string, component?: string) {\n    return this.log(LOG_LEVEL.TRACE, msg, component);\n  }\n}\n\nexport const Logger = new DeviceLogger();\n","export const windowSize = () => {\n  return [window.innerWidth, window.innerHeight];\n};\n\nexport const changeRootCSSClass = (sClassName, bRemove, sPrefix?) => {\n  const oRoot = document.documentElement;\n  if (oRoot.className.length === 0) {\n    if (!bRemove) {\n      oRoot.className = sClassName;\n    }\n  } else {\n    const aCurrentClasses = oRoot.className.split(' ');\n    let sNewClasses = '';\n    aCurrentClasses.forEach((currentClass) => {\n      // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with\n      if ((sPrefix && currentClass.indexOf(sPrefix) !== 0) || (!sPrefix && currentClass !== sClassName)) {\n        sNewClasses = `${sNewClasses + currentClass} `;\n      }\n    });\n    if (!bRemove) {\n      sNewClasses += sClassName;\n    }\n    oRoot.className = sNewClasses;\n  }\n};\n\nexport const getQuery = (from, to, unit) => {\n  unit = unit || 'px';\n  let q = 'all';\n  if (from > 0) {\n    q = `${q} and (min-width:${from}${unit})`;\n  }\n  if (to > 0) {\n    q = `${q} and (max-width:${to}${unit})`;\n  }\n  return q;\n};\n\nexport const convertToPx = (val, unit?) => {\n  if (unit === 'em' || unit === 'rem') {\n    const s = window.getComputedStyle ?? ((element: any) => element.currentStyle);\n    const x = s(document.documentElement).fontSize;\n    const f = x && x.indexOf('px') >= 0 ? parseFloat(x) : 16;\n    return val * f;\n  }\n  return val;\n};\n\nexport const matchLegacyBySize = (from, to, unit, size) => {\n  from = convertToPx(from, unit);\n  to = convertToPx(to, unit);\n\n  const width = size[0];\n  const a = from < 0 || from <= width;\n  const b = to < 0 || width <= to;\n  return a && b;\n};\n","import { Logger } from '../utils/Logger';\nimport { EventRegistry } from './EventRegistry';\nimport { changeRootCSSClass, getQuery, matchLegacyBySize, windowSize } from './utils';\n\nexport enum RANGESETS {\n  SAP_3STEPS = '3Step',\n  SAP_4STEPS = '4Step',\n  SAP_6STEPS = '6Step',\n  SAP_STANDARD = 'Std',\n  SAP_STANDARD_EXTENDED = 'StdExt'\n}\n\n// tslint:disable prefer-for-of variable-name one-variable-per-declaration\nlet support;\nconst defaultRangeSet = RANGESETS.SAP_STANDARD;\nconst querysets = {};\nconst mediaCurrentwidth = null;\n\nconst matchLegacy = (from, to, unit) => matchLegacyBySize(from, to, unit, windowSize());\nconst match = (from, to, unit) => {\n  const q = getQuery(from, to, unit);\n  const mm = window.matchMedia(q); // FF returns null when running within an iframe with display:none\n  return mm && mm.matches;\n};\nconst refreshCSSClasses = (sSetName, sRangeName, bRemove?) => {\n  const sClassPrefix = `sapUiMedia-${sSetName}-`;\n  changeRootCSSClass(sClassPrefix + sRangeName, bRemove, sClassPrefix);\n};\n\nexport class Media {\n  private readonly mediaTimeout;\n  public matches;\n\n  constructor(supportInstance) {\n    support = supportInstance;\n    this.mediaTimeout = support.matchmedialistener ? 0 : 100;\n    this.matches = support.matchmedia ? match : matchLegacy;\n    this.initRangeSet();\n    this.initRangeSet(RANGESETS.SAP_STANDARD_EXTENDED);\n  }\n\n  public RANGESETS = RANGESETS;\n  private static predefinedRangeSets = {\n    [RANGESETS.SAP_3STEPS]: {\n      points: [520, 960],\n      unit: 'px',\n      name: RANGESETS.SAP_3STEPS,\n      names: ['S', 'M', 'L']\n    },\n    [RANGESETS.SAP_4STEPS]: {\n      points: [520, 760, 960],\n      unit: 'px',\n      name: RANGESETS.SAP_4STEPS,\n      names: ['S', 'M', 'L', 'XL']\n    },\n    [RANGESETS.SAP_6STEPS]: {\n      points: [241, 400, 541, 768, 960],\n      unit: 'px',\n      name: RANGESETS.SAP_6STEPS,\n      names: ['XS', 'S', 'M', 'L', 'XL', 'XXL']\n    },\n    [RANGESETS.SAP_STANDARD]: {\n      points: [600, 1024],\n      unit: 'px',\n      name: RANGESETS.SAP_STANDARD,\n      names: ['Phone', 'Tablet', 'Desktop']\n    },\n    [RANGESETS.SAP_STANDARD_EXTENDED]: {\n      points: [600, 1024, 1440],\n      unit: 'px',\n      name: RANGESETS.SAP_STANDARD_EXTENDED,\n      names: ['Phone', 'Tablet', 'Desktop', 'LargeDesktop']\n    }\n  };\n\n  private static getRangeInfo(sSetName, iRangeIdx) {\n    const q = querysets[sSetName].queries[iRangeIdx];\n    const info = { from: q.from, unit: querysets[sSetName].unit } as any;\n    if (q.to >= 0) {\n      info.to = q.to;\n    }\n    if (querysets[sSetName].names) {\n      info.name = querysets[sSetName].names[iRangeIdx];\n    }\n    return info;\n  }\n\n  private checkQueries(name, infoOnly, fnMatches?) {\n    fnMatches = fnMatches || this.matches;\n    if (querysets[name]) {\n      const aQueries = querysets[name].queries;\n      let info = null;\n      for (let i = 0, len = aQueries.length; i < len; i++) {\n        const q = aQueries[i];\n        if ((q !== querysets[name].currentquery || infoOnly) && fnMatches(q.from, q.to, querysets[name].unit)) {\n          if (!infoOnly) {\n            querysets[name].currentquery = q;\n          }\n          if (!querysets[name].noClasses && querysets[name].names && !infoOnly) {\n            refreshCSSClasses(name, querysets[name].names[i]);\n          }\n          info = Media.getRangeInfo(name, i);\n        }\n      }\n\n      return info;\n    }\n    Logger.warning(`No queryset with name ${name} found`, 'DEVICE.MEDIA');\n    return null;\n  }\n\n  private handleChange(name) {\n    if (!support.matchmedialistener && mediaCurrentwidth === windowSize()[0]) {\n      return; // Skip unnecessary resize events\n    }\n\n    if (querysets[name].timer) {\n      clearTimeout(querysets[name].timer);\n      querysets[name].timer = null;\n    }\n\n    querysets[name].timer = setTimeout(() => {\n      const mParams = this.checkQueries(name, false);\n      if (mParams) {\n        EventRegistry.fireEvent(`media_${name}`, mParams);\n      }\n    }, this.mediaTimeout);\n  }\n\n  public attachHandler(fnFunction, oListener, sName) {\n    const name = sName || defaultRangeSet;\n    EventRegistry.attachEvent(`media_${name}`, fnFunction, oListener);\n  }\n\n  public detachHandler(fnFunction, oListener, sName) {\n    const name = sName || defaultRangeSet;\n    EventRegistry.detachEvent(`media_${name}`, fnFunction, oListener);\n  }\n\n  public initRangeSet(sName?, aRangeBorders?, sUnit?, aRangeNames?, bSuppressClasses?) {\n    let oConfig;\n    if (!sName) {\n      oConfig = Media.predefinedRangeSets[defaultRangeSet];\n    } else if (sName && Media.predefinedRangeSets[sName]) {\n      oConfig = Media.predefinedRangeSets[sName];\n    } else {\n      oConfig = {\n        name: sName,\n        unit: (sUnit || 'px').toLowerCase(),\n        points: aRangeBorders || [],\n        names: aRangeNames,\n        noClasses: !!bSuppressClasses\n      };\n    }\n\n    if (this.hasRangeSet(oConfig.name)) {\n      Logger.info(`Range set ${oConfig.name} has already been initialized`, 'DEVICE.MEDIA');\n      return;\n    }\n\n    sName = oConfig.name;\n    oConfig.queries = [];\n    oConfig.timer = null;\n    oConfig.currentquery = null;\n    oConfig.listener = () => this.handleChange(sName);\n\n    let from;\n    let to;\n    let query;\n    const aPoints = oConfig.points;\n    for (let i = 0, len = aPoints.length; i <= len; i++) {\n      from = i === 0 ? 0 : aPoints[i - 1];\n      to = i === aPoints.length ? -1 : aPoints[i];\n      query = getQuery(from, to, oConfig.unit);\n      oConfig.queries.push({\n        query,\n        from,\n        to\n      });\n    }\n\n    if (oConfig.names && oConfig.names.length !== oConfig.queries.length) {\n      oConfig.names = null;\n    }\n\n    querysets[oConfig.name] = oConfig;\n\n    if (support.matchmedialistener) {\n      // FF, Safari, Chrome, IE10?\n      const queries = oConfig.queries;\n      for (const q of queries) {\n        q.media = window.matchMedia(q.query);\n        q.media.addListener(oConfig.listener);\n      }\n    } else {\n      // IE, Safari (<6?)\n      window.addEventListener('resize', oConfig.listener, false);\n      window.addEventListener('orientationchange', oConfig.listener, false);\n    }\n\n    oConfig.listener();\n  }\n\n  public getCurrentRange(sName, iWidth) {\n    if (!this.hasRangeSet(sName)) {\n      return null;\n    }\n    return this.checkQueries(\n      sName,\n      true,\n      isNaN(iWidth) ? null : (from, to, unit) => matchLegacyBySize(from, to, unit, [iWidth, 0])\n    );\n  }\n\n  public hasRangeSet(sName) {\n    return sName && !!querysets[sName];\n  }\n\n  public removeRangeSet(sName) {\n    if (!this.hasRangeSet(sName)) {\n      Logger.info(`RangeSet ${sName} not found, thus could not be removed.`, 'DEVICE.MEDIA');\n      return;\n    }\n\n    for (const x in RANGESETS) {\n      if (sName === RANGESETS[x]) {\n        Logger.warning('Cannot remove default rangeset - no action taken.', 'DEVICE.MEDIA');\n        return;\n      }\n    }\n\n    const oConfig = querysets[sName];\n    if (support.matchmedialistener) {\n      // FF, Safari, Chrome, IE10?\n      const queries = oConfig.queries;\n      for (const q of queries) {\n        q.media.removeListener(oConfig.listener);\n      }\n    } else {\n      // IE, Safari (<6?)\n      window.removeEventListener('resize', oConfig.listener, false);\n      window.removeEventListener('orientationchange', oConfig.listener, false);\n    }\n\n    refreshCSSClasses(sName, '', true);\n    delete EventRegistry.mEventRegistry[`media_${sName}`];\n    delete querysets[sName];\n  }\n}\n","import { EventRegistry } from './EventRegistry';\n\nexport class Orientation {\n  public landscape: boolean;\n  public portrait: boolean;\n\n  public attachHandler(fnFunction, oListener) {\n    EventRegistry.attachEvent('orientation', fnFunction, oListener);\n  }\n\n  public detachHandler(fnFunction, oListener) {\n    EventRegistry.detachEvent('orientation', fnFunction, oListener);\n  }\n}\n","import { EventRegistry } from './EventRegistry';\nimport { windowSize } from './utils';\n\nexport class Resize {\n  public width: number;\n  public height: number;\n\n  constructor() {\n    this.setResizeInfo();\n  }\n\n  public attachHandler(fnFunction, oListener) {\n    EventRegistry.attachEvent('resize', fnFunction, oListener);\n  }\n\n  public detachHandler(fnFunction, oListener) {\n    EventRegistry.detachEvent('resize', fnFunction, oListener);\n  }\n\n  public setResizeInfo() {\n    this.width = windowSize()[0];\n    this.height = windowSize()[1];\n  }\n}\n","import { supportTouch } from '@ui5/webcomponents-base/dist/Device';\nimport '@ui5/webcomponents-react-base/third-party/modernizr';\n\ndeclare const Modernizr: {\n  pointerevents: boolean;\n  matchmedia: boolean;\n  deviceorientation: boolean;\n  websockets: boolean;\n  placeholder: boolean;\n};\n\nexport class Support {\n  public touch: boolean = supportTouch();\n  public pointer: boolean = Modernizr.pointerevents;\n  public matchmedia: boolean = Modernizr.matchmedia;\n  public matchmedialistener = !!(this.matchmedia && window.matchMedia('all and (max-width:0px)'));\n  public orientation: boolean = Modernizr.deviceorientation;\n  public retina: boolean = (window as any).retina || window.devicePixelRatio >= 2;\n  public websocket: boolean = Modernizr.websockets;\n  public input = {\n    placeholder: Modernizr.placeholder\n  };\n}\n","import { getBrowser, getOS, getSystem } from '@ui5/webcomponents-base/dist/Device';\nimport { EventRegistry } from './EventRegistry';\nimport { Media } from './Media';\nimport { Orientation } from './Orientation';\nimport { Resize } from './Resize';\nimport { Support } from './Support';\nimport { windowSize } from './utils';\n\nlet iResizeTimeout;\nlet bOrientationChange = false;\nlet bResize = false;\nlet iOrientationTimeout;\nlet iClearFlagTimeout;\nlet iWindowHeightOld = windowSize()[1];\nlet iWindowWidthOld = windowSize()[0];\nlet bKeyboardOpen = false;\nlet iLastResizeTime;\nconst rInputTagRegex = /INPUT|TEXTAREA|SELECT/;\nlet bSkipFirstResize;\n\nclass DeviceBuilder {\n  public os = getOS();\n  public browser = getBrowser();\n  public support = new Support();\n  public system = getSystem();\n  public media = new Media(this.support);\n  public orientation = new Orientation();\n  public resize = new Resize();\n\n  constructor() {\n    // On iPhone with iOS version 7.0.x and on iPad with iOS version 7.x\n    // (tested with all versions below 7.1.1), there's an invalid resize event fired\n    // when changing the orientation while keyboard is shown.\n    bSkipFirstResize =\n      this.os.ios &&\n      this.browser.name === 'sf' &&\n      ((this.system.phone && this.os.version >= 7 && this.os.version < 7.1) ||\n        (this.system.tablet && this.os.version >= 7));\n\n    // Add handler for orientationchange and resize after initialization of Device API\n    if (this.support.touch && this.support.orientation) {\n      // logic for mobile devices which support orientationchange (like ios, android)\n      window.addEventListener('resize', this.handleMobileOrientationResizeChange, false);\n      window.addEventListener('orientationchange', this.handleMobileOrientationResizeChange, false);\n    } else {\n      // desktop browsers and windows phone/tablet which not support orientationchange\n      window.addEventListener('resize', this.handleResizeEvent, false);\n    }\n    this.setOrientationInfo();\n  }\n\n  private handleResizeEvent = () => {\n    const wasL = this.orientation.landscape;\n    const isL = this.isLandscape(false);\n    if (wasL !== isL) {\n      this.handleOrientationChange();\n    }\n    // throttle resize events because most browsers throw one or more resize events per pixel\n    // for every resize event inside the period from 150ms (starting from the first resize event),\n    // we only fire one resize event after this period\n    if (!iResizeTimeout) {\n      iResizeTimeout = window.setTimeout(this.handleResizeTimeout, 150);\n    }\n  };\n\n  private handleResizeTimeout = () => {\n    this.handleResizeChange();\n    iResizeTimeout = null;\n  };\n\n  private handleResizeChange = () => {\n    this.resize.setResizeInfo();\n    EventRegistry.fireEvent('resize', {\n      height: this.resize.height,\n      width: this.resize.width\n    });\n  };\n\n  private setOrientationInfo = () => {\n    this.orientation.landscape = this.isLandscape(true);\n    this.orientation.portrait = !this.orientation.landscape;\n  };\n\n  private handleOrientationChange = () => {\n    this.setOrientationInfo();\n    EventRegistry.fireEvent('orientation', { landscape: this.orientation.landscape });\n  };\n\n  private isLandscape = (bFromOrientationChange) => {\n    if (this.support.touch && this.support.orientation && this.os.android) {\n      // if on screen keyboard is open and the call of this method is from orientation change listener,\n      // reverse the last value. this is because when keyboard opens on android device, the height can be less\n      // than the width even in portrait mode.\n      if (bKeyboardOpen && bFromOrientationChange) {\n        return !this.orientation.landscape;\n      }\n      if (bKeyboardOpen) {\n        // when keyboard opens, the last orientation change value will be returned.\n        return this.orientation.landscape;\n      }\n    } else if (this.support.matchmedia && this.support.orientation) {\n      // most desktop browsers and windows phone/tablet which not support orientationchange\n      return !!window.matchMedia('(orientation: landscape)').matches;\n    }\n    // otherwise compare the width and height of window\n    const size = windowSize();\n    return size[0] > size[1];\n  };\n\n  private handleMobileOrientationResizeChange = (evt) => {\n    if (evt.type === 'resize') {\n      if (bSkipFirstResize && rInputTagRegex.test(document.activeElement.tagName) && !bOrientationChange) {\n        return;\n      }\n\n      const iWindowHeightNew = windowSize()[1];\n      const iWindowWidthNew = windowSize()[0];\n      const iTime = new Date().getTime();\n      // skip multiple resize events by only one orientationchange\n      if (iWindowHeightNew === iWindowHeightOld && iWindowWidthNew === iWindowWidthOld) {\n        return;\n      }\n      bResize = true;\n      // on mobile devices opening the keyboard on some devices leads to a resize event\n      // in this case only the height changes, not the width\n      if (iWindowHeightOld !== iWindowHeightNew && iWindowWidthOld === iWindowWidthNew) {\n        // Asus Transformer tablet fires two resize events when orientation changes while keyboard is open.\n        // Between these two events, only the height changes. The check of if keyboard is open has to be skipped because\n        // it may be judged as keyboard closed but the keyboard is still\n        // open which will affect the orientation detection\n        if (!iLastResizeTime || iTime - iLastResizeTime > 300) {\n          bKeyboardOpen = iWindowHeightNew < iWindowHeightOld;\n        }\n        this.handleResizeChange();\n      } else {\n        iWindowWidthOld = iWindowWidthNew;\n      }\n      iLastResizeTime = iTime;\n      iWindowHeightOld = iWindowHeightNew;\n\n      if (iClearFlagTimeout) {\n        window.clearTimeout(iClearFlagTimeout);\n        iClearFlagTimeout = null;\n      }\n      // Some Android build-in browser fires a resize event after the viewport is applied.\n      // This resize event has to be dismissed otherwise when the next orientationchange event happens,\n      // a UI5 resize event will be fired with the wrong window size.\n      iClearFlagTimeout = window.setTimeout(DeviceBuilder.clearFlags, 1200);\n    } else if (evt.type === 'orientationchange') {\n      bOrientationChange = true;\n    }\n\n    if (iOrientationTimeout) {\n      clearTimeout(iOrientationTimeout);\n      iOrientationTimeout = null;\n    }\n    iOrientationTimeout = window.setTimeout(this.handleMobileTimeout, 50);\n  };\n\n  private handleMobileTimeout = () => {\n    // with ios split view, the browser fires only resize event and no orientationchange\n    // when changing the size of a split view\n    // therefore the following if needs to be adapted with additional check of iPad with version greater or equal 9\n    // (splitview was introduced with iOS 9)\n    if (bResize && (bOrientationChange || (this.system.tablet && this.os.ios && this.os.version >= 9))) {\n      this.handleOrientationChange();\n      this.handleResizeChange();\n      bOrientationChange = false;\n      bResize = false;\n      if (iClearFlagTimeout) {\n        window.clearTimeout(iClearFlagTimeout);\n        iClearFlagTimeout = null;\n      }\n    }\n    iOrientationTimeout = null;\n  };\n\n  private static clearFlags = () => {\n    bOrientationChange = false;\n    bResize = false;\n    iClearFlagTimeout = null;\n  };\n}\n\nexport const Device = new DeviceBuilder();\n"],"names":["EventRegistry","sEventId","fnFunction","oListener","mEventRegistry","push","fFunction","aEventListeners","i","iL","length","splice","mParameters","oInfo","slice","call","window","pad0","w","String","LOG_LEVEL","DeviceLogger","defaultComponent","sWindowName","top","location","pathname","split","log","INFO","iLevel","sMessage","sComponent","oNow","Date","oLogEntry","time","getHours","getMinutes","getSeconds","date","getFullYear","getMonth","getDate","timestamp","getTime","level","message","component","console","logText","FATAL","ERROR","error","WARNING","warn","info","DEBUG","debug","TRACE","trace","msg","Logger","windowSize","innerWidth","innerHeight","changeRootCSSClass","sClassName","bRemove","sPrefix","oRoot","document","documentElement","className","aCurrentClasses","sNewClasses","forEach","currentClass","indexOf","getQuery","from","to","unit","q","convertToPx","val","s","getComputedStyle","element","currentStyle","x","fontSize","f","parseFloat","matchLegacyBySize","size","width","a","b","RANGESETS","support","defaultRangeSet","SAP_STANDARD","querysets","mediaCurrentwidth","matchLegacy","match","mm","matchMedia","matches","refreshCSSClasses","sSetName","sRangeName","sClassPrefix","Media","supportInstance","mediaTimeout","matchmedialistener","matchmedia","initRangeSet","SAP_STANDARD_EXTENDED","name","infoOnly","fnMatches","aQueries","queries","len","currentquery","noClasses","names","getRangeInfo","warning","timer","clearTimeout","setTimeout","mParams","checkQueries","fireEvent","sName","attachEvent","detachEvent","aRangeBorders","sUnit","aRangeNames","bSuppressClasses","oConfig","predefinedRangeSets","toLowerCase","points","hasRangeSet","listener","handleChange","query","aPoints","media","addListener","addEventListener","iWidth","isNaN","removeListener","removeEventListener","iRangeIdx","SAP_3STEPS","SAP_4STEPS","SAP_6STEPS","Orientation","landscape","portrait","Resize","height","setResizeInfo","Support","touch","supportTouch","pointer","Modernizr","pointerevents","orientation","deviceorientation","retina","devicePixelRatio","websocket","websockets","input","placeholder","iResizeTimeout","bOrientationChange","bResize","iOrientationTimeout","iClearFlagTimeout","iWindowHeightOld","iWindowWidthOld","bKeyboardOpen","iLastResizeTime","rInputTagRegex","bSkipFirstResize","DeviceBuilder","os","getOS","browser","getBrowser","system","getSystem","resize","handleResizeEvent","wasL","isL","isLandscape","handleOrientationChange","handleResizeTimeout","handleResizeChange","setOrientationInfo","bFromOrientationChange","android","handleMobileOrientationResizeChange","evt","type","test","activeElement","tagName","iWindowHeightNew","iWindowWidthNew","iTime","clearFlags","handleMobileTimeout","tablet","ios","version","phone","Device"],"mappings":";;;;;;;IAAaA,aAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,gCAG4BC,QAH5B,EAGsCC,UAHtC,EAGkDC,SAHlD,EAG8D;AAC1D,UAAI,CAACH,aAAa,CAACI,cAAd,CAA6BH,QAA7B,CAAL,EAA6C;AAC3CD,QAAAA,aAAa,CAACI,cAAd,CAA6BH,QAA7B,IAAyC,EAAzC;AACD;;AACDD,MAAAA,aAAa,CAACI,cAAd,CAA6BH,QAA7B,EAAuCI,IAAvC,CAA4C;AAC1CF,QAAAA,SAAS,EAATA,SAD0C;AAE1CG,QAAAA,SAAS,EAAEJ;AAF+B,OAA5C;AAID;AAXH;AAAA;AAAA,gCAa4BD,QAb5B,EAasCC,UAbtC,EAakDC,SAblD,EAa8D;AAC1D,UAAMI,eAAe,GAAGP,aAAa,CAACI,cAAd,CAA6BH,QAA7B,CAAxB;;AAEA,UAAI,CAACM,eAAL,EAAsB;AACpB;AACD;;AAED,WAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGF,eAAe,CAACG,MAArC,EAA6CF,CAAC,GAAGC,EAAjD,EAAqDD,CAAC,EAAtD,EAA0D;AACxD,YAAID,eAAe,CAACC,CAAD,CAAf,CAAmBF,SAAnB,KAAiCJ,UAAjC,IAA+CK,eAAe,CAACC,CAAD,CAAf,CAAmBL,SAAnB,KAAiCA,SAApF,EAA+F;AAC7FI,UAAAA,eAAe,CAACI,MAAhB,CAAuBH,CAAvB,EAA0B,CAA1B;AACA;AACD;AACF;;AACD,UAAID,eAAe,CAACG,MAAhB,KAA2B,CAA/B,EAAkC;AAChC,eAAOV,aAAa,CAACI,cAAd,CAA6BH,QAA7B,CAAP;AACD;AACF;AA7BH;AAAA;AAAA,8BA+B0BA,QA/B1B,EA+BoCW,WA/BpC,EA+BkD;AAC9C,UAAIL,eAAe,GAAGP,aAAa,CAACI,cAAd,CAA6BH,QAA7B,CAAtB;AACA,UAAIY,KAAJ;;AACA,UAAIN,eAAJ,EAAqB;AACnBA,QAAAA,eAAe,GAAGA,eAAe,CAACO,KAAhB,EAAlB;;AACA,aAAK,IAAIN,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGF,eAAe,CAACG,MAArC,EAA6CF,CAAC,GAAGC,EAAjD,EAAqDD,CAAC,EAAtD,EAA0D;AACxDK,UAAAA,KAAK,GAAGN,eAAe,CAACC,CAAD,CAAvB;AACAK,UAAAA,KAAK,CAACP,SAAN,CAAgBS,IAAhB,CAAqBF,KAAK,CAACV,SAAN,IAAmBa,MAAxC,EAAgDJ,WAAhD;AACD;AACF;AACF;AAzCH;;AAAA;AAAA;AAAaZ,cACGI,iBAAiB;;ACDjC;AAEA,IAAMa,IAAI,GAAG,SAAPA,IAAO,CAACT,CAAD,EAASU,CAAT;AAAA,SAAuB,aAAMC,MAAM,CAACX,CAAD,CAAZ,EAAkBM,KAAlB,CAAwB,CAACI,CAAzB,CAAvB;AAAA,CAAb;;IAEYE,SAAZ;;WAAYA;AAAAA,EAAAA,UAAAA;AAAAA,EAAAA,UAAAA;AAAAA,EAAAA,UAAAA;AAAAA,EAAAA,UAAAA;AAAAA,EAAAA,UAAAA;AAAAA,EAAAA,UAAAA;GAAAA,cAAAA;;IASNC;AAIJ,0BAAyC;AAAA,QAA7BC,gBAA6B,uEAAV,QAAU;;AAAA;;AAAA,SAHlCA,gBAGkC;AAAA,SAFlCC,WAEkC,GAFpBP,MAAM,CAACQ,GAAP,KAAeR,MAAf,GAAwB,EAAxB,cAAiCA,MAAM,CAACS,QAAP,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+B,GAA/B,EAAoCb,KAApC,CAA0C,CAAC,CAA3C,EAA8C,CAA9C,CAAjC,OAEoB;AACvC,SAAKc,GAAL,CAASR,SAAS,CAACS,IAAnB,EAAyB,gCAAzB;AACA,SAAKP,gBAAL,GAAwBA,gBAAxB;AACA,WAAO,IAAP;AACD;;;;yBAEUA,kBAA0B;AACnC,aAAO,IAAID,YAAJ,CAAiBC,gBAAjB,CAAP;AACD;;;wBAEUQ,QAAmBC,UAAkBC,YAAqB;AACnEA,MAAAA,UAAU,GAAGA,UAAU,IAAI,KAAKV,gBAAnB,IAAuC,EAApD;AACA,UAAMW,IAAI,GAAG,IAAIC,IAAJ,EAAb;AACA,UAAMC,SAAS,GAAG;AAChBC,QAAAA,IAAI,YAAKnB,IAAI,CAACgB,IAAI,CAACI,QAAL,EAAD,EAAkB,CAAlB,CAAT,cAAiCpB,IAAI,CAACgB,IAAI,CAACK,UAAL,EAAD,EAAoB,CAApB,CAArC,cAA+DrB,IAAI,CAACgB,IAAI,CAACM,UAAL,EAAD,EAAoB,CAApB,CAAnE,CADY;AAEhBC,QAAAA,IAAI,YAAKvB,IAAI,CAACgB,IAAI,CAACQ,WAAL,EAAD,EAAqB,CAArB,CAAT,cAAoCxB,IAAI,CAACgB,IAAI,CAACS,QAAL,KAAkB,CAAnB,EAAsB,CAAtB,CAAxC,cAAoEzB,IAAI,CAACgB,IAAI,CAACU,OAAL,EAAD,EAAiB,CAAjB,CAAxE,CAFY;AAGhBC,QAAAA,SAAS,EAAEX,IAAI,CAACY,OAAL,EAHK;AAIhBC,QAAAA,KAAK,EAAEhB,MAJS;AAKhBiB,QAAAA,OAAO,EAAEhB,QAAQ,IAAI,EALL;AAMhBiB,QAAAA,SAAS,EAAEhB,UAAU,IAAI;AANT,OAAlB;;AAQA,UAAIhB,MAAM,CAACiC,OAAX,EAAoB;AAClB,YAAMC,OAAO,aAAMf,SAAS,CAACK,IAAhB,cAAwBL,SAAS,CAACC,IAAlC,cAA0C,KAAKb,WAA/C,SAA6DY,SAAS,CAACY,OAAvE,gBAAoFZ,SAAS,CAACa,SAA9F,CAAb;;AACA,gBAAQlB,MAAR;AACE,eAAKV,SAAS,CAAC+B,KAAf;AACA,eAAK/B,SAAS,CAACgC,KAAf;AACEH,YAAAA,OAAO,CAACI,KAAR,CAAcH,OAAd;AACA;;AACF,eAAK9B,SAAS,CAACkC,OAAf;AACEL,YAAAA,OAAO,CAACM,IAAR,CAAaL,OAAb;AACA;;AACF,eAAK9B,SAAS,CAACS,IAAf;AACEoB,YAAAA,OAAO,CAACO,IAAR,GAAeP,OAAO,CAACO,IAAR,CAAaN,OAAb,CAAf,GAAuCD,OAAO,CAACrB,GAAR,CAAYsB,OAAZ,CAAvC;AACA;AAAO;;AACT,eAAK9B,SAAS,CAACqC,KAAf;AACER,YAAAA,OAAO,CAACS,KAAR,GAAgBT,OAAO,CAACS,KAAR,CAAcR,OAAd,CAAhB,GAAyCD,OAAO,CAACrB,GAAR,CAAYsB,OAAZ,CAAzC;AACA;AAAO;;AACT,eAAK9B,SAAS,CAACuC,KAAf;AACEV,YAAAA,OAAO,CAACW,KAAR,GAAgBX,OAAO,CAACW,KAAR,CAAcV,OAAd,CAAhB,GAAyCD,OAAO,CAACrB,GAAR,CAAYsB,OAAZ,CAAzC;AACA;AAAO;AAhBX;AAkBD;;AACD,aAAOf,SAAP;AACD;;;;0BAGY0B,KAAab,WAAoB;AAC5C,aAAO,KAAKpB,GAAL,CAASR,SAAS,CAAC+B,KAAnB,EAA0BU,GAA1B,EAA+Bb,SAA/B,CAAP;AACD;;;0BAEYa,KAAab,WAAoB;AAC5C,aAAO,KAAKpB,GAAL,CAASR,SAAS,CAACgC,KAAnB,EAA0BS,GAA1B,EAA+Bb,SAA/B,CAAP;AACD;;;4BAEca,KAAab,WAAoB;AAC9C,aAAO,KAAKpB,GAAL,CAASR,SAAS,CAACkC,OAAnB,EAA4BO,GAA5B,EAAiCb,SAAjC,CAAP;AACD;;;yBAEWa,KAAab,WAAoB;AAC3C,aAAO,KAAKpB,GAAL,CAASR,SAAS,CAACS,IAAnB,EAAyBgC,GAAzB,EAA8Bb,SAA9B,CAAP;AACD;;;0BAEYa,KAAab,WAAoB;AAC5C,aAAO,KAAKpB,GAAL,CAASR,SAAS,CAACqC,KAAnB,EAA0BI,GAA1B,EAA+Bb,SAA/B,CAAP;AACD;;;0BAEYa,KAAab,WAAoB;AAC5C,aAAO,KAAKpB,GAAL,CAASR,SAAS,CAACuC,KAAnB,EAA0BE,GAA1B,EAA+Bb,SAA/B,CAAP;AACD;;;;;;AAGI,IAAMc,MAAM,GAAG,IAAIzC,YAAJ,EAAf;;ACxFA,IAAM0C,UAAU,GAAG,SAAbA,UAAa,GAAM;AAC9B,SAAO,CAAC/C,MAAM,CAACgD,UAAR,EAAoBhD,MAAM,CAACiD,WAA3B,CAAP;AACD,CAFM;AAIA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,UAAD,EAAaC,OAAb,EAAsBC,OAAtB,EAAmC;AACnE,MAAMC,KAAK,GAAGC,QAAQ,CAACC,eAAvB;;AACA,MAAIF,KAAK,CAACG,SAAN,CAAgB/D,MAAhB,KAA2B,CAA/B,EAAkC;AAChC,QAAI,CAAC0D,OAAL,EAAc;AACZE,MAAAA,KAAK,CAACG,SAAN,GAAkBN,UAAlB;AACD;AACF,GAJD,MAIO;AACL,QAAMO,eAAe,GAAGJ,KAAK,CAACG,SAAN,CAAgB9C,KAAhB,CAAsB,GAAtB,CAAxB;AACA,QAAIgD,WAAW,GAAG,EAAlB;AACAD,IAAAA,eAAe,CAACE,OAAhB,CAAwB,UAACC,YAAD,EAAkB;AACxC;AACA,UAAKR,OAAO,IAAIQ,YAAY,CAACC,OAAb,CAAqBT,OAArB,MAAkC,CAA9C,IAAqD,CAACA,OAAD,IAAYQ,YAAY,KAAKV,UAAtF,EAAmG;AACjGQ,QAAAA,WAAW,aAAMA,WAAW,GAAGE,YAApB,MAAX;AACD;AACF,KALD;;AAMA,QAAI,CAACT,OAAL,EAAc;AACZO,MAAAA,WAAW,IAAIR,UAAf;AACD;;AACDG,IAAAA,KAAK,CAACG,SAAN,GAAkBE,WAAlB;AACD;AACF,CApBM;AAsBA,IAAMI,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD,EAAOC,EAAP,EAAWC,IAAX,EAAoB;AAC1CA,EAAAA,IAAI,GAAGA,IAAI,IAAI,IAAf;AACA,MAAIC,CAAC,GAAG,KAAR;;AACA,MAAIH,IAAI,GAAG,CAAX,EAAc;AACZG,IAAAA,CAAC,aAAMA,CAAN,6BAA0BH,IAA1B,SAAiCE,IAAjC,MAAD;AACD;;AACD,MAAID,EAAE,GAAG,CAAT,EAAY;AACVE,IAAAA,CAAC,aAAMA,CAAN,6BAA0BF,EAA1B,SAA+BC,IAA/B,MAAD;AACD;;AACD,SAAOC,CAAP;AACD,CAVM;AAYA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAMH,IAAN,EAAgB;AACzC,MAAIA,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAA9B,EAAqC;AAAA;;AACnC,QAAMI,CAAC,4BAAGtE,MAAM,CAACuE,gBAAV,yEAA+B,UAACC,OAAD;AAAA,aAAkBA,OAAO,CAACC,YAA1B;AAAA,KAAtC;AACA,QAAMC,CAAC,GAAGJ,CAAC,CAACf,QAAQ,CAACC,eAAV,CAAD,CAA4BmB,QAAtC;AACA,QAAMC,CAAC,GAAGF,CAAC,IAAIA,CAAC,CAACZ,OAAF,CAAU,IAAV,KAAmB,CAAxB,GAA4Be,UAAU,CAACH,CAAD,CAAtC,GAA4C,EAAtD;AACA,WAAOL,GAAG,GAAGO,CAAb;AACD;;AACD,SAAOP,GAAP;AACD,CARM;AAUA,IAAMS,iBAAiB,GAAG,SAApBA,iBAAoB,CAACd,IAAD,EAAOC,EAAP,EAAWC,IAAX,EAAiBa,IAAjB,EAA0B;AACzDf,EAAAA,IAAI,GAAGI,WAAW,CAACJ,IAAD,EAAOE,IAAP,CAAlB;AACAD,EAAAA,EAAE,GAAGG,WAAW,CAACH,EAAD,EAAKC,IAAL,CAAhB;AAEA,MAAMc,KAAK,GAAGD,IAAI,CAAC,CAAD,CAAlB;AACA,MAAME,CAAC,GAAGjB,IAAI,GAAG,CAAP,IAAYA,IAAI,IAAIgB,KAA9B;AACA,MAAME,CAAC,GAAGjB,EAAE,GAAG,CAAL,IAAUe,KAAK,IAAIf,EAA7B;AACA,SAAOgB,CAAC,IAAIC,CAAZ;AACD,CARM;;;IC5CKC,SAAZ;;WAAYA;AAAAA,EAAAA;AAAAA,EAAAA;AAAAA,EAAAA;AAAAA,EAAAA;AAAAA,EAAAA;GAAAA,cAAAA;;AASZ,IAAIC,OAAJ;AACA,IAAMC,eAAe,GAAGF,SAAS,CAACG,YAAlC;AACA,IAAMC,SAAS,GAAG,EAAlB;AACA,IAAMC,iBAAiB,GAAG,IAA1B;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACzB,IAAD,EAAOC,EAAP,EAAWC,IAAX;AAAA,SAAoBY,iBAAiB,CAACd,IAAD,EAAOC,EAAP,EAAWC,IAAX,EAAiBnB,UAAU,EAA3B,CAArC;AAAA,CAApB;;AACA,IAAM2C,KAAK,GAAG,SAARA,KAAQ,CAAC1B,IAAD,EAAOC,EAAP,EAAWC,IAAX,EAAoB;AAChC,MAAMC,CAAC,GAAGJ,QAAQ,CAACC,IAAD,EAAOC,EAAP,EAAWC,IAAX,CAAlB;AACA,MAAMyB,EAAE,GAAG3F,MAAM,CAAC4F,UAAP,CAAkBzB,CAAlB,CAAX,CAFgC;;AAGhC,SAAOwB,EAAE,IAAIA,EAAE,CAACE,OAAhB;AACD,CAJD;;AAKA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,QAAD,EAAWC,UAAX,EAAuB5C,OAAvB,EAAoC;AAC5D,MAAM6C,YAAY,wBAAiBF,QAAjB,MAAlB;AACA7C,EAAAA,kBAAkB,CAAC+C,YAAY,GAAGD,UAAhB,EAA4B5C,OAA5B,EAAqC6C,YAArC,CAAlB;AACD,CAHD;;IAKaC,KAAb;AAIE,iBAAYC,eAAZ,EAA6B;AAAA;;AAAA,SAHZC,YAGY;AAAA,SAFtBP,OAEsB;AAAA,SAQtBV,SARsB,GAQVA,SARU;AAC3BC,IAAAA,OAAO,GAAGe,eAAV;AACA,SAAKC,YAAL,GAAoBhB,OAAO,CAACiB,kBAAR,GAA6B,CAA7B,GAAiC,GAArD;AACA,SAAKR,OAAL,GAAeT,OAAO,CAACkB,UAAR,GAAqBZ,KAArB,GAA6BD,WAA5C;AACA,SAAKc,YAAL;AACA,SAAKA,YAAL,CAAkBpB,SAAS,CAACqB,qBAA5B;AACD;;AAVH;AAAA;AAAA,iCA0DuBC,IA1DvB,EA0D6BC,QA1D7B,EA0DuCC,SA1DvC,EA0DmD;AAC/CA,MAAAA,SAAS,GAAGA,SAAS,IAAI,KAAKd,OAA9B;;AACA,UAAIN,SAAS,CAACkB,IAAD,CAAb,EAAqB;AACnB,YAAMG,QAAQ,GAAGrB,SAAS,CAACkB,IAAD,CAAT,CAAgBI,OAAjC;AACA,YAAIrE,IAAI,GAAG,IAAX;;AACA,aAAK,IAAIhD,CAAC,GAAG,CAAR,EAAWsH,GAAG,GAAGF,QAAQ,CAAClH,MAA/B,EAAuCF,CAAC,GAAGsH,GAA3C,EAAgDtH,CAAC,EAAjD,EAAqD;AACnD,cAAM2E,CAAC,GAAGyC,QAAQ,CAACpH,CAAD,CAAlB;;AACA,cAAI,CAAC2E,CAAC,KAAKoB,SAAS,CAACkB,IAAD,CAAT,CAAgBM,YAAtB,IAAsCL,QAAvC,KAAoDC,SAAS,CAACxC,CAAC,CAACH,IAAH,EAASG,CAAC,CAACF,EAAX,EAAesB,SAAS,CAACkB,IAAD,CAAT,CAAgBvC,IAA/B,CAAjE,EAAuG;AACrG,gBAAI,CAACwC,QAAL,EAAe;AACbnB,cAAAA,SAAS,CAACkB,IAAD,CAAT,CAAgBM,YAAhB,GAA+B5C,CAA/B;AACD;;AACD,gBAAI,CAACoB,SAAS,CAACkB,IAAD,CAAT,CAAgBO,SAAjB,IAA8BzB,SAAS,CAACkB,IAAD,CAAT,CAAgBQ,KAA9C,IAAuD,CAACP,QAA5D,EAAsE;AACpEZ,cAAAA,iBAAiB,CAACW,IAAD,EAAOlB,SAAS,CAACkB,IAAD,CAAT,CAAgBQ,KAAhB,CAAsBzH,CAAtB,CAAP,CAAjB;AACD;;AACDgD,YAAAA,IAAI,GAAG0D,KAAK,CAACgB,YAAN,CAAmBT,IAAnB,EAAyBjH,CAAzB,CAAP;AACD;AACF;;AAED,eAAOgD,IAAP;AACD;;AACDM,MAAAA,MAAM,CAACqE,OAAP,iCAAwCV,IAAxC,aAAsD,cAAtD;AACA,aAAO,IAAP;AACD;AAhFH;AAAA;AAAA,iCAkFuBA,IAlFvB,EAkF6B;AAAA;;AACzB,UAAI,CAACrB,OAAO,CAACiB,kBAAT,IAA+Bb,iBAAiB,KAAKzC,UAAU,GAAG,CAAH,CAAnE,EAA0E;AACxE,eADwE;AAEzE;;AAED,UAAIwC,SAAS,CAACkB,IAAD,CAAT,CAAgBW,KAApB,EAA2B;AACzBC,QAAAA,YAAY,CAAC9B,SAAS,CAACkB,IAAD,CAAT,CAAgBW,KAAjB,CAAZ;AACA7B,QAAAA,SAAS,CAACkB,IAAD,CAAT,CAAgBW,KAAhB,GAAwB,IAAxB;AACD;;AAED7B,MAAAA,SAAS,CAACkB,IAAD,CAAT,CAAgBW,KAAhB,GAAwBE,UAAU,CAAC,YAAM;AACvC,YAAMC,OAAO,GAAG,KAAI,CAACC,YAAL,CAAkBf,IAAlB,EAAwB,KAAxB,CAAhB;;AACA,YAAIc,OAAJ,EAAa;AACXvI,UAAAA,aAAa,CAACyI,SAAd,iBAAiChB,IAAjC,GAAyCc,OAAzC;AACD;AACF,OALiC,EAK/B,KAAKnB,YAL0B,CAAlC;AAMD;AAlGH;AAAA;AAAA,kCAoGuBlH,UApGvB,EAoGmCC,SApGnC,EAoG8CuI,KApG9C,EAoGqD;AACjD,UAAMjB,IAAI,GAAGiB,KAAK,IAAIrC,eAAtB;AACArG,MAAAA,aAAa,CAAC2I,WAAd,iBAAmClB,IAAnC,GAA2CvH,UAA3C,EAAuDC,SAAvD;AACD;AAvGH;AAAA;AAAA,kCAyGuBD,UAzGvB,EAyGmCC,SAzGnC,EAyG8CuI,KAzG9C,EAyGqD;AACjD,UAAMjB,IAAI,GAAGiB,KAAK,IAAIrC,eAAtB;AACArG,MAAAA,aAAa,CAAC4I,WAAd,iBAAmCnB,IAAnC,GAA2CvH,UAA3C,EAAuDC,SAAvD;AACD;AA5GH;AAAA;AAAA,iCA8GsBuI,KA9GtB,EA8G8BG,aA9G9B,EA8G8CC,KA9G9C,EA8GsDC,WA9GtD,EA8GoEC,gBA9GpE,EA8GuF;AAAA;;AACnF,UAAIC,OAAJ;;AACA,UAAI,CAACP,KAAL,EAAY;AACVO,QAAAA,OAAO,GAAG/B,KAAK,CAACgC,mBAAN,CAA0B7C,eAA1B,CAAV;AACD,OAFD,MAEO,IAAIqC,KAAK,IAAIxB,KAAK,CAACgC,mBAAN,CAA0BR,KAA1B,CAAb,EAA+C;AACpDO,QAAAA,OAAO,GAAG/B,KAAK,CAACgC,mBAAN,CAA0BR,KAA1B,CAAV;AACD,OAFM,MAEA;AACLO,QAAAA,OAAO,GAAG;AACRxB,UAAAA,IAAI,EAAEiB,KADE;AAERxD,UAAAA,IAAI,EAAE,CAAC4D,KAAK,IAAI,IAAV,EAAgBK,WAAhB,EAFE;AAGRC,UAAAA,MAAM,EAAEP,aAAa,IAAI,EAHjB;AAIRZ,UAAAA,KAAK,EAAEc,WAJC;AAKRf,UAAAA,SAAS,EAAE,CAAC,CAACgB;AALL,SAAV;AAOD;;AAED,UAAI,KAAKK,WAAL,CAAiBJ,OAAO,CAACxB,IAAzB,CAAJ,EAAoC;AAClC3D,QAAAA,MAAM,CAACN,IAAP,qBAAyByF,OAAO,CAACxB,IAAjC,oCAAsE,cAAtE;AACA;AACD;;AAEDiB,MAAAA,KAAK,GAAGO,OAAO,CAACxB,IAAhB;AACAwB,MAAAA,OAAO,CAACpB,OAAR,GAAkB,EAAlB;AACAoB,MAAAA,OAAO,CAACb,KAAR,GAAgB,IAAhB;AACAa,MAAAA,OAAO,CAAClB,YAAR,GAAuB,IAAvB;;AACAkB,MAAAA,OAAO,CAACK,QAAR,GAAmB;AAAA,eAAM,MAAI,CAACC,YAAL,CAAkBb,KAAlB,CAAN;AAAA,OAAnB;;AAEA,UAAI1D,IAAJ;AACA,UAAIC,EAAJ;AACA,UAAIuE,KAAJ;AACA,UAAMC,OAAO,GAAGR,OAAO,CAACG,MAAxB;;AACA,WAAK,IAAI5I,CAAC,GAAG,CAAR,EAAWsH,GAAG,GAAG2B,OAAO,CAAC/I,MAA9B,EAAsCF,CAAC,IAAIsH,GAA3C,EAAgDtH,CAAC,EAAjD,EAAqD;AACnDwE,QAAAA,IAAI,GAAGxE,CAAC,KAAK,CAAN,GAAU,CAAV,GAAciJ,OAAO,CAACjJ,CAAC,GAAG,CAAL,CAA5B;AACAyE,QAAAA,EAAE,GAAGzE,CAAC,KAAKiJ,OAAO,CAAC/I,MAAd,GAAuB,CAAC,CAAxB,GAA4B+I,OAAO,CAACjJ,CAAD,CAAxC;AACAgJ,QAAAA,KAAK,GAAGzE,QAAQ,CAACC,IAAD,EAAOC,EAAP,EAAWgE,OAAO,CAAC/D,IAAnB,CAAhB;AACA+D,QAAAA,OAAO,CAACpB,OAAR,CAAgBxH,IAAhB,CAAqB;AACnBmJ,UAAAA,KAAK,EAALA,KADmB;AAEnBxE,UAAAA,IAAI,EAAJA,IAFmB;AAGnBC,UAAAA,EAAE,EAAFA;AAHmB,SAArB;AAKD;;AAED,UAAIgE,OAAO,CAAChB,KAAR,IAAiBgB,OAAO,CAAChB,KAAR,CAAcvH,MAAd,KAAyBuI,OAAO,CAACpB,OAAR,CAAgBnH,MAA9D,EAAsE;AACpEuI,QAAAA,OAAO,CAAChB,KAAR,GAAgB,IAAhB;AACD;;AAED1B,MAAAA,SAAS,CAAC0C,OAAO,CAACxB,IAAT,CAAT,GAA0BwB,OAA1B;;AAEA,UAAI7C,OAAO,CAACiB,kBAAZ,EAAgC;AAC9B;AACA,YAAMQ,OAAO,GAAGoB,OAAO,CAACpB,OAAxB;;AAF8B,mDAGdA,OAHc;AAAA;;AAAA;AAG9B,8DAAyB;AAAA,gBAAd1C,CAAc;AACvBA,YAAAA,CAAC,CAACuE,KAAF,GAAU1I,MAAM,CAAC4F,UAAP,CAAkBzB,CAAC,CAACqE,KAApB,CAAV;AACArE,YAAAA,CAAC,CAACuE,KAAF,CAAQC,WAAR,CAAoBV,OAAO,CAACK,QAA5B;AACD;AAN6B;AAAA;AAAA;AAAA;AAAA;AAO/B,OAPD,MAOO;AACL;AACAtI,QAAAA,MAAM,CAAC4I,gBAAP,CAAwB,QAAxB,EAAkCX,OAAO,CAACK,QAA1C,EAAoD,KAApD;AACAtI,QAAAA,MAAM,CAAC4I,gBAAP,CAAwB,mBAAxB,EAA6CX,OAAO,CAACK,QAArD,EAA+D,KAA/D;AACD;;AAEDL,MAAAA,OAAO,CAACK,QAAR;AACD;AA5KH;AAAA;AAAA,oCA8KyBZ,KA9KzB,EA8KgCmB,MA9KhC,EA8KwC;AACpC,UAAI,CAAC,KAAKR,WAAL,CAAiBX,KAAjB,CAAL,EAA8B;AAC5B,eAAO,IAAP;AACD;;AACD,aAAO,KAAKF,YAAL,CACLE,KADK,EAEL,IAFK,EAGLoB,KAAK,CAACD,MAAD,CAAL,GAAgB,IAAhB,GAAuB,UAAC7E,IAAD,EAAOC,EAAP,EAAWC,IAAX;AAAA,eAAoBY,iBAAiB,CAACd,IAAD,EAAOC,EAAP,EAAWC,IAAX,EAAiB,CAAC2E,MAAD,EAAS,CAAT,CAAjB,CAArC;AAAA,OAHlB,CAAP;AAKD;AAvLH;AAAA;AAAA,gCAyLqBnB,KAzLrB,EAyL4B;AACxB,aAAOA,KAAK,IAAI,CAAC,CAACnC,SAAS,CAACmC,KAAD,CAA3B;AACD;AA3LH;AAAA;AAAA,mCA6LwBA,KA7LxB,EA6L+B;AAC3B,UAAI,CAAC,KAAKW,WAAL,CAAiBX,KAAjB,CAAL,EAA8B;AAC5B5E,QAAAA,MAAM,CAACN,IAAP,oBAAwBkF,KAAxB,6CAAuE,cAAvE;AACA;AACD;;AAED,WAAK,IAAMhD,CAAX,IAAgBS,SAAhB,EAA2B;AACzB,YAAIuC,KAAK,KAAKvC,SAAS,CAACT,CAAD,CAAvB,EAA4B;AAC1B5B,UAAAA,MAAM,CAACqE,OAAP,CAAe,mDAAf,EAAoE,cAApE;AACA;AACD;AACF;;AAED,UAAMc,OAAO,GAAG1C,SAAS,CAACmC,KAAD,CAAzB;;AACA,UAAItC,OAAO,CAACiB,kBAAZ,EAAgC;AAC9B;AACA,YAAMQ,OAAO,GAAGoB,OAAO,CAACpB,OAAxB;;AAF8B,oDAGdA,OAHc;AAAA;;AAAA;AAG9B,iEAAyB;AAAA,gBAAd1C,CAAc;AACvBA,YAAAA,CAAC,CAACuE,KAAF,CAAQK,cAAR,CAAuBd,OAAO,CAACK,QAA/B;AACD;AAL6B;AAAA;AAAA;AAAA;AAAA;AAM/B,OAND,MAMO;AACL;AACAtI,QAAAA,MAAM,CAACgJ,mBAAP,CAA2B,QAA3B,EAAqCf,OAAO,CAACK,QAA7C,EAAuD,KAAvD;AACAtI,QAAAA,MAAM,CAACgJ,mBAAP,CAA2B,mBAA3B,EAAgDf,OAAO,CAACK,QAAxD,EAAkE,KAAlE;AACD;;AAEDxC,MAAAA,iBAAiB,CAAC4B,KAAD,EAAQ,EAAR,EAAY,IAAZ,CAAjB;AACA,aAAO1I,aAAa,CAACI,cAAd,iBAAsCsI,KAAtC,EAAP;AACA,aAAOnC,SAAS,CAACmC,KAAD,CAAhB;AACD;AA1NH;AAAA;AAAA,iCA8C8B3B,QA9C9B,EA8CwCkD,SA9CxC,EA8CmD;AAC/C,UAAM9E,CAAC,GAAGoB,SAAS,CAACQ,QAAD,CAAT,CAAoBc,OAApB,CAA4BoC,SAA5B,CAAV;AACA,UAAMzG,IAAI,GAAG;AAAEwB,QAAAA,IAAI,EAAEG,CAAC,CAACH,IAAV;AAAgBE,QAAAA,IAAI,EAAEqB,SAAS,CAACQ,QAAD,CAAT,CAAoB7B;AAA1C,OAAb;;AACA,UAAIC,CAAC,CAACF,EAAF,IAAQ,CAAZ,EAAe;AACbzB,QAAAA,IAAI,CAACyB,EAAL,GAAUE,CAAC,CAACF,EAAZ;AACD;;AACD,UAAIsB,SAAS,CAACQ,QAAD,CAAT,CAAoBkB,KAAxB,EAA+B;AAC7BzE,QAAAA,IAAI,CAACiE,IAAL,GAAYlB,SAAS,CAACQ,QAAD,CAAT,CAAoBkB,KAApB,CAA0BgC,SAA1B,CAAZ;AACD;;AACD,aAAOzG,IAAP;AACD;AAxDH;;AAAA;AAAA;AAAa0D,MAaIgC,0FACZ/C,SAAS,CAAC+D,YAAa;AACtBd,EAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,GAAN,CADc;AAEtBlE,EAAAA,IAAI,EAAE,IAFgB;AAGtBuC,EAAAA,IAAI,EAAEtB,SAAS,CAAC+D,UAHM;AAItBjC,EAAAA,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX;AAJe,2CAMvB9B,SAAS,CAACgE,YAAa;AACtBf,EAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADc;AAEtBlE,EAAAA,IAAI,EAAE,IAFgB;AAGtBuC,EAAAA,IAAI,EAAEtB,SAAS,CAACgE,UAHM;AAItBlC,EAAAA,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,IAAhB;AAJe,2CAMvB9B,SAAS,CAACiE,YAAa;AACtBhB,EAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,CADc;AAEtBlE,EAAAA,IAAI,EAAE,IAFgB;AAGtBuC,EAAAA,IAAI,EAAEtB,SAAS,CAACiE,UAHM;AAItBnC,EAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,EAAsB,IAAtB,EAA4B,KAA5B;AAJe,2CAMvB9B,SAAS,CAACG,cAAe;AACxB8C,EAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,IAAN,CADgB;AAExBlE,EAAAA,IAAI,EAAE,IAFkB;AAGxBuC,EAAAA,IAAI,EAAEtB,SAAS,CAACG,YAHQ;AAIxB2B,EAAAA,KAAK,EAAE,CAAC,OAAD,EAAU,QAAV,EAAoB,SAApB;AAJiB,2CAMzB9B,SAAS,CAACqB,uBAAwB;AACjC4B,EAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CADyB;AAEjClE,EAAAA,IAAI,EAAE,IAF2B;AAGjCuC,EAAAA,IAAI,EAAEtB,SAAS,CAACqB,qBAHiB;AAIjCS,EAAAA,KAAK,EAAE,CAAC,OAAD,EAAU,QAAV,EAAoB,SAApB,EAA+B,cAA/B;AAJ0B;;ICjE1BoC,WAAb;AAAA;AAAA;;AAAA,SACSC,SADT;AAAA,SAESC,QAFT;AAAA;;AAAA;AAAA;AAAA,kCAIuBrK,UAJvB,EAImCC,SAJnC,EAI8C;AAC1CH,MAAAA,aAAa,CAAC2I,WAAd,CAA0B,aAA1B,EAAyCzI,UAAzC,EAAqDC,SAArD;AACD;AANH;AAAA;AAAA,kCAQuBD,UARvB,EAQmCC,SARnC,EAQ8C;AAC1CH,MAAAA,aAAa,CAAC4I,WAAd,CAA0B,aAA1B,EAAyC1I,UAAzC,EAAqDC,SAArD;AACD;AAVH;;AAAA;AAAA;;ICCaqK,MAAb;AAIE,oBAAc;AAAA;;AAAA,SAHPxE,KAGO;AAAA,SAFPyE,MAEO;AACZ,SAAKC,aAAL;AACD;;AANH;AAAA;AAAA,kCAQuBxK,UARvB,EAQmCC,SARnC,EAQ8C;AAC1CH,MAAAA,aAAa,CAAC2I,WAAd,CAA0B,QAA1B,EAAoCzI,UAApC,EAAgDC,SAAhD;AACD;AAVH;AAAA;AAAA,kCAYuBD,UAZvB,EAYmCC,SAZnC,EAY8C;AAC1CH,MAAAA,aAAa,CAAC4I,WAAd,CAA0B,QAA1B,EAAoC1I,UAApC,EAAgDC,SAAhD;AACD;AAdH;AAAA;AAAA,oCAgByB;AACrB,WAAK6F,KAAL,GAAajC,UAAU,GAAG,CAAH,CAAvB;AACA,WAAK0G,MAAL,GAAc1G,UAAU,GAAG,CAAH,CAAxB;AACD;AAnBH;;AAAA;AAAA;;ICQa4G,OAAb;AAAA;;AAAA,OACSC,KADT,GAC0BC,YAAY,EADtC;AAAA,OAESC,OAFT,GAE4BC,SAAS,CAACC,aAFtC;AAAA,OAGS1D,UAHT,GAG+ByD,SAAS,CAACzD,UAHzC;AAAA,OAISD,kBAJT,GAI8B,CAAC,EAAE,KAAKC,UAAL,IAAmBtG,MAAM,CAAC4F,UAAP,CAAkB,yBAAlB,CAArB,CAJ/B;AAAA,OAKSqE,WALT,GAKgCF,SAAS,CAACG,iBAL1C;AAAA,OAMSC,MANT,GAM4BnK,MAAD,CAAgBmK,MAAhB,IAA0BnK,MAAM,CAACoK,gBAAP,IAA2B,CANhF;AAAA,OAOSC,SAPT,GAO8BN,SAAS,CAACO,UAPxC;AAAA,OAQSC,KART,GAQiB;AACbC,IAAAA,WAAW,EAAET,SAAS,CAACS;AADV,GARjB;AAAA;;ACHA,IAAIC,cAAJ;AACA,IAAIC,kBAAkB,GAAG,KAAzB;AACA,IAAIC,OAAO,GAAG,KAAd;AACA,IAAIC,mBAAJ;AACA,IAAIC,iBAAJ;AACA,IAAIC,gBAAgB,GAAG/H,UAAU,GAAG,CAAH,CAAjC;AACA,IAAIgI,eAAe,GAAGhI,UAAU,GAAG,CAAH,CAAhC;AACA,IAAIiI,aAAa,GAAG,KAApB;AACA,IAAIC,eAAJ;AACA,IAAMC,cAAc,GAAG,uBAAvB;AACA,IAAIC,gBAAJ;;IAEMC,gBASJ,yBAAc;AAAA;;AAAA;;AAAA,OARPC,EAQO,GARFC,KAAK,EAQH;AAAA,OAPPC,OAOO,GAPGC,UAAU,EAOb;AAAA,OANPpG,OAMO,GANG,IAAIuE,OAAJ,EAMH;AAAA,OALP8B,MAKO,GALEC,SAAS,EAKX;AAAA,OAJPhD,KAIO,GAJC,IAAIxC,KAAJ,CAAU,KAAKd,OAAf,CAID;AAAA,OAHP6E,WAGO,GAHO,IAAIZ,WAAJ,EAGP;AAAA,OAFPsC,MAEO,GAFE,IAAInC,MAAJ,EAEF;;AAAA,OAsBNoC,iBAtBM,GAsBc,YAAM;AAChC,QAAMC,IAAI,GAAG,KAAI,CAAC5B,WAAL,CAAiBX,SAA9B;;AACA,QAAMwC,GAAG,GAAG,KAAI,CAACC,WAAL,CAAiB,KAAjB,CAAZ;;AACA,QAAIF,IAAI,KAAKC,GAAb,EAAkB;AAChB,MAAA,KAAI,CAACE,uBAAL;AACD,KAL+B;AAOhC;AACA;;;AACA,QAAI,CAACvB,cAAL,EAAqB;AACnBA,MAAAA,cAAc,GAAGzK,MAAM,CAACsH,UAAP,CAAkB,KAAI,CAAC2E,mBAAvB,EAA4C,GAA5C,CAAjB;AACD;AACF,GAlCa;;AAAA,OAoCNA,mBApCM,GAoCgB,YAAM;AAClC,IAAA,KAAI,CAACC,kBAAL;;AACAzB,IAAAA,cAAc,GAAG,IAAjB;AACD,GAvCa;;AAAA,OAyCNyB,kBAzCM,GAyCe,YAAM;AACjC,IAAA,KAAI,CAACP,MAAL,CAAYjC,aAAZ;;AACA1K,IAAAA,aAAa,CAACyI,SAAd,CAAwB,QAAxB,EAAkC;AAChCgC,MAAAA,MAAM,EAAE,KAAI,CAACkC,MAAL,CAAYlC,MADY;AAEhCzE,MAAAA,KAAK,EAAE,KAAI,CAAC2G,MAAL,CAAY3G;AAFa,KAAlC;AAID,GA/Ca;;AAAA,OAiDNmH,kBAjDM,GAiDe,YAAM;AACjC,IAAA,KAAI,CAAClC,WAAL,CAAiBX,SAAjB,GAA6B,KAAI,CAACyC,WAAL,CAAiB,IAAjB,CAA7B;AACA,IAAA,KAAI,CAAC9B,WAAL,CAAiBV,QAAjB,GAA4B,CAAC,KAAI,CAACU,WAAL,CAAiBX,SAA9C;AACD,GApDa;;AAAA,OAsDN0C,uBAtDM,GAsDoB,YAAM;AACtC,IAAA,KAAI,CAACG,kBAAL;;AACAnN,IAAAA,aAAa,CAACyI,SAAd,CAAwB,aAAxB,EAAuC;AAAE6B,MAAAA,SAAS,EAAE,KAAI,CAACW,WAAL,CAAiBX;AAA9B,KAAvC;AACD,GAzDa;;AAAA,OA2DNyC,WA3DM,GA2DQ,UAACK,sBAAD,EAA4B;AAChD,QAAI,KAAI,CAAChH,OAAL,CAAawE,KAAb,IAAsB,KAAI,CAACxE,OAAL,CAAa6E,WAAnC,IAAkD,KAAI,CAACoB,EAAL,CAAQgB,OAA9D,EAAuE;AACrE;AACA;AACA;AACA,UAAIrB,aAAa,IAAIoB,sBAArB,EAA6C;AAC3C,eAAO,CAAC,KAAI,CAACnC,WAAL,CAAiBX,SAAzB;AACD;;AACD,UAAI0B,aAAJ,EAAmB;AACjB;AACA,eAAO,KAAI,CAACf,WAAL,CAAiBX,SAAxB;AACD;AACF,KAXD,MAWO,IAAI,KAAI,CAAClE,OAAL,CAAakB,UAAb,IAA2B,KAAI,CAAClB,OAAL,CAAa6E,WAA5C,EAAyD;AAC9D;AACA,aAAO,CAAC,CAACjK,MAAM,CAAC4F,UAAP,CAAkB,0BAAlB,EAA8CC,OAAvD;AACD,KAf+C;;;AAiBhD,QAAMd,IAAI,GAAGhC,UAAU,EAAvB;AACA,WAAOgC,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAArB;AACD,GA9Ea;;AAAA,OAgFNuH,mCAhFM,GAgFgC,UAACC,GAAD,EAAS;AACrD,QAAIA,GAAG,CAACC,IAAJ,KAAa,QAAjB,EAA2B;AACzB,UAAIrB,gBAAgB,IAAID,cAAc,CAACuB,IAAf,CAAoBlJ,QAAQ,CAACmJ,aAAT,CAAuBC,OAA3C,CAApB,IAA2E,CAACjC,kBAAhF,EAAoG;AAClG;AACD;;AAED,UAAMkC,gBAAgB,GAAG7J,UAAU,GAAG,CAAH,CAAnC;AACA,UAAM8J,eAAe,GAAG9J,UAAU,GAAG,CAAH,CAAlC;AACA,UAAM+J,KAAK,GAAG,IAAI5L,IAAJ,GAAWW,OAAX,EAAd,CAPyB;;AASzB,UAAI+K,gBAAgB,KAAK9B,gBAArB,IAAyC+B,eAAe,KAAK9B,eAAjE,EAAkF;AAChF;AACD;;AACDJ,MAAAA,OAAO,GAAG,IAAV,CAZyB;AAczB;;AACA,UAAIG,gBAAgB,KAAK8B,gBAArB,IAAyC7B,eAAe,KAAK8B,eAAjE,EAAkF;AAChF;AACA;AACA;AACA;AACA,YAAI,CAAC5B,eAAD,IAAoB6B,KAAK,GAAG7B,eAAR,GAA0B,GAAlD,EAAuD;AACrDD,UAAAA,aAAa,GAAG4B,gBAAgB,GAAG9B,gBAAnC;AACD;;AACD,QAAA,KAAI,CAACoB,kBAAL;AACD,OATD,MASO;AACLnB,QAAAA,eAAe,GAAG8B,eAAlB;AACD;;AACD5B,MAAAA,eAAe,GAAG6B,KAAlB;AACAhC,MAAAA,gBAAgB,GAAG8B,gBAAnB;;AAEA,UAAI/B,iBAAJ,EAAuB;AACrB7K,QAAAA,MAAM,CAACqH,YAAP,CAAoBwD,iBAApB;AACAA,QAAAA,iBAAiB,GAAG,IAApB;AACD,OAjCwB;AAmCzB;AACA;;;AACAA,MAAAA,iBAAiB,GAAG7K,MAAM,CAACsH,UAAP,CAAkB8D,aAAa,CAAC2B,UAAhC,EAA4C,IAA5C,CAApB;AACD,KAtCD,MAsCO,IAAIR,GAAG,CAACC,IAAJ,KAAa,mBAAjB,EAAsC;AAC3C9B,MAAAA,kBAAkB,GAAG,IAArB;AACD;;AAED,QAAIE,mBAAJ,EAAyB;AACvBvD,MAAAA,YAAY,CAACuD,mBAAD,CAAZ;AACAA,MAAAA,mBAAmB,GAAG,IAAtB;AACD;;AACDA,IAAAA,mBAAmB,GAAG5K,MAAM,CAACsH,UAAP,CAAkB,KAAI,CAAC0F,mBAAvB,EAA4C,EAA5C,CAAtB;AACD,GAhIa;;AAAA,OAkINA,mBAlIM,GAkIgB,YAAM;AAClC;AACA;AACA;AACA;AACA,QAAIrC,OAAO,KAAKD,kBAAkB,IAAK,KAAI,CAACe,MAAL,CAAYwB,MAAZ,IAAsB,KAAI,CAAC5B,EAAL,CAAQ6B,GAA9B,IAAqC,KAAI,CAAC7B,EAAL,CAAQ8B,OAAR,IAAmB,CAApF,CAAX,EAAoG;AAClG,MAAA,KAAI,CAACnB,uBAAL;;AACA,MAAA,KAAI,CAACE,kBAAL;;AACAxB,MAAAA,kBAAkB,GAAG,KAArB;AACAC,MAAAA,OAAO,GAAG,KAAV;;AACA,UAAIE,iBAAJ,EAAuB;AACrB7K,QAAAA,MAAM,CAACqH,YAAP,CAAoBwD,iBAApB;AACAA,QAAAA,iBAAiB,GAAG,IAApB;AACD;AACF;;AACDD,IAAAA,mBAAmB,GAAG,IAAtB;AACD,GAlJa;;AACZ;AACA;AACA;AACAO,EAAAA,gBAAgB,GACd,KAAKE,EAAL,CAAQ6B,GAAR,IACA,KAAK3B,OAAL,CAAa9E,IAAb,KAAsB,IADtB,KAEE,KAAKgF,MAAL,CAAY2B,KAAZ,IAAqB,KAAK/B,EAAL,CAAQ8B,OAAR,IAAmB,CAAxC,IAA6C,KAAK9B,EAAL,CAAQ8B,OAAR,GAAkB,GAAhE,IACE,KAAK1B,MAAL,CAAYwB,MAAZ,IAAsB,KAAK5B,EAAL,CAAQ8B,OAAR,IAAmB,CAH5C,CADF,CAJY;;AAWZ,MAAI,KAAK/H,OAAL,CAAawE,KAAb,IAAsB,KAAKxE,OAAL,CAAa6E,WAAvC,EAAoD;AAClD;AACAjK,IAAAA,MAAM,CAAC4I,gBAAP,CAAwB,QAAxB,EAAkC,KAAK0D,mCAAvC,EAA4E,KAA5E;AACAtM,IAAAA,MAAM,CAAC4I,gBAAP,CAAwB,mBAAxB,EAA6C,KAAK0D,mCAAlD,EAAuF,KAAvF;AACD,GAJD,MAIO;AACL;AACAtM,IAAAA,MAAM,CAAC4I,gBAAP,CAAwB,QAAxB,EAAkC,KAAKgD,iBAAvC,EAA0D,KAA1D;AACD;;AACD,OAAKO,kBAAL;AACD;;AA7BGf,cA6JW2B,aAAa,YAAM;AAChCrC,EAAAA,kBAAkB,GAAG,KAArB;AACAC,EAAAA,OAAO,GAAG,KAAV;AACAE,EAAAA,iBAAiB,GAAG,IAApB;AACD;;IAGUwC,MAAM,GAAG,IAAIjC,aAAJ;;;;"}