{"version":3,"file":"hooks.js","sources":["../src/hooks/useConsolidatedRef.ts","../src/utils/index.ts","../src/hooks/useDeprecateRenderMethods.ts","../src/hooks/useI18nBundle.ts","../src/hooks/usePassThroughHtmlProps.ts","../src/hooks/useViewportRange.ts"],"sourcesContent":["import { RefObject, useEffect, useMemo, useRef } from 'react';\n\nexport const useConsolidatedRef = <T>(ref): RefObject<T> => {\n  const localRef: RefObject<T> = useRef(null);\n\n  const consolidatedRef = useMemo(() => {\n    if (!ref || typeof ref === 'function') {\n      return localRef;\n    }\n    return ref;\n  }, [ref]);\n\n  useEffect(() => {\n    if (typeof ref === 'function') {\n      // @ts-ignore\n      ref(consolidatedRef.current);\n    }\n  }, [consolidatedRef.current]);\n\n  return consolidatedRef;\n};\n","import { UIEvent } from 'react';\n\nexport const deprecationNotice = (component: string, message: string) => {\n  if (process.env.NODE_ENV === 'development') {\n    const value = `*** ui5-webcomponents-react Deprecation Notice - ${component} ***\\n`;\n    // eslint-disable-next-line no-console\n    console.warn(`${value}${message}`);\n  }\n};\n\nexport const getScrollBarWidth = () => {\n  const inner = document.createElement('p');\n  inner.style.width = '100%';\n  inner.style.height = '200px';\n\n  const outer = document.createElement('div');\n  outer.style.position = 'absolute';\n  outer.style.top = '0px';\n  outer.style.left = '0px';\n  outer.style.visibility = 'hidden';\n  outer.style.width = '200px';\n  outer.style.height = '150px';\n  outer.style.overflow = 'hidden';\n  outer.appendChild(inner);\n\n  document.body.appendChild(outer);\n  const w1 = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  let w2 = inner.offsetWidth;\n\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n\n  document.body.removeChild(outer);\n  return w1 - w2;\n};\n\nexport const polyfillDeprecatedEventAPI = (event: any) => {\n  event.getOriginalEvent = () => {\n    deprecationNotice(\n      'Event',\n      // eslint-disable-next-line max-len\n      \"'event.getOriginalEvent' is deprecated and will be removed in the next major release. Please use the event object itself instead.\"\n    );\n    return event;\n  };\n  event.getParameters = () => {\n    deprecationNotice(\n      'Event',\n      // eslint-disable-next-line max-len\n      \"'event.getParameters' is deprecated and will be removed in the next major release. Please use 'event.detail' instead.\"\n    );\n    return event.parameters;\n  };\n  event.getParameter = (parameter: keyof typeof event.detail) => {\n    deprecationNotice(\n      'Event',\n      // eslint-disable-next-line max-len\n      \"'event.getParameter' is deprecated and will be removed in the next major release. Please use 'event.detail[parameter]' instead.\"\n    );\n    return event.parameters[parameter];\n  };\n  event.getHtmlSourceElement = () => {\n    deprecationNotice(\n      'Event',\n      // eslint-disable-next-line max-len\n      \"'event.getHtmlSourceElement' is deprecated and will be removed in the next major release. Please use 'event.target' instead.\"\n    );\n    return event.target;\n  };\n\n  event.parameters = new Proxy(\n    {},\n    {\n      get: (obj, prop) => {\n        deprecationNotice(\n          'Event',\n          // eslint-disable-next-line max-len\n          \"'event.parameters' is deprecated and will be removed in the next major release. Please use 'event.detail' instead.\"\n        );\n        if (event.detail && event.detail.hasOwnProperty(prop)) {\n          return event.detail[prop];\n        }\n\n        // really dirty fallback to e.target\n        return event.target[prop];\n      }\n    }\n  );\n\n  return event;\n};\n\nexport const enrichEventWithDetails = <T = {}>(event: UIEvent, payload: T = {} as any) => {\n  if (event.hasOwnProperty('persist')) {\n    // if there is a persist method, it's an SyntheticEvent so we need to persist it\n    event.persist();\n  }\n\n  const shouldCreateNewDetails =\n    event.detail === null || event.detail === undefined || typeof event.detail !== 'object';\n  Object.defineProperty(event, 'detail', {\n    value: shouldCreateNewDetails ? {} : event.detail,\n    writable: true,\n    configurable: true\n  });\n  Object.assign(event.detail, payload);\n  // \"polyfill\" old features\n  polyfillDeprecatedEventAPI(event);\n  return (event as unknown) as CustomEvent<T>;\n};\n","import { useEffect, useMemo } from 'react';\nimport { deprecationNotice } from '../utils';\n\nexport const useDeprecateRenderMethods = (props, renderMethodName, slotName) => {\n  useEffect(() => {\n    if (props[renderMethodName]) {\n      deprecationNotice(\n        `${renderMethodName}`,\n        `The prop '${renderMethodName}' is deprecated and will be removed in the next major release.\\nPlease use '${slotName}' instead.`\n      );\n    }\n  }, []);\n\n  return useMemo(() => {\n    return props[slotName] ?? (typeof props[renderMethodName] === 'function' ? props[renderMethodName]() : null);\n  }, [props[renderMethodName], props[slotName]]);\n};\n","import { fetchI18nBundle, getI18nBundle } from '@ui5/webcomponents-base/dist/i18nBundle';\nimport { useEffect, useState } from 'react';\n\ninterface I18nBundle {\n  getText: (textObj: { key: string; defaultText: string }, ...args: any) => string;\n}\n\nexport const useI18nBundle = (bundleName): I18nBundle => {\n  const [bundle, setBundle] = useState(getI18nBundle(bundleName));\n\n  useEffect(() => {\n    const fetchAndLoadBundle = async () => {\n      await fetchI18nBundle(bundleName);\n      setBundle(getI18nBundle(bundleName));\n    };\n    fetchAndLoadBundle();\n  }, []);\n\n  return bundle;\n};\n","import { useMemo } from 'react';\n\nconst PROP_WHITELIST = /^(aria-|data-|id$|on[A-Z])/;\n\nexport const usePassThroughHtmlProps = (props, propBlackList: string[] = []) => {\n  const componentPropBlacklist = new Set(propBlackList);\n  const passThroughPropNames = Object.keys(props).filter(\n    (name) => PROP_WHITELIST.test(name) && !componentPropBlacklist.has(name)\n  );\n\n  return useMemo(\n    () => {\n      return passThroughPropNames.reduce(\n        (acc, val) => ({\n          ...acc,\n          [val]: props[val]\n        }),\n        {}\n      );\n    },\n    passThroughPropNames.map((name) => props[name])\n  );\n};\n","import { Device } from '@ui5/webcomponents-react-base/lib/Device';\nimport { useEffect, useState, useRef } from 'react';\n\nexport const useViewportRange = (rangeSet) => {\n  const [currentRange, setCurrentRange] = useState(Device.media.getCurrentRange(rangeSet, window.innerWidth).name);\n  const isMounted = useRef(true);\n\n  useEffect(() => {\n    const handler = ({ name: range }) => {\n      if (isMounted.current === true) {\n        setCurrentRange(range);\n      }\n    };\n    Device.media.attachHandler(handler, null, 'StdExt');\n    return () => {\n      isMounted.current = false;\n      Device.resize.detachHandler(handler, null);\n    };\n  }, [setCurrentRange, isMounted]);\n\n  return currentRange;\n};\n"],"names":["useConsolidatedRef","ref","localRef","useRef","consolidatedRef","useMemo","useEffect","current","deprecationNotice","component","message","process","env","NODE_ENV","value","console","warn","useDeprecateRenderMethods","props","renderMethodName","slotName","useI18nBundle","bundleName","useState","getI18nBundle","bundle","setBundle","fetchAndLoadBundle","fetchI18nBundle","PROP_WHITELIST","usePassThroughHtmlProps","propBlackList","componentPropBlacklist","Set","passThroughPropNames","Object","keys","filter","name","test","has","reduce","acc","val","map","useViewportRange","rangeSet","Device","media","getCurrentRange","window","innerWidth","currentRange","setCurrentRange","isMounted","handler","range","attachHandler","resize","detachHandler"],"mappings":"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"}