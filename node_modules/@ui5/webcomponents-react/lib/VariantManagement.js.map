{"version":3,"file":"VariantManagement.js","sources":["../src/components/VariantManagement/index.tsx"],"sourcesContent":["import '@ui5/webcomponents-icons/dist/icons/navigation-down-arrow';\nimport { createComponentStyles } from '@ui5/webcomponents-react-base/lib/createComponentStyles';\nimport { useI18nBundle } from '@ui5/webcomponents-react-base/lib/hooks';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/lib/StyleClassHelper';\nimport { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\nimport { usePassThroughHtmlProps } from '@ui5/webcomponents-react-base/lib/usePassThroughHtmlProps';\nimport { enrichEventWithDetails } from '@ui5/webcomponents-react-base/lib/Utils';\nimport { CANCEL } from '@ui5/webcomponents-react/dist/assets/i18n/i18n-defaults';\nimport { Button } from '@ui5/webcomponents-react/lib/Button';\nimport { ButtonDesign } from '@ui5/webcomponents-react/lib/ButtonDesign';\nimport { List } from '@ui5/webcomponents-react/lib/List';\nimport { ListItemTypes } from '@ui5/webcomponents-react/lib/ListItemTypes';\nimport { ListMode } from '@ui5/webcomponents-react/lib/ListMode';\nimport { PlacementType } from '@ui5/webcomponents-react/lib/PlacementType';\nimport { ResponsivePopover } from '@ui5/webcomponents-react/lib/ResponsivePopover';\nimport { StandardListItem } from '@ui5/webcomponents-react/lib/StandardListItem';\nimport { Title } from '@ui5/webcomponents-react/lib/Title';\nimport { TitleLevel } from '@ui5/webcomponents-react/lib/TitleLevel';\nimport React, { FC, forwardRef, Ref, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { CommonProps } from '../../interfaces/CommonProps';\nimport { Ui5ResponsivePopoverDomRef } from '../../interfaces/Ui5ResponsivePopoverDomRef';\n\nexport interface VariantItem {\n  key: string;\n  label: string;\n}\n\nexport interface VariantManagementPropTypes extends CommonProps {\n  placement?: PlacementType;\n  popupTitle?: string;\n  selectedKey?: string;\n  closeOnItemSelect?: boolean;\n  variantItems: VariantItem[];\n  onSelect?: (event: CustomEvent<{ item: HTMLElement; selectedItem: VariantItem }>) => void;\n  level?: TitleLevel;\n  disabled?: boolean;\n}\n\nconst styles = {\n  container: {\n    display: 'flex',\n    alignItems: 'center',\n    textAlign: 'center',\n    cursor: 'pointer'\n  },\n  title: {\n    cursor: 'pointer',\n    color: ThemingParameters.sapButton_TextColor,\n    '&:hover': {\n      color: ThemingParameters.sapButton_Hover_TextColor\n    }\n  },\n  disabled: {\n    '& $title': {\n      color: ThemingParameters.sapGroup_TitleTextColor,\n      cursor: 'default',\n      '&:hover': {\n        color: 'ThemingParameters.sapGroup_TitleTextColor'\n      }\n    }\n  },\n  footer: {\n    margin: '0.4375rem 1rem 0.4325rem auto'\n  }\n};\n\nconst useStyles = createComponentStyles(styles, { name: 'VariantManagement' });\n\n/**\n * <code>import { VariantManagement } from '@ui5/webcomponents-react/lib/VariantManagement';</code>\n */\nconst VariantManagement: FC<VariantManagementPropTypes> = forwardRef(\n  (props: VariantManagementPropTypes, ref: Ref<HTMLDivElement>) => {\n    const {\n      variantItems,\n      popupTitle,\n      className,\n      style,\n      tooltip,\n      placement,\n      level,\n      onSelect,\n      closeOnItemSelect,\n      disabled\n    } = props;\n\n    const classes = useStyles();\n    const popoverRef = useRef<Ui5ResponsivePopoverDomRef>(null);\n\n    const [selectedKey, setSelectedKey] = useState(props.selectedKey ?? variantItems?.[0]?.key ?? null);\n\n    useEffect(() => {\n      if (props.selectedKey) {\n        setSelectedKey(props.selectedKey);\n      }\n    }, [props.selectedKey, setSelectedKey]);\n\n    const handleCancelButtonClick = useCallback(() => {\n      popoverRef.current.close();\n    }, [popoverRef]);\n\n    const handleOpenVariantManagement = useCallback(\n      (e) => {\n        popoverRef.current.open(e.target);\n      },\n      [popoverRef]\n    );\n\n    const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n    const footerButtons = useMemo(() => {\n      return (\n        <Button className={classes.footer} onClick={handleCancelButtonClick} design={ButtonDesign.Emphasized}>\n          {i18nBundle.getText(CANCEL)}\n        </Button>\n      );\n    }, [classes.footer, handleCancelButtonClick, i18nBundle]);\n\n    const getItemByKey = (key) => {\n      return variantItems?.find((item) => item.key === key);\n    };\n\n    const selectedItem = getItemByKey(selectedKey) || variantItems[0];\n\n    const variantManagementClasses = StyleClassHelper.of(classes.container);\n\n    if (disabled) {\n      variantManagementClasses.put(classes.disabled);\n    }\n\n    if (className) {\n      variantManagementClasses.put(className);\n    }\n\n    const handleVariantItemSelect = useCallback(\n      (event) => {\n        const newSelectedKey = event.detail.item.dataset.key;\n        setSelectedKey(newSelectedKey);\n        onSelect(\n          enrichEventWithDetails(event, {\n            ...event.details,\n            selectedItem: getItemByKey(newSelectedKey) || variantItems[0]\n          })\n        );\n        if (closeOnItemSelect) {\n          handleCancelButtonClick();\n        }\n      },\n      [handleCancelButtonClick, closeOnItemSelect, selectedKey, variantItems, setSelectedKey]\n    );\n\n    const passThroughProps = usePassThroughHtmlProps(props, ['onSelect']);\n\n    if (!variantItems || variantItems.length < 1) {\n      return null;\n    }\n\n    return (\n      <div className={variantManagementClasses.valueOf()} style={style} title={tooltip} {...passThroughProps} ref={ref}>\n        <Title level={level} className={classes.title}>\n          {selectedItem.label}\n        </Title>\n        <Button\n          onClick={handleOpenVariantManagement}\n          design={ButtonDesign.Transparent}\n          icon=\"navigation-down-arrow\"\n          disabled={disabled}\n        />\n        <ResponsivePopover ref={popoverRef} headerText={popupTitle} placementType={placement} footer={footerButtons}>\n          <List onItemClick={handleVariantItemSelect} mode={ListMode.SingleSelect}>\n            {variantItems.map((item) => (\n              <StandardListItem\n                style={{ width: '300px' }}\n                data-key={item.key}\n                type={ListItemTypes.Active}\n                key={item.key}\n                selected={selectedKey === item.key}\n              >\n                {item.label}\n              </StandardListItem>\n            ))}\n          </List>\n        </ResponsivePopover>\n      </div>\n    );\n  }\n);\n\nVariantManagement.defaultProps = {\n  popupTitle: 'Variants',\n  selectedKey: null,\n  onSelect: () => {},\n  closeOnItemSelect: true,\n  placement: PlacementType.Bottom,\n  level: TitleLevel.H4,\n  disabled: false,\n  variantItems: []\n};\nVariantManagement.displayName = 'Variant Management';\n\nexport { VariantManagement };\n"],"names":["styles","container","display","alignItems","textAlign","cursor","title","color","ThemingParameters","sapButton_TextColor","sapButton_Hover_TextColor","disabled","sapGroup_TitleTextColor","footer","margin","useStyles","createComponentStyles","name","VariantManagement","forwardRef","props","ref","variantItems","popupTitle","className","style","tooltip","placement","level","onSelect","closeOnItemSelect","classes","popoverRef","useRef","useState","selectedKey","key","setSelectedKey","useEffect","handleCancelButtonClick","useCallback","current","close","handleOpenVariantManagement","e","open","target","i18nBundle","useI18nBundle","footerButtons","useMemo","ButtonDesign","Emphasized","getText","CANCEL","getItemByKey","find","item","selectedItem","variantManagementClasses","StyleClassHelper","of","put","handleVariantItemSelect","event","newSelectedKey","detail","dataset","enrichEventWithDetails","details","passThroughProps","usePassThroughHtmlProps","length","valueOf","label","Transparent","ListMode","SingleSelect","map","width","ListItemTypes","Active","defaultProps","PlacementType","Bottom","TitleLevel","H4","displayName"],"mappings":"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"}