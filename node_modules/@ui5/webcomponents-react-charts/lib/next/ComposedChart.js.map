{"version":3,"file":"ComposedChart.js","sources":["../../src/hooks/useChartMargin.ts","../../src/internal/defaults.ts","../../src/hooks/useLongestYAxisLabel.ts","../../src/hooks/useObserveXAxisHeights.ts","../../src/hooks/usePrepareDimensionsAndMeasures.ts","../../src/hooks/useTooltipFormatter.ts","../../src/internal/staticProps.ts","../../src/components/ComposedChart/index.tsx"],"sourcesContent":["import { useMemo } from 'react';\n\nexport const useChartMargin = (margin, hasZoomingTool) =>\n  useMemo(() => {\n    return {\n      right: margin?.right ?? 30,\n      top: margin?.top ?? hasZoomingTool ? 40 : 20,\n      bottom: margin?.bottom ?? 20,\n      left: margin?.left ?? 10\n    };\n  }, [margin, hasZoomingTool]);\n","export const defaultFormatter = (d) => d;\n\nexport const defaultMaxYAxisWidth = 200;\n","import { getTextWidth } from '@ui5/webcomponents-react-charts/lib/Utils';\nimport { useMemo } from 'react';\nimport { getValueByDataKey } from 'recharts/lib/util/ChartUtils';\nimport { defaultMaxYAxisWidth } from '../internal/defaults';\n\nexport const useLongestYAxisLabel = (dataset: unknown[], elements): [number, object] =>\n  useMemo(() => {\n    let labelLength = 0;\n    const primaryElement = elements[0];\n\n    if (dataset instanceof Array && primaryElement) {\n      const resolveAllMeasureLabels = (item): string[] => {\n        return elements.map((elementConfig) =>\n          primaryElement.formatter(getValueByDataKey(item, elementConfig.accessor, ''))\n        );\n      };\n      labelLength = Math.max(...dataset.map(resolveAllMeasureLabels).flat().map(getTextWidth));\n      labelLength += 8;\n    }\n\n    labelLength = Math.min(labelLength, defaultMaxYAxisWidth);\n\n    return [labelLength, { marginLeft: labelLength, maxWidth: `calc(100% - ${labelLength + 10}px)` }];\n  }, [dataset, elements]);\n","import debounce from 'lodash.debounce';\nimport { RefObject, useEffect, useRef, useState } from 'react';\n\nconst defaultAxisHeight = 30;\n\nexport const useObserveXAxisHeights = (chartRef: RefObject<SVGElement>, axisCount) => {\n  const [xAxisHeights, setXAxisHeights] = useState(Array(axisCount).fill(defaultAxisHeight));\n  const mostRecentXAxisHeights = useRef<number[]>(xAxisHeights);\n\n  useEffect(() => {\n    const mutationObserver = new MutationObserver(\n      debounce(() => {\n        const defaultHeights = Array(axisCount).fill(defaultAxisHeight);\n        chartRef.current?.querySelectorAll<SVGElement>('.xAxis').forEach((xAxis, index) => {\n          const currentAxisHeight = xAxis?.getBBox()?.height;\n          if (currentAxisHeight > 30) {\n            defaultHeights[index] = currentAxisHeight;\n          }\n        });\n\n        const arraysHaveTheSameLength = mostRecentXAxisHeights.current.length === defaultHeights.length;\n        const arrayContentIsIdentical = mostRecentXAxisHeights.current.every(\n          (value, index) => defaultHeights[index] === value\n        );\n        if (!(arraysHaveTheSameLength && arrayContentIsIdentical)) {\n          mostRecentXAxisHeights.current = defaultHeights;\n          setXAxisHeights(defaultHeights);\n        }\n      }, 75)\n    );\n\n    if (chartRef.current) {\n      mutationObserver.observe(chartRef.current, {\n        characterData: false,\n        characterDataOldValue: false,\n        attributes: false,\n        childList: true,\n        subtree: true\n      });\n    }\n    return () => {\n      mutationObserver.disconnect();\n    };\n  }, [chartRef, setXAxisHeights, mostRecentXAxisHeights]);\n\n  return xAxisHeights;\n};\n","import { useMemo } from 'react';\n\nexport const usePrepareDimensionsAndMeasures = <DimensionConfig = any, MeasureConfig = any>(\n  rawDimensions,\n  rawMeasures,\n  dimensionDefaults = {},\n  measureDefaults = {}\n) => {\n  const dimensions: DimensionConfig = useMemo(\n    () =>\n      rawDimensions.map((label) => ({\n        ...dimensionDefaults,\n        ...label\n      })),\n    [rawDimensions, dimensionDefaults]\n  );\n\n  const measures: MeasureConfig = useMemo(\n    () =>\n      rawMeasures.map((value) => ({\n        ...measureDefaults,\n        ...value\n      })),\n    [rawMeasures, measureDefaults]\n  );\n\n  return { dimensions, measures };\n};\n","import { useCallback } from 'react';\n\nexport const useTooltipFormatter = (measures) => {\n  return useCallback(\n    (value, name, props) => {\n      const measure = measures.find(({ accessor }) => accessor === props.dataKey);\n      if (measure && measure.formatter && typeof measure.formatter === 'function') {\n        return measure.formatter(value);\n      }\n      return value;\n    },\n    [measures]\n  );\n};\n","import { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\n\nexport const tickLineConfig = { stroke: 'transparent' };\nexport const tooltipContentStyle = { backgroundColor: ThemingParameters.sapBackgroundColor };\nexport const tooltipFillOpacity = { fillOpacity: 0.3 };\nexport const xAxisPadding = { left: 25, right: 25 };\n","import { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\nimport { useConsolidatedRef } from '@ui5/webcomponents-react-base/lib/useConsolidatedRef';\nimport { enrichEventWithDetails } from '@ui5/webcomponents-react-base/lib/Utils';\nimport { ChartDataLabel } from '@ui5/webcomponents-react-charts/lib/components/ChartDataLabel';\nimport { ComposedChartPlaceholder } from '@ui5/webcomponents-react-charts/lib/components/ComposedChartPlaceholder';\nimport { XAxisTicks } from '@ui5/webcomponents-react-charts/lib/components/XAxisTicks';\nimport { YAxisTicks } from '@ui5/webcomponents-react-charts/lib/components/YAxisTicks';\nimport { ChartContainer } from '@ui5/webcomponents-react-charts/lib/next/ChartContainer';\nimport { useLegendItemClick } from '@ui5/webcomponents-react-charts/lib/useLegendItemClick';\nimport React, { FC, forwardRef, Ref, useCallback, useMemo } from 'react';\nimport {\n  Area,\n  Bar,\n  Brush,\n  CartesianGrid,\n  ComposedChart as ComposedChartLib,\n  Legend,\n  Line,\n  ReferenceLine,\n  Tooltip,\n  XAxis,\n  YAxis\n} from 'recharts';\nimport { useChartMargin } from '../../hooks/useChartMargin';\nimport { useLongestYAxisLabel } from '../../hooks/useLongestYAxisLabel';\nimport { useObserveXAxisHeights } from '../../hooks/useObserveXAxisHeights';\nimport { usePrepareDimensionsAndMeasures } from '../../hooks/usePrepareDimensionsAndMeasures';\nimport { useTooltipFormatter } from '../../hooks/useTooltipFormatter';\nimport { IChartDimension } from '../../interfaces/IChartDimension';\nimport { IChartMeasure } from '../../interfaces/IChartMeasure';\nimport { RechartBaseProps } from '../../interfaces/RechartBaseProps';\nimport { defaultFormatter } from '../../internal/defaults';\nimport { tickLineConfig, tooltipContentStyle, tooltipFillOpacity } from '../../internal/staticProps';\n\nconst dimensionDefaults = {\n  formatter: defaultFormatter\n};\n\nconst measureDefaults = {\n  formatter: defaultFormatter,\n  opacity: 1\n};\n\ninterface MeasureConfig extends IChartMeasure {\n  /**\n   * width of the current chart element, defaults to `1` for `lines` and `20` for bars\n   */\n  width?: number;\n  /**\n   * Opacity\n   * @default 1\n   */\n  opacity?: number;\n  /**\n   * Chart type\n   */\n  type: AvailableChartTypes;\n  /**\n   * bar Stack ID\n   * @default undefined\n   */\n  stackId?: string;\n}\n\ninterface DimensionConfig extends IChartDimension {\n  interval?: number;\n}\n\nexport interface ComposedChartProps extends RechartBaseProps {\n  dimensions: DimensionConfig[];\n  /**\n   * An array of config objects. Each object is defining one element in the chart.\n   *\n   * <h4>Required properties</h4>\n   * - `accessor`: string containing the path to the dataset key this element should display. Supports object structures by using <code>'parent.child'</code>.\n   *   Can also be a getter.\n   * - `type`: string which chart element to show. Possible values: `line`, `bar`, `area`.\n   *\n   * <h4>Optional properties</h4>\n   *\n   * - `label`: Label to display in legends or tooltips. Falls back to the <code>accessor</code> if not present.\n   * - `color`: any valid CSS Color or CSS Variable. Defaults to the `sapChart_Ordinal` colors\n   * - `formatter`: function will be called for each data label and allows you to format it according to your needs\n   * - `hideDataLabel`: flag whether the data labels should be hidden in the chart for this element.\n   * - `DataLabel`: a custom component to be used for the data label\n   * - `width`: width of the current chart element, defaults to `1` for `lines` and `20` for bars\n   * - `opacity`: element opacity, defaults to `1`\n   * - `stackId`: bars with the same stackId will be stacked\n   *\n   */\n  measures: MeasureConfig[];\n  /**\n   * layout for showing measures. `horizontal` bars would equal the column chart, `vertical` would be a bar chart.\n   * Default Value: `horizontal`\n   */\n  layout?: 'horizontal' | 'vertical';\n}\n\nenum ChartTypes {\n  line = Line,\n  bar = Bar,\n  area = Area\n}\n\ntype AvailableChartTypes = 'line' | 'bar' | 'area' | string;\n\n/**\n * <code>import { ComposedChart } from '@ui5/webcomponents-react-charts/lib/next/ComposedChart';</code>\n */\nconst ComposedChart: FC<ComposedChartProps> = forwardRef((props: ComposedChartProps, ref: Ref<any>) => {\n  const {\n    loading,\n    dataset,\n    onDataPointClick,\n    noLegend = false,\n    noAnimation = false,\n    onLegendClick,\n    layout = 'horizontal',\n    style,\n    className,\n    tooltip,\n    slot\n  } = props;\n\n  const chartRef = useConsolidatedRef<any>(ref);\n\n  const chartConfig = useMemo(() => {\n    return {\n      yAxisVisible: false,\n      xAxisVisible: true,\n      gridStroke: ThemingParameters.sapList_BorderColor,\n      gridHorizontal: true,\n      gridVertical: false,\n      legendPosition: 'bottom',\n      legendHorizontalAlign: 'left',\n      zoomingTool: false,\n      resizeDebounce: 250,\n      ...props.chartConfig\n    };\n  }, [props.chartConfig]);\n\n  const { dimensions, measures } = usePrepareDimensionsAndMeasures(\n    props.dimensions,\n    props.measures,\n    dimensionDefaults,\n    measureDefaults\n  );\n\n  const tooltipValueFormatter = useTooltipFormatter(measures);\n\n  const primaryDimension = dimensions[0];\n  const primaryMeasure = measures[0];\n\n  const dataKeys = measures.map(({ accessor }) => accessor);\n  const colorSecondY = chartConfig.secondYAxis\n    ? dataKeys.findIndex((key) => key === chartConfig.secondYAxis?.dataKey)\n    : 0;\n\n  const onDataPointClickInternal = useCallback(\n    (payload, eventOrIndex, event) => {\n      if (payload.name) {\n        typeof onDataPointClick === 'function' &&\n          onDataPointClick(\n            enrichEventWithDetails(event ?? eventOrIndex, {\n              value: payload.value.length ? payload.value[1] - payload.value[0] : payload.value,\n              dataIndex: payload.index ?? eventOrIndex,\n              dataKey: payload.value.length\n                ? Object.keys(payload).filter((key) =>\n                    payload.value.length\n                      ? payload[key] === payload.value[1] - payload.value[0]\n                      : payload[key] === payload.value && key !== 'value'\n                  )[0]\n                : payload.dataKey ??\n                  Object.keys(payload).find((key) => payload[key] === payload.value && key !== 'value'),\n              payload: payload.payload\n            })\n          );\n      } else {\n        typeof onDataPointClick === 'function' &&\n          onDataPointClick(\n            enrichEventWithDetails(\n              {},\n              {\n                value: eventOrIndex.value,\n                dataKey: eventOrIndex.dataKey,\n                dataIndex: eventOrIndex.index,\n                payload: eventOrIndex.payload\n              }\n            )\n          );\n      }\n    },\n    [onDataPointClick]\n  );\n\n  const onItemLegendClick = useLegendItemClick(onLegendClick);\n\n  const isBigDataSet = dataset?.length > 30 ?? false;\n  const primaryDimensionAccessor = primaryDimension?.accessor;\n\n  const [yAxisWidth, legendPosition] = useLongestYAxisLabel(dataset, layout === 'vertical' ? dimensions : measures);\n\n  const marginChart = useChartMargin(chartConfig.margin, chartConfig.zoomingTool);\n  const xAxisHeights = useObserveXAxisHeights(chartRef, layout === 'vertical' ? 1 : props.dimensions.length);\n\n  const measureAxisProps = {\n    axisLine: chartConfig.yAxisVisible,\n    tickLine: tickLineConfig,\n    tickFormatter: primaryMeasure?.formatter,\n    interval: 0\n  };\n\n  const Placeholder = useCallback(() => {\n    return <ComposedChartPlaceholder layout={layout} measures={measures} />;\n  }, [layout, measures]);\n  return (\n    <ChartContainer\n      ref={chartRef}\n      loading={loading}\n      dataset={dataset}\n      Placeholder={Placeholder}\n      style={style}\n      className={className}\n      tooltip={tooltip}\n      slot={slot}\n      resizeDebounce={chartConfig.resizeDebounce}\n    >\n      <ComposedChartLib\n        margin={marginChart}\n        data={dataset}\n        layout={layout}\n        className={typeof onDataPointClick === 'function' ? 'has-click-handler' : undefined}\n      >\n        <CartesianGrid\n          vertical={chartConfig.gridVertical}\n          horizontal={chartConfig.gridHorizontal}\n          stroke={chartConfig.gridStroke}\n        />\n        {chartConfig.xAxisVisible &&\n          dimensions.map((dimension, index) => {\n            let AxisComponent;\n            const axisProps: any = {\n              dataKey: dimension.accessor,\n              interval: dimension?.interval ?? (isBigDataSet ? 'preserveStart' : 0),\n              tickLine: index < 1,\n              axisLine: index < 1,\n              allowDuplicatedCategory: index === 0,\n              scale: dimensions.length === 1 ? 'band' : 'auto'\n            };\n\n            if (layout === 'vertical') {\n              axisProps.type = 'category';\n              axisProps.tick = <YAxisTicks config={dimension} />;\n              axisProps.yAxisId = index;\n              axisProps.width = yAxisWidth;\n              AxisComponent = YAxis;\n            } else {\n              axisProps.dataKey = dimension.accessor;\n              axisProps.tick = <XAxisTicks config={dimension} />;\n              axisProps.xAxisId = index;\n              axisProps.height = xAxisHeights[index];\n              AxisComponent = XAxis;\n            }\n\n            return <AxisComponent key={dimension.accessor} {...axisProps} />;\n          })}\n        {layout === 'horizontal' && (\n          <YAxis\n            {...measureAxisProps}\n            yAxisId=\"primary\"\n            width={yAxisWidth}\n            tick={<YAxisTicks config={primaryMeasure} />}\n          />\n        )}\n        {layout === 'vertical' && (\n          <XAxis {...measureAxisProps} xAxisId=\"primary\" type=\"number\" tick={<XAxisTicks config={primaryMeasure} />} />\n        )}\n\n        {chartConfig.secondYAxis?.dataKey && layout === 'horizontal' && (\n          <YAxis\n            dataKey={chartConfig.secondYAxis.dataKey}\n            stroke={chartConfig.secondYAxis.color ?? `var(--sapChart_OrderedColor_${(colorSecondY % 11) + 1})`}\n            label={{ value: chartConfig.secondYAxis.name, offset: 2, angle: +90, position: 'center' }}\n            orientation=\"right\"\n            interval={0}\n            yAxisId=\"secondary\"\n          />\n        )}\n        {chartConfig.secondYAxis?.dataKey && layout === 'vertical' && (\n          <XAxis\n            dataKey={chartConfig.secondYAxis.dataKey}\n            stroke={chartConfig.secondYAxis.color ?? `var(--sapChart_OrderedColor_${(colorSecondY % 11) + 1})`}\n            label={{ value: chartConfig.secondYAxis.name, offset: 2, angle: +90, position: 'center' }}\n            orientation=\"top\"\n            interval={0}\n            xAxisId=\"secondary\"\n            type=\"number\"\n          />\n        )}\n        {chartConfig.referenceLine && (\n          <ReferenceLine\n            stroke={chartConfig.referenceLine.color}\n            y={layout === 'horizontal' ? chartConfig.referenceLine.value : undefined}\n            x={layout === 'vertical' ? chartConfig.referenceLine.value : undefined}\n            label={chartConfig.referenceLine.label}\n            yAxisId={layout === 'horizontal' ? 'primary' : undefined}\n            xAxisId={layout === 'vertical' ? 'primary' : undefined}\n          />\n        )}\n        <Tooltip cursor={tooltipFillOpacity} formatter={tooltipValueFormatter} contentStyle={tooltipContentStyle} />\n        {!noLegend && (\n          <Legend\n            verticalAlign={chartConfig.legendPosition}\n            align={chartConfig.legendHorizontalAlign}\n            onClick={onItemLegendClick}\n            wrapperStyle={legendPosition}\n          />\n        )}\n        {measures?.map((element, index) => {\n          const ChartElement = (ChartTypes[element.type] as any) as FC<any>;\n\n          const chartElementProps: any = {\n            isAnimationActive: noAnimation === false\n          };\n          let labelPosition = 'top';\n\n          switch (element.type) {\n            case 'line':\n              chartElementProps.activeDot = {\n                onClick: onDataPointClickInternal\n              };\n              chartElementProps.strokeWidth = element.width;\n              chartElementProps.strokeOpacity = element.opacity;\n              chartElementProps.dot = !isBigDataSet;\n              break;\n            case 'bar':\n              chartElementProps.fillOpacity = element.opacity;\n              chartElementProps.strokeOpacity = element.opacity;\n              chartElementProps.barSize = element.width;\n              chartElementProps.onClick = onDataPointClickInternal;\n              chartElementProps.stackId = element.stackId ?? undefined;\n              chartElementProps.labelPosition = element.stackId ? 'insideTop' : 'top';\n              if (layout === 'vertical') {\n                labelPosition = 'insideRight';\n              } else {\n                labelPosition = 'insideTop';\n              }\n              break;\n            case 'area':\n              chartElementProps.dot = !isBigDataSet;\n              chartElementProps.fillOpacity = 0.3;\n              chartElementProps.strokeOpacity = element.opacity;\n              chartElementProps.onClick = onDataPointClickInternal;\n              chartElementProps.strokeWidth = element.width;\n              break;\n          }\n\n          if (layout === 'vertical') {\n            chartElementProps.xAxisId = chartConfig.secondYAxis?.dataKey === element.accessor ? 'secondary' : 'primary';\n          } else {\n            chartElementProps.yAxisId = chartConfig.secondYAxis?.dataKey === element.accessor ? 'secondary' : 'primary';\n          }\n          return (\n            <ChartElement\n              key={element.accessor}\n              name={element.label ?? element.accessor}\n              label={\n                isBigDataSet ? null : (\n                  <ChartDataLabel config={element} chartType={element.type} position={labelPosition} />\n                )\n              }\n              stroke={element.color ?? `var(--sapChart_OrderedColor_${(index % 11) + 1})`}\n              fill={element.color ?? `var(--sapChart_OrderedColor_${(index % 11) + 1})`}\n              type=\"monotone\"\n              dataKey={element.accessor}\n              {...chartElementProps}\n            />\n          );\n        })}\n        {chartConfig.zoomingTool && (\n          <Brush\n            y={10}\n            dataKey={primaryDimensionAccessor}\n            stroke={ThemingParameters.sapObjectHeader_BorderColor}\n            travellerWidth={10}\n            height={20}\n          />\n        )}\n      </ComposedChartLib>\n    </ChartContainer>\n  );\n});\n\nComposedChart.displayName = 'ComposedChart';\n\nexport { ComposedChart };\n"],"names":["useChartMargin","margin","hasZoomingTool","useMemo","right","top","bottom","left","defaultFormatter","d","defaultMaxYAxisWidth","useLongestYAxisLabel","dataset","elements","labelLength","primaryElement","Array","resolveAllMeasureLabels","item","map","elementConfig","formatter","getValueByDataKey","accessor","Math","max","flat","getTextWidth","min","marginLeft","maxWidth","defaultAxisHeight","useObserveXAxisHeights","chartRef","axisCount","useState","fill","xAxisHeights","setXAxisHeights","mostRecentXAxisHeights","useRef","useEffect","mutationObserver","MutationObserver","debounce","defaultHeights","current","querySelectorAll","forEach","xAxis","index","currentAxisHeight","getBBox","height","arraysHaveTheSameLength","length","arrayContentIsIdentical","every","value","observe","characterData","characterDataOldValue","attributes","childList","subtree","disconnect","usePrepareDimensionsAndMeasures","rawDimensions","rawMeasures","dimensionDefaults","measureDefaults","dimensions","label","measures","useTooltipFormatter","useCallback","name","props","measure","find","dataKey","tickLineConfig","stroke","tooltipContentStyle","backgroundColor","ThemingParameters","sapBackgroundColor","tooltipFillOpacity","fillOpacity","opacity","ChartTypes","Line","Bar","Area","ComposedChart","forwardRef","ref","loading","onDataPointClick","noLegend","noAnimation","onLegendClick","layout","style","className","tooltip","slot","useConsolidatedRef","chartConfig","yAxisVisible","xAxisVisible","gridStroke","sapList_BorderColor","gridHorizontal","gridVertical","legendPosition","legendHorizontalAlign","zoomingTool","resizeDebounce","tooltipValueFormatter","primaryDimension","primaryMeasure","dataKeys","colorSecondY","secondYAxis","findIndex","key","onDataPointClickInternal","payload","eventOrIndex","event","enrichEventWithDetails","dataIndex","Object","keys","filter","onItemLegendClick","useLegendItemClick","isBigDataSet","primaryDimensionAccessor","yAxisWidth","marginChart","measureAxisProps","axisLine","tickLine","tickFormatter","interval","Placeholder","ComposedChartLib","undefined","dimension","AxisComponent","axisProps","allowDuplicatedCategory","scale","type","tick","yAxisId","width","YAxis","xAxisId","XAxis","color","offset","angle","position","referenceLine","element","ChartElement","chartElementProps","isAnimationActive","labelPosition","activeDot","onClick","strokeWidth","strokeOpacity","dot","barSize","stackId","sapObjectHeader_BorderColor","displayName"],"mappings":"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"}